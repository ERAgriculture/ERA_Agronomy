<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Namita Joshi &amp; Peter Steward (Alliance of Bioversity International &amp; CIAT)">
<meta name="dcterms.date" content="2025-04-02">

<title>Introduction to ERA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="ERA-User-Guide_files/libs/clipboard/clipboard.min.js"></script>
<script src="ERA-User-Guide_files/libs/quarto-html/quarto.js"></script>
<script src="ERA-User-Guide_files/libs/quarto-html/popper.min.js"></script>
<script src="ERA-User-Guide_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ERA-User-Guide_files/libs/quarto-html/anchor.min.js"></script>
<link href="ERA-User-Guide_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ERA-User-Guide_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ERA-User-Guide_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ERA-User-Guide_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ERA-User-Guide_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<link href="ERA-User-Guide_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="ERA-User-Guide_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="ERA-User-Guide_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="ERA-User-Guide_files/libs/datatables-binding-0.33/datatables.js"></script>
<script src="ERA-User-Guide_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="ERA-User-Guide_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="ERA-User-Guide_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="ERA-User-Guide_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="ERA-User-Guide_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="ERA-User-Guide_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#what-is-era" id="toc-what-is-era" class="nav-link active" data-scroll-target="#what-is-era"><span class="header-section-number">1</span> What is ERA?</a>
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">1.1</span> Introduction</a></li>
  <li><a href="#extraction-template" id="toc-extraction-template" class="nav-link" data-scroll-target="#extraction-template"><span class="header-section-number">1.2</span> Extraction template</a></li>
  <li><a href="#data-model-raw-data" id="toc-data-model-raw-data" class="nav-link" data-scroll-target="#data-model-raw-data"><span class="header-section-number">1.3</span> Data model (raw data)</a></li>
  <li><a href="#comparisons-table" id="toc-comparisons-table" class="nav-link" data-scroll-target="#comparisons-table"><span class="header-section-number">1.4</span> Comparisons table</a></li>
  <li><a href="#controlled-vocabulary" id="toc-controlled-vocabulary" class="nav-link" data-scroll-target="#controlled-vocabulary"><span class="header-section-number">1.5</span> Controlled vocabulary</a></li>
  </ul></li>
  <li><a href="#download-the-data" id="toc-download-the-data" class="nav-link" data-scroll-target="#download-the-data"><span class="header-section-number">2</span> Download the data</a>
  <ul>
  <li><a href="#download-controlled-vocabulary" id="toc-download-controlled-vocabulary" class="nav-link" data-scroll-target="#download-controlled-vocabulary"><span class="header-section-number">2.1</span> Download controlled vocabulary</a></li>
  <li><a href="#download-data-model" id="toc-download-data-model" class="nav-link" data-scroll-target="#download-data-model"><span class="header-section-number">2.2</span> Download data model</a></li>
  <li><a href="#download-comparisons-table" id="toc-download-comparisons-table" class="nav-link" data-scroll-target="#download-comparisons-table"><span class="header-section-number">2.3</span> Download comparisons table</a></li>
  </ul></li>
  <li><a href="#exploring-the-comparisons-data-era.compiled" id="toc-exploring-the-comparisons-data-era.compiled" class="nav-link" data-scroll-target="#exploring-the-comparisons-data-era.compiled"><span class="header-section-number">3</span> Exploring the comparisons data (<code>ERA.Compiled</code>)</a>
  <ul>
  <li><a href="#subsetting-the-data-to-agronomy" id="toc-subsetting-the-data-to-agronomy" class="nav-link" data-scroll-target="#subsetting-the-data-to-agronomy"><span class="header-section-number">3.1</span> Subsetting the data to agronomy</a></li>
  <li><a href="#exploring-geographic-locations-of-studies-available" id="toc-exploring-geographic-locations-of-studies-available" class="nav-link" data-scroll-target="#exploring-geographic-locations-of-studies-available"><span class="header-section-number">3.2</span> Exploring geographic locations of studies available</a></li>
  <li><a href="#exploring-the-products-of-studies-available" id="toc-exploring-the-products-of-studies-available" class="nav-link" data-scroll-target="#exploring-the-products-of-studies-available"><span class="header-section-number">3.3</span> Exploring the products of studies available</a></li>
  <li><a href="#exploring-the-agronomic-practices-within-studies-available" id="toc-exploring-the-agronomic-practices-within-studies-available" class="nav-link" data-scroll-target="#exploring-the-agronomic-practices-within-studies-available"><span class="header-section-number">3.4</span> Exploring the agronomic practices within studies available</a></li>
  <li><a href="#exploring-outcomes-reported-in-the-studies-available" id="toc-exploring-outcomes-reported-in-the-studies-available" class="nav-link" data-scroll-target="#exploring-outcomes-reported-in-the-studies-available"><span class="header-section-number">3.5</span> Exploring outcomes reported in the studies available</a></li>
  </ul></li>
  <li><a href="#an-example-of-an-analysis-you-could-do-with-era.compiled" id="toc-an-example-of-an-analysis-you-could-do-with-era.compiled" class="nav-link" data-scroll-target="#an-example-of-an-analysis-you-could-do-with-era.compiled"><span class="header-section-number">4</span> An example of an analysis you could do with <code>ERA.Compiled</code></a></li>
  <li><a href="#for-more-details-or-to-explore-collaborative-opportunities" id="toc-for-more-details-or-to-explore-collaborative-opportunities" class="nav-link" data-scroll-target="#for-more-details-or-to-explore-collaborative-opportunities"><span class="header-section-number">5</span> For more details or to explore collaborative opportunities:</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction to ERA</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Namita Joshi &amp; Peter Steward (Alliance of Bioversity International &amp; CIAT) </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 2, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div style="display: flex; align-items: center; gap: 20px;">
<p><img src="images/Era_Logo_FINAL_Colour.png" width="100" style="margin-top: 10px;"></p>
</div>
<p>This vignette will guide you throgh the agronomy data available within the Evidence for Resilient Agriculture (ERA). The dataset serves as a critical resource for understanding agricultural resilience, specifically focusing on agriculture systems and their adaptation to climate change. If you are interested in livestock please see <a href="https://github.com/ERAgriculture/ERL">ERL</a>.</p>
<p>We will cover the following:</p>
<p><strong><em>What is ERA:</em></strong></p>
<p><em>1. Introduction</em></p>
<p><em>2. Extraction template</em></p>
<p><em>3. Understanding the different data formats of ERA</em></p>
<p><strong><em>Downloading the data:</em></strong></p>
<p><em>1. Downloading the ERA.Compiled pre-cooked comparisons data</em></p>
<p><em>2. Downloading the data tables</em></p>
<p><strong><em>Exploring the data:</em></strong></p>
<p><em>1. Sub-setting the data to agronomy</em></p>
<p><em>2. Exploring geographic locations of studies available</em></p>
<p><em>3. Exploring the agronomic practices of studies available</em></p>
<p><em>4. Common outcomes reported</em></p>
<p><strong><em>An example of an analysis you could do with ERA</em></strong></p>
<section id="what-is-era" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> What is ERA?</h1>
<section id="introduction" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1.1</span> Introduction</h2>
<p><em>Evidence for Resilient Agriculture</em> (ERA) helps address the gap. Started in 2012, ERA was envisaged to evaluate the evidence base of Climate-Smart Agriculture (CSA)—that is, agriculture that delivers productivity, resilience, and climate change mitigation outcomes simultaneously. However, the technologies included within ERA such as agroforestry, intercropping, and crop rotations, among many others are common features of agroecology, regenerative agriculture, nature-based solutions, ecosystem-based adaptation, sustainable land management, and other approaches as are many of the outcome indicators such as yield, net economic returns, soil organic carbon, land equivalent ratio, labour required, and more. This means that ERA is relevant for various perspectives on development and is flexible to allow users to define ‘effectiveness’ or ‘work’ consistently with their worldview.</p>
<p>ERA is a comparatively large agricultural meta-dataset in terms of number of technologies, outcomes, and studies. ERA (version = era_compiled-v1.0-mh_2025-03-19.2-sc_2025_01_30.1-ie_2025_03_19.1-2025-03-28.1) includes 193835 observations from 2902 peer-reviewed agricultural experiments that took place in Africa between 1934 and 2022. Together, these data compare how changing more than 451 combinations of agronomic, livestock, or tree management technologies affect more than 97 indicators of productivity, resilience, and greenhouse gas emissions and/or carbon stocks. The experiments were identified via <em>Web of Science</em> and <em>Scopus</em> and were evaluated against predetermined inclusion criteria: (i) location, (ii) technology and outcome relevance, (iii) data on both a new and conventional technology, and (iv) inclusion of primary data.</p>
<p>Data are extracted using an excel template to create a complex data-model describing the context of a numerical experimental result. Control vs treatment comparison are <strong>not</strong> defined in the extraction template. Instead complex logic is applied to the data model to generate a simplified table of valid comparisons (we refer to this as <code>ERA.Compiled</code>).</p>
<p>The comparison table includes over 135 fields describing each study’s geospatial location in WGS1984 (EPSG:4326) co-ordinate system, (<code>Latitude</code>,<code>Longitude</code>), planting, harvest, and outcome measurement dates, experimental design, management treatments (i.e., which are combinations of technologies used), and outcomes. The system can handle intercropping and temporal sequences of management activities including crop rotations. The comparison table can be enriched by connecting back to the complex data model.</p>
</section>
<section id="extraction-template" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="extraction-template"><span class="header-section-number">1.2</span> Extraction template</h2>
<p>Over the years of ERA, several versions of the extraction template have been developed. However, the most widely used and thoroughly tested version is the Excel macro-enabled workbook. In this format, each study is documented in a separate Excel file, with individual tabs dedicated to different components of the study—such as site information, soil characteristics, management practices, and outcomes. The work book contains the following sections:<br>
</p>
<ol type="1">
<li><p>Pub = Publication: capture bibliographic data about an experiment here.</p></li>
<li><p>Site &amp; Site Soils = captures information about experimental sites, any detailed information about soil variables should be captured in Site.Soils</p></li>
<li><p>ExpD = Experimental design, captures information about the number of study replicates, plot sizes, etc.</p></li>
<li><p>Practices (pale yellow tabs) = These tabs collect information about the agricultural management practices used in an experiment. Within tabs you can record base practices which apply to all treatments (e.g.&nbsp;50kg of 60-30-30 NPK was applied to all treatments) or experimental practices that different between treatments (e.g.&nbsp;one treatment used straw mulch and another did not). Each set of experimental practices within a practice tab creates named building blocks that you will combine in the Make.Trt tab to create treatments. Base practices you do not need to consider again once they are entered in the practice tabs, they also do not require naming as the spreadsheet should autopopulate the name field with “base”.</p>
<p>Many practice tabs will require you to select and name a practice method that relates to a code in ERA practice definitions, this part of the data entry is critical. After you have chosen a method and named a practice you can often scroll down to tables that can collect more detail information about how the practice was implemented. There are also notes sections where you can copy paste important experimental information that you do no think the workbook captures well. Each tab is a theme that represents a set of related practices:</p>
<ul>
<li><p>Chems = Chemical applications (applications of herbicides, fungicides, insecticides, etc.)</p></li>
<li><p>Harvest = Harvest methods &amp; timing Irrigat = Irrigation methods &amp; application rates</p></li>
<li><p>Mulch = Materials that are not from crops in the experimental plot (record these in the residues tab) applied to the surface of the plot as a mulch. Records the type of mulch &amp; application details . Does not include compost or manures (use the nutrients tab).</p></li>
<li><p>Nutrients = Inputs/fertilizers added to a plot designed to improve/increase/provide nutrients for crop growth. Nutrients can include inorganic fertilizers, compost, manure, micronutrients, biochar, biofertilizers, biosolids and other organic amendments. Records the type of fertilizer &amp; application details.</p></li>
<li><p>Comp = Composition of organic mulch or nutrient materials.</p></li>
<li><p>pH = Materials &amp; application rates of materials used for amendment of soil pH (e.g.&nbsp;liming).</p></li>
<li><p>Plant = Planting methods &amp; timing Residues = Fate of crop residues &amp; compositional details.</p></li>
<li><p>Tillage = Tillage method(s) used &amp; details of tillage operations.</p></li>
<li><p>Variety = Crop varieties used &amp; information on their basic traits.</p></li>
<li><p>WaterHarvest = Water harvesting methods (e.g., planting basins, terraces, tied ridges, zai pits, etc.).</p></li>
<li><p>Weed = Physical (not chemical) weeding events (typically hand weeding).</p></li>
</ul></li>
<li><p>Make.Trt = Create &amp; name treatments by combining the experimental practices entered in the practice tabs.</p></li>
<li><p>Intercropping = Combine the crop specific treatments created in the Make.Trt tab to describe intercropping systems.</p></li>
<li><p>Time.Seq (Rotations) = Create temporal sequences of treatments and/or intercrops to reflect, for example, crop rotations or fallows.</p></li>
<li><p>EU&amp;Out = Experimental Unit &amp; Outcomes: Choose the experimental units (typically crop or animal commodities) and experimental outcomes for which data are presented.</p></li>
<li><p>Times = Select the cropping seasons or years for which data are presented.</p></li>
<li><p>EnterData = Captures values and associated errors for the experimental treatments, products, outcomes and times specified in the previous tabs. Do not start data entry until you’ve completed all the previous tabs.</p></li>
</ol>
<p>The link to this extraction template can be found here: <a href="https://github.com/CIAT/ERA_dev/blob/main/data_entry/industrious_elephant_2023/excel_data_extraction_template/V2.0.28%20-%20Industrious%20Elephant.xlsm" class="uri">https://github.com/CIAT/ERA_dev/blob/main/data_entry/industrious_elephant_2023/excel_data_extraction_template/V2.0.28%20-%20Industrious%20Elephant.xlsm</a></p>
<p><strong><em>Click on the image below to watch a short tutorial on the extraction template</em></strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://youtu.be/0Ad-JPmFSOg"><img src="images/extraction_template.png" class="img-fluid figure-img" alt="Watch on YouTube"></a></p>
<figcaption>Watch on YouTube</figcaption>
</figure>
</div>
</section>
<section id="data-model-raw-data" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="data-model-raw-data"><span class="header-section-number">1.3</span> Data model (raw data)</h2>
<p>Each of the tables within the front end of the excel feeds are imported using <code>R</code> to generate tables that form a data model. These tables provide you with <strong>detailed information</strong> from each study, e.g fertilizer applied, timing of fertilizer and so on.</p>
<p>The main tables are:</p>
<ul>
<li><code>Pub.Out</code> : Publication information, DOIs, ERA template version and project.</li>
<li><code>Site.Out</code>,<code>Soils.Out</code> : Location, coordinates, location uncertainty radius, site/location type, site soils.</li>
<li><code>ExpD.Out</code> : Experimental design.</li>
<li><code>Times.Out</code> : Measurement periods for which experimental results are reported (typically growing seasons).</li>
<li><code>Times.Clim</code> : Climate information for locations x measurement periods recorded in Times.Out (e.g.&nbsp;rainfall for particular growing season).</li>
<li><code>Prod.Out</code> : Crop or animal commodity.</li>
<li><code>Var.Out</code> : Variety and any usual associated information reported.</li>
<li><code>Till.Out</code> : Tillage management.</li>
<li><code>Plant.Out</code>,<code>Plant.Method</code> : Planting information (density, arrangement, thinning, etc.).</li>
<li><code>PD.Codes</code>,<code>PD.Out</code>: Management practices that relate to improved timing of planting activities and information on planting and harvest dates.</li>
<li><code>Fert.Out</code>,<code>Fert.Method</code>,<code>Fert.Comp</code>: Detailed fertilizer management and composition of organic fertilizers.</li>
<li><code>Chems.Code</code>,<code>Chems.Out</code>,<code>Chems.AI</code> : Chemicals applications (pesticides, veterinary medicines, and chemicals that do not fit the definition of a fertilizer).</li>
<li><code>Res.Out</code>,<code>Res.Method</code>,<code>Res.Comp</code> : Information on mulching or crop residue management.</li>
<li><code>Har.Out</code> :Improved harvesting.</li>
<li><code>pH.Out</code> : pH management.</li>
<li><code>WH.Out</code> : Water harvesting practices.</li>
<li><code>Irrig.Codes</code>,<code>Irrig.Methods</code>: Irrigation management practices and applications.</li>
<li><code>AF.Out</code>,<code>AF.Trees</code>: Agroforestry management and tree species and density.<br>
</li>
<li><code>Int.Out</code> : Intercropping management.</li>
<li><code>Rot.Out``Rot.Seq</code>,<code>Rot.Seq.Summ</code> : Crop rotations or other temporal sequence of managment activities.</li>
<li><code>Out.Out</code>,<code>Out.Econ</code> : The Outcomes reported in the experiment and any additional context required for understanding them (e.g.&nbsp;discount rate and time period for economic outcomes).</li>
<li><code>Data.Out</code> : Reported values and errors for combinations of outcome, commodity, management (treatment, intercrop, and/or rotation), location, and time (measurement period).</li>
</ul>
<p>The data model also makes use of a large controlled vocabulary (the <code>master codes</code>), which is described later in this document. We aspire to develop the controlled vocabulary into an ontology for agricultural meta-analysis. A beta-version for livestock can be found here</p>
<p>More detailed documentation of the ERA agronomy data model is available <a href="https://eragriculture.github.io/ERA_Agronomy/ERA-Create-Agronomy-Data-Model.html">here</a>.</p>
<p><img src="images/data%20model.png" class="img-fluid"></p>
</section>
<section id="comparisons-table" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="comparisons-table"><span class="header-section-number">1.4</span> Comparisons table</h2>
<p>In an attempt to make ERA data easily usable, we provide a table of control vs.&nbsp;treatment comparisons (<code>ERA.Compiled</code>). This is a flat excel file that pulls <strong>only essential fields</strong> from each data table table to create rows of treatment versus control. The table does not include detailed descriptions of management practices, but it can be connected back to the ERA data model if specific management information is required.</p>
<p>It should be noted that <strong>more studies</strong> are available in the comparisons table than the data model. This is because the earliest iteration of ERA used this flat template (<code>ERA.Compiled</code>) to extract data. We do not have the resources to convert all extractions to the data model.</p>
<p>Below is a simple conceptional framework of how ERA.Compiled is generated from the data tables.</p>
<p><img src="images/metadata_to_compiled.png" class="img-fluid"></p>
</section>
<section id="controlled-vocabulary" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="controlled-vocabulary"><span class="header-section-number">1.5</span> Controlled vocabulary</h2>
<p>ERA uses a structured <strong>controlled vocabulary</strong> to ensure consistency and harmonization across thousands of experimental observations. This vocabulary underpins the data model and comparison table by standardizing the names and attributes of practices, outcomes, and management components. It is compiled into an Excel workbook (<code>era_master_sheet.xlsx</code>) and is essential for:</p>
<ul>
<li>Defining <strong>practice types</strong> (e.g., fertilizer, tillage, variety)</li>
<li>Classifying <strong>input materials</strong> (e.g., specific fertilizer types or tree species)</li>
<li>Linking <strong>outcomes</strong> to clear definitions and measurement units</li>
<li>Supporting <strong>interoperability</strong> and reproducibility in meta-analyses</li>
</ul>
<p>The vocabulary is organized into multiple sheets, each corresponding to a different concept area, including:</p>
<ul>
<li><code>prod</code>: commodity types and product subtypes</li>
<li><code>fert</code>: fertilizer types</li>
<li><code>chem</code>: chemical types (e.g.&nbsp;pesticides)</li>
<li><code>chem.comm</code>: commercial chemical names</li>
<li><code>chem.ai</code>: active ingredients</li>
<li><code>trees</code>: agroforestry tree species</li>
<li><code>vars</code>: crop varieties and associated traits</li>
<li><code>out</code>: outcome subindicators</li>
<li><code>prac</code>: subpractices and method types (e.g.&nbsp;planting method, tillage type)</li>
<li><code>residues</code>: residue management material types</li>
</ul>
<p>These vocabularies are linked to the main ERA data tables via foreign key relationships in the <code>dm</code> data model. For example, the <code>Fert.Method</code> table contains a column <code>F.Type</code>, which links to the <code>fert</code> sheet of the master codes. This structure ensures that the dataset can be queried and interpreted accurately at scale.</p>
<p>A future goal is to evolve this vocabulary into a full ontology for agricultural meta-analysis, aligning it with existing semantic web and ontology standards. A beta-version of the <strong>livestock ontology</strong> is already underway.</p>
<p>The most up-to-date version of the vocabulary can be accessed here:</p>
<p><strong><a href="https://github.com/peetmate/era_codes/raw/main/era_master_sheet.xlsx">ERA Master Vocabulary (Excel)</a></strong></p>
</section>
</section>
<section id="download-the-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Download the data</h1>
<p>Data is openly available for download from the S3 Bucket <code>s3://digital-atlas/era/data/</code>.</p>
<section id="download-controlled-vocabulary" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="download-controlled-vocabulary"><span class="header-section-number">2.1</span> Download controlled vocabulary</h2>
<p>This section downloads and imports the ERA controlled vocabulary, which standardizes the naming of practices, products, and outcomes across studies. Both R and Python code examples are provided.</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the era master vocab ######</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>era_vocab_url <span class="ot">&lt;-</span> <span class="st">"https://github.com/peetmate/era_codes/raw/main/era_master_sheet.xlsx"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>era_vocab_local <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dl_dir, <span class="fu">basename</span>(era_vocab_url))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(era_vocab_url, era_vocab_local, <span class="at">mode =</span> <span class="st">"wb"</span>)  <span class="co"># Download and write in binary mode</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the vocab</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>sheet_names <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">excel_sheets</span>(era_vocab_local)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>sheet_names <span class="ot">&lt;-</span> sheet_names[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"sheet|Sheet"</span>, sheet_names)]</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Read each sheet into a list named era_master_codes</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>era_master_codes <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  sheet_names,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    data.table<span class="sc">::</span><span class="fu">data.table</span>(readxl<span class="sc">::</span><span class="fu">read_excel</span>(era_vocab_local, <span class="at">sheet =</span> x))</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">USE.NAMES =</span> <span class="cn">TRUE</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: This is a GPT-generated Python translation and requires validation.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>import os</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>import requests</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define download directory</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>dl_dir <span class="ot">=</span> <span class="st">"era_master_codes"</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">os.makedirs</span>(dl_dir, <span class="at">exist_ok=</span>True)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Define URL and local path</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>era_vocab_url <span class="ot">=</span> <span class="st">"https://github.com/peetmate/era_codes/raw/main/era_master_sheet.xlsx"</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>era_vocab_local <span class="ot">=</span> <span class="fu">os.path.join</span>(dl_dir, <span class="fu">os.path.basename</span>(era_vocab_url))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the file if it doesn't already exist</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not <span class="fu">os.path.exists</span>(era_vocab_local)<span class="sc">:</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    response <span class="ot">=</span> <span class="fu">requests.get</span>(era_vocab_url)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    with <span class="fu">open</span>(era_vocab_local, <span class="st">"wb"</span>) as f<span class="sc">:</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">f.write</span>(response.content)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Read all sheets except those with "sheet" in the name</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>xls <span class="ot">=</span> <span class="fu">pd.ExcelFile</span>(era_vocab_local)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>sheet_names <span class="ot">=</span> [s <span class="cf">for</span> s <span class="cf">in</span> xls.sheet_names <span class="cf">if</span> <span class="st">"sheet"</span> not <span class="cf">in</span> <span class="fu">s.lower</span>()]</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Load each sheet into a dictionary</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>era_master_codes <span class="ot">=</span> {</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    sheet<span class="sc">:</span> <span class="fu">xls.parse</span>(sheet) <span class="cf">for</span> sheet <span class="cf">in</span> sheet_names</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>How you can explore descriptions of major ERA concepts (Practices, Outcomes, Products):</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>practices<span class="ot">&lt;-</span> era_master_codes<span class="sc">$</span>prac[,.(Code,Theme,Practice,Subpractice,Definition)]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  practices,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">scrollY =</span> <span class="st">"400px"</span>,<span class="at">scrollX =</span> <span class="cn">TRUE</span>,<span class="at">pageLength =</span> <span class="dv">50</span>,<span class="at">fixedHeader =</span> <span class="cn">FALSE</span> </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> htmltools<span class="sc">::</span>tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;"</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"management practice definitions"</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">class =</span> <span class="st">"nowrap"</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-105c070977bd1925a260" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-105c070977bd1925a260">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">management practice definitions<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188"],["a1","a3","a4","a4.1","a14","a8","a8.1","a9","a10","a11","a22","a12","a15","a15.1","a15.2","a16","a16.1","a16.2","a17","a17.1","a17.2","a18","a19.1","a19.2","a19.3","a99","d17.1","d17.2","d17.3","d17.4","d17.5","d18.1","d18.2","d18.3","d18.4","d18.5","d22.1","d22.2","d22.3","d9","d10","d13","d14","d15","d16","d11","d12","d19","d20","d1","h60","h61","h10.3","h11","h55.2","h55.1","b34","b37","b72","b36","b54","b53","b13","b14.1","b14.2","b15","b3.1","b3.2","b43","b44","b31","b48.1","b48.2","b48.3","b48.4","b49.1","b49.2","b49.3","b61.1","b61.2","b61.3","b13.3","b12.3","b11.3","b25","b50.1","b50.2","b50.3","b50.4","b55.1","b55.2","b55.3","b57","b59","c1","c4","c3","c2","c5","h14","h15","h16","h26","b4","b5","b6","b69","h55","b35","b33","b45","b46","b47","b68","b70","b71.1","b71.2","b71.3","b52","b56","b58","h1","h2","h38","h18","h50","h48","h66.1","h66.2","b16","b17","b21","b64","b23","b29","b30","b75","b73","b74","b67","h10","h10.1","h10.2","f1","f2","f3","f4","f5","h17","h21","h22","h30","b38","b39","b26","b27","b27.1","b27.2","b27.3","b51","b11.1","b11.2","b13.2","b12.1","b12.2","b28","b32","b40","b40.1","b40.2","b41","b41.1","b41.2","b60","b60.1","b60.2","b60.3","h24","h6","h35","h36","h39","h37","h6.1","h6.2","h7","h23","h3"],["Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Agroforestry","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Animals","Blue Water Management","Blue Water Management","Blue Water Management","Blue Water Management","Blue Water Management","Blue Water Management","Blue Water Management","Blue Water Management","Blue Water Management","Blue Water Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Crop Management","Energy","Energy","Energy","Energy","Energy","Energy","Energy","Energy","Energy","Genetic improvement","Genetic improvement","Genetic improvement","Genetic improvement","Genetic improvement","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Green Water Management","Non-CSA","Non-CSA","Non-CSA","Non-CSA","Non-CSA","Non-CSA","Non-CSA","Non-CSA","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Nutrient Management","Postharvest","Postharvest","Postharvest","Postharvest","Postharvest","Postharvest","Postharvest","Postharvest","Postharvest","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Soil Management","Water Management","Water Management","Water Management"],["FMNR","Alleycropping","Alleycropping","Alleycropping","Alleycropping","Parklands","Parklands","Boundary Planting","Boundary Planting","Silvopasture","Silvopasture","Multistrata Agroforestry","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Pruning","Agroforestry Fallow","Agroforestry Fallow","Agroforestry Fallow","Other Agroforestry","Feed Addition","Feed Addition","Feed Addition","Feed Addition","Feed Addition","Feed Substitution","Feed Substitution","Feed Substitution","Feed Substitution","Feed Substitution","Feed Processing","Feed Processing","Feed Processing","Genetic Improvement","Genetic Improvement","Manure Management","Manure Management","Manure Management","Pasture Management","Pasture Management","Pasture Management","Pasture Management","Pasture Management","Aquasilviculture","Feed Addition; Feed Substitution","Feed Addition; Feed Substitution","Manure Management","Pasture Management","Genetic Improvement","Genetic Improvement","Irrigation","Deficit Irrigation","Irrigation","Irrigation","Supplemental Irrigation","Irrigation","Improved Rice Management","Improved Rice Management","Improved Rice Management","Improved Rice Management","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Double Cropping","Double Cropping","Double Cropping","Double Cropping","Intercropping","Intercropping","Intercropping","Intercropping","Intercropping","Intercropping","Green Manure","Green Manure","Green Manure","Intercropping","Intercropping","Intercropping","Intercropping","Intercropping","Intercropping","Intercropping","Intercropping","Intercropping","Intercropping or Rotation","Biogas","Biogas","Biogas","Cookstove","Cookstove","Cookstove","Biogas/cookstove","Biogas","Cookstove","Improved Varieties","Improved Varieties","Improved Varieties","Improved Varieties","Unimproved Variety","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Non-CSA","Agronomy;Agroforestry","Agronomy","Agronomy;Agroforestry","Agronomy;Agroforestry","Agronomy","Agronomy;Agroforestry","Agronomy;Agroforestry","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Organic Fertilizer","Organic Fertilizer","Organic Fertilizer","Organic Fertilizer","Organic Fertilizer","Organic Fertilizer","Fertilizer","Fertilizer","Fertilizer","Harvest Method","Harvest Method","Storage","Storage","Storage","Harvest Method","Storage","Storage","Storage","Reduced Tillage","Reduced Tillage","Mulch","Mulch","Mulch","Mulch","Mulch","Mulch","Green Manure","Green Manure","Green Manure","Green Manure","Green Manure","Biochar","pH Control","Crop Residue","Crop Residue","Crop Residue","Crop Residue Incorporation","Crop Residue Incorporation","Crop Residue Incorporation","Improved Fallow","Improved Fallow","Improved Fallow","Improved Fallow","Improved Fallow","Conventional Tillage","Crop Residue","Crop Residue","Crop Residue","Crop Residue","No-Till (Off-season)","Reduced Tillage (Off-season)","Irrigation","Irrigation","Planting"],["Farmer Managed Natural Regeneration","Alleycropping (N fixing)","Alleycropping (Non N fixing)","Alleycropping (Mixed)","Alleycropping (Unspecified)","Parklands","Scattered Trees","Tree Windbreak","Living Fences or Hedgerows","Silvopasture","Agrosilvopastoral System","Multistrata Agroforestry","Tree Prunings Applied (Unspecified)","Tree Prunings Mulched (Unspecified)","Tree Prunings Incorporated (Unspecified)","Tree Prunings Applied (N fixing)","Tree Prunings Mulched (N fixing)","Tree Prunings Incorporated (N fixing)","Tree Prunings Applied (Non N fixing)","Tree Prunings Mulched (Non N fixing)","Tree Prunings Incorporated (Non N fixing)","Tree Pruning (Fate Unknown)","Agroforestry Fallow (N fixing)","Agroforestry Fallow (Non N fixing)","Agroforestry Fallow (Unspecified)","Other Agroforestry","Crop Fodders (Added)","Non Crop Fodders (Added)","Agroforestry Fodders (Added)","Animal Manures (Added)","Other Feed (Added)","Crop Fodders (Substituted)","Non Crop Fodders (Substituted)","Agroforestry Fodders (Substituted)","Animal Manures (Substituted)","Other Feed (Substituted)","Chemically Processed Feed","Mechanically Processed Feed","Concentrated Feed","Improved Breeds","Hybridization or Cross Breeding","Manure Collection","Manure Storage","Manure Treatment","Rotational Grazing","Improved Pasture (N fixing)","Improved Pasture (Non N fixing)","Controlled Grazing","Cut &amp; Carry","Aquasilviculture","Basal or Conventional Diet","Conventional Supplement Use","Conventional Manure Handling","Conventional Pasture Management","Unspecified","Unimproved Breed","Drip Irrigation","Deficit Irrigation","Sprinkler Irrigation","Alternate Partial Rootzone Irrigation","Supplemental Irrigation","Irrigation (Other)","Alternate Wetting &amp; Drying (AWD)","Midseason Drainage","Reduced Water Use in Rice","System of Rice Intensification (SRI)","Rotation (N fixing)","Rotation (Non N fixing)","Rotation (N fixing &amp; Non N fixing)","Complex Rotation","Intercrop Rotation","Double Cropping (N fixing &amp; Non N fixing)","Double Cropping (Non N fixing)","Double Cropping (N fixing)","Double Cropping (Monocrop)","Sequential Intercropping (N fixing &amp; Non N fixing)","Sequential Intercropping (Non N fixing)","Sequential Intercropping (N fixing)","Relay Intercropping (N fixing &amp; Non N fixing)","Relay Intercropping (Non N fixing)","Relay Intercropping (N fixing)","Relay Green Manure (N fixing &amp; Non N fixing)","Relay Green Manure (Non N fixing)","Relay Green Manure (N fixing)","Intercrop (N fixing &amp; Non N fixing)","Intercrop (Non N fixing)","Intercrop (N fixing)","Complex Intercrop","Intercrop (Unspecified)","Partial Intercrop (N fixing &amp; Non N fixing)","Partial Intercrop (Non N fixing)","Partial Intercrop (N fixing)","Complex Intercrop Rotation","Intercropping or Rotation (N fixing &amp; Non N fixing)","Biogas","Biofertilizer","Biogas Switching","Improved Cookstoves","Cookstove Switching","Unimproved Stove Technology","Conventional Biomass Feedstocks","Predominant Biodigestor Model","Conventional Energy Sources","Drought Tolerance","Heat Tolerance","Salinity Tolerance","Improved Seeds","Unimproved Variety","Cisterns and Tanks","Zai Pits","Stone Rows","Grass Strips","Planting Basins","Dam","Terraces","Bunds","Ridge &amp; Furrow","Tied Ridges","Microcatchments","Fanya Juu or Fanya Chini","Trench","Non CSA","Monoculture","Continuous Cropping","Simple Intercrop","Simple Crop Rotation","Conventional rice management","Chemical Weeding (Herbicides)","Hand Weeding","Inorganic K Inputs","Inorganic N Inputs","Inorganic P Inputs","Inorganic Micronutrients Inputs","Urea","Compost","Manure","Kraaling or Parcage","Organic (Other)","Ash","Biosolids","Conventional input (fertilizer) use","No fertilizers added","Recommend rate of fertilizer","Harvest Technique","Harvesting Timing","Improved Drying","Improved Chemical Storage","Improved Physical Storage","Traditional harvesting method","Unimproved Storage Structure","Unimprove or No Preservation Technique","Uimproved Drying Technique","No or Zero Tillage","Reduced or Minimum Tillage","Plastic Mulch","Mulch (Unspecified Plants)","Mulch (N fixing)","Mulch (Non N fixing)","Mulch (N fixing &amp; Non N fixing)","Mulch (Other Materials)","Green Manure (N fixing In Time)","Green Manure (N fixing In Space)","Green Manure (Mixed In Space)","Green Manure (Non N fixing In Time)","Green Manure (Non N fixing In Space)","Biochar","Liming or Calcium Addition","Crop Residue Unresolved (Unspecified)","Crop Residue Unresolved (N fixing)","Crop Residue Unresolved (Non N fixing)","Crop Residue Incorporation (Unspecified)","Crop Residue Incorporation (N fixing)","Crop Residue Incorporation (Non N fixing)","Improved Fallow (Unspecified)","Improved Fallow (N fixing)","Improved Fallow (Non N fixing)","Improved Fallow (N &amp; Non N fixing)","Natural or Bare Fallow","Conventional Tillage","Crop Residues Removed","Crop Residues Burnt","Crop Residues Grazed","Crop Residue Incorporated","No-Till (Off-season)","Reduced Tillage (Off-season)","Fully Irrigated Control or Experiment","No Irrigation Control or Rainfed Agriculture","Transplanting Seedlings. This practice code has only been applied to the 2018 dataset"],["Systematic regrowth of trees or shrubs on agricultural, forest or pasture land. FMNR is used in areas where there are stumps that can coppice or seeds that can germinate. Sometimes called farmer assisted regeneration.","Intercropping with rows or alleys of nitrogen fixing trees or woody shrubs.","Intercropping with rows or alleys of trees or woody shrubs that do not fix nitrogen.","Intercropping with rows or alleys of a mixture of trees or woody shrubs of which some but not all fix nitrogen.","Intercropping with rows or alleys of trees or woody shrubs where no information about the type of plant is given.","Intercropping under scattered or regularly planted trees.","Unspecified sparse or scattered trees incorporated into croplands, pastures or rangelands.","Barriers of trees or shrubs planted along field boundaries to protect plants against wind.","Living fence and hedges are planted in rows around the edge of the field to reduce the effect of wind or runoff on crops.","Combination of trees or shrubs with pasture (forage grasses) and livestock","Combination of livestock production systems (pastures) with trees or shrubs and crops.","Multistorey systems agroforestry systems have several spatial strata occupied by different tree (i.e. woody) crops (coffee, tea, cacao, banana etc).","Prunings (leaves, branches, etc.) of an unidentified woody plant were retained/returned to the cropping area, but it is unknown if they were mulched or incorporated.","Prunings (leaves, branches, etc.) of an unidentified woody plant were applied to the cropping area as mulch (prunings on the surface).","Prunings (leaves, branches, etc.) of an unidentified woody plant were applied to the cropping area and incorporated into the soil (e.g., by ploughing).","Prunings (leaves, branches, etc.) of a nitrogen fixing (leguminous) woody plant residues were retained/returned to the cropping area, but it is unknown if they were mulched or incorporated.","Prunings (leaves, branches, etc.) of a nitrogen fixing (leguminous) woody plant applied were applied to the cropping area as mulch (prunings on the surface).","Prunings (leaves, branches, etc.) of a nitrogen fixing (leguminous) woody plant applied were applied to the cropping area and incorporated into the soil (e.g., by ploughing).","Prunings (leaves, branches, etc.) of a non-nitrogen fixing (not leguminous) woody plant were retained/returned to the cropping area, but it is unknown if they were mulched or incorporated.","Prunings (leaves, branches, etc.) of a non-nitrogen fixing (not leguminous) woody plant applied were applied to the cropping area as mulch (prunings on the surface).","Prunings (leaves, branches, etc.) of a non-nitrogen fixing (not leguminous) woody plant applied were applied to the cropping area and incorporated into the soil (e.g., by ploughing).","The cutting or coppicing of woody agroforestry species, generally to reduce competition or shading with intercrops, but the fate of the residues is unknown (it is unclear if was applied or removed).","Planting fallows with short-rotation woody or perennial species that fix nitrogen.","Planting fallows with short-rotation woody or perennial species that do not fix nitrogen.","Planting fallows with short-rotation woody or perennial species of an unknown type.","Agroforestry practice that does not meet definitions in Agroforestry practice theme.","Feeds added to animal diets that come from non-woody crops not usually grown for fodder, but for another purpose (e.g. consumption). These can be crop grain. field residues (for example maize stalks left over once the grain component has been harvested) and or processing residues (for example the maize bran produced as a byproduct of milling flour). Soyabeans fit in this category as they are grown for human consumption and livestock feed.","Feeds added to animal diets that are non-woody crops grown primarily for fodder (e.g., alfafa or clover grown to feed to cattle) or non-woody plants harvested from non-cropped areas (e.g., forage grasses such as napier grass grown to stabilize terraces, cactus harvested from boundary fences, wild growing plants in wayside or fallows, algae, etc.).","Feeds added to animal diets that are from agroforestry shrub or tree fodders or other woody plants.","Feeds added to animal diets that are animal manures.","Feeds added to animal diets that are non-plant or non-manure based materials. These typically include materials that are the by-product of animal processing (e.g., bone meal or fish meal).","Components of a basal diet fully or partially substituted for residues from crops not primarily grown for fodder, but for another purpose (e.g. consumption). These can be field residues (for example maize stalks left over once the grain component has been harvested) and or processing residues (for example the maize bran produced as a byproduct of milling flour).","Components of a basal diet fully or partially substituted for non-woody crops grown primarily for fodder (e.g., alfafa or clover grown to feed to cattle) or non-woody plants harvested from non-cropped areas (e.g., forage grasses such as napier grass grown to stabilize terraces, cactus harvested from boundary fences, wild growing plants in wayside or fallows, algae, etc.). Feeds are added compared to a base practice control such as hay ad libitum only.","Components of a basal diet fully or partially substituted for agroforestry shrub or tree fodders (woody plants).","Components of a basal diet fully or partially substituted for animal manures.","Components of a basal diet fully or partially substituted with non-plant and non-manure based materials. These typically include materials for the by-product of animal processing (e.g., bone meal or fish meal).","Fodders that have been chemically processed, for example urea-treated stover or fermented fodders. Silage is a type of fodder made from green foliage crops which have been preserved by acidification, achieved through fermentation.","Fodders or plant wastes that have been mechanically processed, for example chopped or pelletted grasses or ground orange peel.","Non-forage feeds rich in energy and protein. Concentrates include feeds such as maize bran, cotton seed cake, molasses, fish meal and bean cake. Non-forage feeds may use energy or protein rich part plants such as seeds, whereas forage feeds are mainly plant leaves and stems.","The use of improved animal breeds, these are animals bred for specific traits usually productivity (typically breeds exotic to Africa like Friesen, Holstein or Jersey cows).","The use of animal cross breeds produced by the mating (hybridization) of individuals of different breeds, varieties, or species.","Techniques to collect manure, e.g, increased frequency of collection and removal from the kraal.","Manure storage techniques such as heaps, pits or dry lots.","Techniques for treatment of manure.","The movement of animals between different paddocks at intervals.","The planting of pastures with leguminous forages.","The planting of pastures with non-leguminous forages.","The restriction of animal movement within pastures. Controlled grazing is known by many names, such as rotational grazing, rotational stocking, intensive grazing and strip grazing. Typically a large pasture is subdivided into several smaller pastures (paddocks) by cross fencing and animals stocked in one of the paddocks. When the forage has been removed, cattle are rotated to the next paddock.","A system where animals are confined and feed is brought to them, also known as zero grazing.","An aquaculture practice in combination with a sylviculture practice in close spatial proximity. The classic example of this practice is fish or crustacean farming in mangroves, to conserve or restore mangrove trees and produce food.","A diet fed to animals without additional of anything.","Supplement given to animals by the farmer or deemed control by author and is","Conventional Manure handling (farmer practice).","Conventional pasture management. This could be the traditional or farmer practice or a practice the authors state as an unimproved control practice.","The breed breed practice is not specified as being improved or unimproved","A local or otherwise unimproved animal breed.","The use of plastic pipes to drip water into the soil at low pressure.","Application of water below full crop requirements compared to a control of conventional irrigation.","Application of irrigation through sprinkler technology.","Part of the root is exposed to drying soil and the remaining is irrigated in accordance with crop requirements and soil drying rate. This practice is also called partial root zone drying (PRD).","The addition of irrigation to typically rainfed crops.","The use of improved irrigation that isn't more specifically defined.","Repeated flooding and draining of paddy rice fields, managed responsively in relation to soil moisture levels.","The paddy rice field is drained during the season, but usually only once.","Practices that reduce water use in rice that are not alternate wetting &amp; drying (AWD) or midseason drainage. Consider creating a new practice rather than using this code.","If possible it is best to unpack SRI into its component practices rather than using this practice code. If impossible to disaggregate the SRI practice then use this code. \r\nSRI is a system package which can include early transplanting (8-12 days), 25cm spacing and alternate wet and dry. Identified by authors.","A crop rotation sequence of two or more legumes.\r\nA general definition of rotation is that more than one crop is grown in the same location, but across different growing season (diversification in time). Different varieties of the same crop do not count as rotation. A crop is not counted in a rotation sequence when it is obviously a minor intercrop to a main crop which is invariant over time (typically there is standard planting of the main crop from year to year and the intercrop is squeezed in-between the rows of the main crop, for example cowpea planted at a low density inbetween maize rows).","A crop rotation sequence with two or more non-legumes.\r\nA general definition of rotation is that more than one crop is grown in the same location, but across different growing season (diversification in time). Different varieties of the same crop do not count as rotation.","A crop rotation sequence containing non-leguminous and leguminous crops (e.g. a maize/bean rotation a maize-bean intercrop followed by cassava). \r\nA general definition of rotation is that more than one crop is grown in the same location, but across different growing season (diversification in time). Different varieties of the same crop do not count as rotation. A crop is not counted in a rotation sequence when it is obviously a minor intercrop to a main crop which is invariant over time (typically there is standard planting of the main crop from year to year and the intercrop is squeezed in-between the rows of the main crop, for example cowpea planted at a low density inbetween maize rows).","A crop rotation sequence with three or more species or rotations with different annual cycles. If intercropping is present in a complex rotation then this should also be captured with an intercropping code. A species is not counted towards a rotation sequence species count when it is obviously a minor intercrop to a main crop which remains invariant (typically there is standard planting of the main crop from year to year and the intercrop is squeezed in-between the rows of the main crop, for example cowpea planted at a low density inbetween maize rows). If it is not clear which crops are main or minor or not then count them all towards a complex rotation total (so an experiement might have maize one year, then the next year some maize rows are replaced with beans, in this case the beans are counted as a rotation crop and the number of species is two). \r\nA general definition of rotation is that more than one crop is grown in the same location, but across different growing season (diversification in time). Different varieties of the same crop do not count as rotation. Crops should be grown for harvest and not as cover crop or green manure.","Rotation where a main crop remains the same between seasons (no change in spatial location or crop identity), but the minor intercrop is not always present. If the same crop is intercropped throughout the sequence (e.g. Maize-Beans/Maize/Maize-Beans) then this requires a Partial Intercropping code (b50.1, b50.2 or b50.3) or if the intercrop changes throughout the sequence (e.g. Maize-Beans/Maize-Millet/Maize-Beans) this requires a Complex Intercrop Rotation code (b57). If the intercrop is mostly one crop for a long sequence, but rarely something else is planted, we still consider this to be relevant to the Partial Intercropping code.\r\nA general definition of rotation is that more than one crop is grown in the same location, but across different growing season (diversification in time). Different varieties of the same crop do not count as rotation. A crop is not counted in a rotation sequence when it is obviously a minor intercrop to a main crop which is invariant over time (typically there is standard planting of the main crop from year to year and the intercrop is squeezed in-between the rows of the main crop, for example cowpea planted at a low density inbetween maize rows). Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","A double cropping system where two different crops are planting sequentially within the same growing season. Some crops fix nitrogen others do not.","A double cropping system where two different crops are planting sequentially within the same growing season. No crops fix nitrogen.","A double cropping system where two different crops are planting sequentially within the same growing season. All crops fix nitrogen.","A double cropping system where the same crop is planted more than once and sequentially within the same growing season.","An intercropping and double cropping  system where two crops are planted together at the start of the season, then one is harvested and another crop planted whilst the non-harvested crop is growing (all within the same season). Some crops fix nitrogen others does not.","An intercropping and double cropping intercropping system where two crops are planted together at the start of the season, then one is harvested and another crop planted whilst the non-harvested crop is growing (all within the same season). No crops fix nitrogen.","An intercropping and double cropping system where two crops are planted together at the start of the season, then one is harvested and another crop planted whilst the non-harvested crop is growing (all within the same season). All crops fix nitrogen.","A crop is planted and then another is planted with that crop, but at a later date within the same season. Some crops fixes nitrogen the others does not.","A crop is planted and then another is planted with that crop, but at a later date within the same season.  No crops fixes nitrogen.","A crop is planted and then another is planted with that crop, but at a later date within the same season. All crop fix nitrogen.","A crop is planted and then a green manure is planted with that crop, but at a later date within the same season. Some crops fixes nitrogen the others does not. A green manure is usually planted to improve soil quality and it should not be harvested crop.","A crop is planted and then a green manure is planted with that crop, but at a later date within the same season. No crops fixes nitrogen.","A crop is planted and then a green manure is planted with that crop, but at a later date within the same season. All crop fix nitrogen.","An intercropping system with a legume and non-legume. \r\nIntercropping is where more than one crop is grown at the same time in the same area of management (typically a single field), this is diversification in space rather than diversification in time. Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","An intercropping system with two non-legumes.\r\nIntercropping is where more than one crop is grown at the same time in the same area of management (typically a single field), this is diversification in space rather than diversification in time. Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","An intercropping system with two or more legumes (edible or marketable).\r\nIntercropping is where more than one crop is grown at the same time in the same area of management (typically a single field), this is diversification in space rather than diversification in time. Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","An intercropping system that is too complex to descirbe using existing ERA definitions. Typically involving multiple intercropping practices at the same time. Please use the notes to descirbe this practice.","An intercropping system is present, but no details on composition are available.\r\nIntercropping is where more than one crop is grown at the same time in the same area of management (typically a single field), this is diversification in space rather than diversification in time. Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","An intercropping system with a legume and non-legume where intercropping is not present every season (spatial diversification that is variable over time). For example a repeating sequence of Maize followed by a Maize-Cowpea intercrop, this would also get an intercrop rotation code.\r\nIntercropping is where more than one crop is grown at the same time in the same area of management (typically a single field), this is diversification in space rather than diversification in time. Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","An intercropping system with two non-legume crops where intercropping is not present every season (spatial diversification that is variable over time). For example a repeating sequence of Maize followed by a Maize-Cowpea intercrop, this would also get an intercrop rotation code.\r\nIntercropping is where more than one crop is grown at the same time in the same area of management (typically a single field), this is diversification in space rather than diversification in time. Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","An intercropping system with two legume crops where intercropping is not present every season (spatial diversification that is variable over time). For example a repeating sequence of Maize followed by a Maize-Cowpea intercrop, this would also get an intercrop rotation code.\r\nIntercropping is where more than one crop is grown at the same time in the same area of management (typically a single field), this is diversification in space rather than diversification in time. Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","There is a main crop (there is no change in spatial location or crop identity) and intercrop (minor) crop sequence , but the nature of the main-intercrop pairing changes between seasons (e.g. Maize-Beans/Maize-Millet/Maize-Beans) , this can be thought of as rotation in the intercrop (minor crop). If the intercrop is mostly one crop for a long sequence, but rarely something else is planted, we still consider this to be relevant to the Partial Intercropping code.\r\nIntercropping is where more than one crop is grown at the same time in the same area of management (typically a single field), this is diversification in space rather than diversification in time. Crops should be grown for harvest and not as cover crop or green manure (if the latter see the green manure practices).","Only use this practices where a paper states that legume intercropping or rotation was used, but the outcomes do not distinguish between the two.","Biogas production from from anaerobic biodigesters.","Fertilizer (biofertilizer) produced using a biodigestor slurry.","Switching of biodigestors biomass feedstocks.","Improved cookstove designed to burn biomass fuels in a cleaner and more efficient manner than conventional practice (e.g., traditional three-stone fires).","Switching cookstove biomass feedstocks.","Use of traditional stoves for burning biomass fuels lile traditional three-stone; a control for improved cookstoves","Use of normal/usual feedstocks in a biomass digestor.",null,"A conventional or normal source of fuel.","An improved crop variety bred for potential resistance to drought.","An improved crop variety bred for potential resistance to heat.","An improved crop variety bred for potential resistance to salinity.","An improved crop variety bred for a specific quality other than drought, heat or salinity resistance (e.g. early maturity/short season or improved yields).","A crop variety that has not been improved through intensive crop breeding, for example a farmer's or local variety, or a landrace.","The active collection and storage of water runoff for irrigation purposes.","Small pits to capture water. Pits are filled with manure, compost or other nutrient sources before the rainy season. Crops are planted directly into the pits.","Stones piled in rows within a field, typically along contour lines, for the purpose of rainwater harvesting or soil water conservation.","Strips of grass within a field or farm created for erosion control, typically they are placed along contour lines.","Small planting pits dug to capture water, crops are planted directly into the pits.","Construction or enhancement of water capture and storage using small dams (e.g. Chaco dams).","The soil of steeply sloping fields is dug into large steps.","A permanent or semi-permanent ridge of soil or stone typically constructed along a contour that slows water from moving off-site, names include contour bunds, stone bunds, semicircular bunds.","The mounding of soil to allow movement and storage of water in a furrow next to the ridge. Ridges are usually remade each season.","Basins are made by digging out shallow furrows along the contour lines of a slope and making ridges on the downside of the furrows. These are “tied” together by slightly lower ridges which are made at regular intervals along the furrows.","Microcatchment is a term for infield water catchment. Negarim microcatchments, for example, are diamond-shaped basins surrounded by small earth bunds with an infiltration pit in the lowest corner of each. Runoff is collected from within the basin and stored in the infiltration pit. Microcatchments are mainly used for growing trees or bushes.","A local method used in Tanzania of ditches dug on steep slopes. Fanya juu are terraces constructed by digging ditches and heaping the soil, forming bunds in the upper sides of the ditches. Fanya chini are similar to fanya juus except that the soil is put on the lower side of the contour trench.","A trench dug along the contour lines of a field to capture water. This practice should have no associated bunds or banks with the trench.","general, other, typically should not be used","A single crop is grown in the experimental plot and is invariant over time.","A single crop is grown in the experimental plot, this is invariant over the course of the experiment.","Control for improved intercropping.","Control for improved rotations.","A control for SRI, alternate wetting $drying, midseason drainage and reduced water use in Rice","Suppression of weed growth or killing weeds using chemicals","Extraction of weeds by hands through pulling or use of tools like panga, hoe etc.","The addition of potassium (K) inorganic inputs to fields, typically to test application timing or amount.","The addition of nitrogen (N) inorganic inputs to fields, typically to test application timing or amount.","The addition of phosphorous (P) inorganic inputs to fields, typically to test application timing or amount.","The addition of micronutrients such as Fe, B, Cu, Mo, Zn, Mn, Cl, Ni, or Si typically to test application timing or amount.","The addition of urea (a source of nitrogen) to fields, typically to test application timing or amount.","Application of composted plant material to the field, typically to test application timing or amount. Composts are organic materials which have been piled, moistened, and allowed to undergo biological decomposition","Application of animal manure to the field, typically to test application timing or amount. This does not include biosolids such as sewage which have their own practice codes.","A south and west African method of housing animals at night in crop fields to produce manure.","An organic input that does not match any other category in ERA.","Application of plant ash to fields.","Biosolids are treated and processed sewage sludge applied to fields as a fertilizer. Biosolids do not include industrial waste products, e.g. sugar production waste, ethanol production waste.","Addition of fertilizer without any specific measurement","No inputs of inorganic or organic fertilizer.","Addition of recommended amount of fertilizer following soil tests. This is to be used when the papers specifically says the recommended rates.","Changing the manner in which crops are harvested, for example using a new tool.","Changing the time when crops are harvested, for example moving to piecemeal harvesting from all-at-once or havesting in the morning compared to the heat of the day.","Changing the manner in which crops are dried.","Using naturally derived or manufactured chemicals such as pesticides or preservatives improve storage. This could include adding actellic dust or fungicide to maize bags or fumigation of stores.","Improving the way food stuffs are stored such as Purdue improved crop storage (PICS) bags, use of granaries or improvements to granaries.","Harvesting at usual times or with usual tools.","Storing feeds/seeds in an unimproved manner, such as a traditional granary or storeroom.","Typically no method is used to preserve stored foods or the method is considered to be unimproved.","No or an unimproved drying technique is used to preserve food for storage.","No or zero tillage. Planted may use a dibble stick or other direct seeding methods.","Any tillage practice which reduces, but does not eliminate (no or zero tillage), soil disturbance. Examples include strip tillage, ripping, subsoiling or reducing the number of tillage passes or depth of tillage.","Mulching with plastic materials on the soil surface.","Mulching with plant residues from an unspecified plant type, residues remain on soil surface and are not incorporated or burnt (for example).","Mulching with herbaceous plant residues from a nitrogen fixing (leguminous) plant, residues remain on soil surface and are not incorporated or burnt (for example).","Mulching with herbaceous plant residues from a non-nitrogen fixing (not leguminous) plant, residues remain on soil surface and are not incorporated or burnt (for example).","Mulching with a mixture of herbaceous plant residues from both nitrogen-fixing (leguminous) and non-nitrogen fixing plant, residues remain on soil surface and are not incorporated or burnt (for example).","Mulching on the soil surface with organic materials that are not herbaceous plants or plastic. This includes materials like wood shavings.","Non-harvested nitrogen fixing (leguminous) plants grown at a different time to harvested crops in system. For example a rotation where in season one a maize main crop is planted (from which grain is harvested) then the next season (or in-between seasons) a green manure is planted (from which no components were harvested for consumption, fibre or sale).","Non-harvested nitrogen fixing (leguminous) plants grown at the same time as harvested crops. For example a rotation where in season one a maize main crop is planted (from which grain is harvested) then the next season (or in-between seasons) a green manure is planted (from which no components were harvested for consumption, fibre or sale).","Non-harvested mixed nitrogen fixing (leguminous) and non-nitrogen fixing plants grown at the same time as harvested crops. For example a rotation where in season one a maize main crop is planted (from which grain is harvested) then the next season (or in-between seasons) a green manure is planted (from which no components were harvested for consumption, fibre or sale).","Non-harvested non-nitrogen fixing (not leguminous) plants grown at a different time to harvested crops in system.For example a rotation where in season one a maize main crop is planted (from which grain is harvested) then the next season (or in-between seasons) a green manure is planted (from which no components were harvested for consumption, fibre or sale).","Non-harvested non-nitrogen fixing (not leguminous) plants grown at the same time as harvested crops.For example a rotation where in season one a maize main crop is planted (from which grain is harvested) then the next season (or in-between seasons) a green manure is planted (from which no components were harvested for consumption, fibre or sale).","Application of biochar.","Application of lime (e.g., dolomite) or forms of calcium (e.g. oyster shells) to the field to raise the pH.","Crop residues from an unspecified type of plant are retained in the field, but it is unknown if the residues are mulched or incorporated","Crop residues from a nitrogen-fixing (leguminous) plant are retained in the field, but it is unknown if the residues are mulched or incorporated","Crop residues from a non nitrogen-fixing (not leguminous) plant are retained in the field, but it is unknown if the residues are mulched or incorporated","The incorporation of crop residues from an unspecified type of plant. Residues may be brought to the field as biomass transfer.","The incorporation of crop residues from a nitrogen-fixing (leguminous) plant. Residues may be brought to the field as biomass transfer.","The incorporation of crop residues from a non nitrogen-fixing (not leguminous) plant. Residues may be brought to the field as biomass transfer.","Planting fallows with unspecified plant species to improve soil health, typically lasting more than one season.","Planting fallows with nitrogen-fixing (leguminous) plant species to improve soil health, often lasting more than one season.","Planting fallows with non nitrogen-fixing (not leguminous) plant species to improve soil health, often lasting more than one season.","Planting fallows with nitrogen-fixing (leguminous) and non nitrogen-fixing plant species to improve soil health, often lasting more than one season.","A fallowing practice where the land is left unmanaged between production periods.","Tillage that is not considered to be reduced, typically includes methods such as moldboard plough which invert the upper layers of the soil.","Crop residues are removed from the field.","Crop residues are burnt (in the field).","Crop residues are grazed by livestock (in the field).","Crop residues are incorporated into the field.","Used in the unusal situation where off-season tillage erroneously adds a no-tillage ERA practice to a rotation sequence (add example from HK0314)","Used in the unusal situation where off-season tillage erroneously adds a reduced tillage ERA practice to a rotation sequence (add example from HK0314)","The crop is fully irrigated.","No irrigation used, rainfed agriculture.","Transplanting young seedlings, a practice commonly used to improve rice management in irrigated systems."]],"container":"<table class=\"nowrap\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Code<\/th>\n      <th>Theme<\/th>\n      <th>Practice<\/th>\n      <th>Subpractice<\/th>\n      <th>Definition<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollY":"400px","scrollX":true,"pageLength":50,"fixedHeader":false,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Code","targets":1},{"name":"Theme","targets":2},{"name":"Practice","targets":3},{"name":"Subpractice","targets":4},{"name":"Definition","targets":5}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>outcomes<span class="ot">&lt;-</span> era_master_codes<span class="sc">$</span>out[,.(Code,Pillar,Pillar.Code,Subpillar,Indicator,Subindicator,Definition)]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  outcomes,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">scrollY =</span> <span class="st">"400px"</span>,<span class="at">scrollX =</span> <span class="cn">TRUE</span>,<span class="at">pageLength =</span> <span class="dv">20</span>,<span class="at">fixedHeader =</span> <span class="cn">FALSE</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">columnDefs =</span> <span class="fu">list</span>(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">width =</span> <span class="st">'100px'</span>, <span class="at">targets =</span> <span class="fu">which</span>(<span class="fu">names</span>(outcomes) <span class="sc">==</span> <span class="st">"Definition"</span>) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">class =</span> <span class="st">"nowrap"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> htmltools<span class="sc">::</span>tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;"</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"outcome definitions"</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-75075c8647799c7a4592" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-75075c8647799c7a4592">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">outcome definitions<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116"],[101,101.1,101.2,103,104,118,119.1,119.2,119.3,119.4,119.5,400,102,120,124,124.1,150,150.1,150.2,150.3,151,151.1,151.2,152,152.2,152.3,152.1,152.4,152.5,125,125.1,125.2,125.3,125.5,125.6,125.4,126,126.1,126.2,130,131,134,137,137.1,203,268,209,209.1,212,217,218,223,224,224.1,226,226.1,226.2,226.3,226.4,231,221,228,228.1,270,236.1,236.2,232.1,232.2,232.3,232.4,232.5,233,233.1,233.2,233.3,233.4,233.5,233.6,257.1,257.3,257.2,238,234,234.1,234.2,258,258.2,235,235.1,235.2,259,259.2,257,267,267.1,265,265.1,239,240,242,243,132,133,304,305,306,307,311,308,309,310,323,320,321,322,324],["Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Other","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation"],["Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Other","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Productivity","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Resilience","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation","Mitigation"],["Yield","Yield","Yield","Yield","Yield","Yield","Yield","Yield","Yield","Yield","Yield","Livestock Diet","Yield","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Economics","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Social","Social","Social","Social","Social","Social","Emissions","Emissions","Emissions","Emissions","Emissions","Carbon Stocks","Carbon Stocks","Carbon Stocks","Cookstove","Cookstove","Cookstove","Cookstove","Cookstove"],["Product Yield","Product Yield","Product Yield","Product Yield","Product Yield","Product Yield","Product Yield","Product Yield","Product Yield","Product Yield","Product Yield","Feed Intake","Non-Product Yield","Income","Income","Income","Costs","Costs","Costs","Costs","Costs","Costs","Costs","Costs","Costs","Costs","Costs","Costs","Costs","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Economic Performance","Biodiversity","Biodiversity","Pest &amp; Pathogen","Pest &amp; Pathogen","Pest &amp; Pathogen","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Soil Quality","Yield Stability","Animal Survival","Animal Survival","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Efficiency","Gender Equity","Gender Equity","Gender Equity","Gender Equity","Labour","Labour","Emissions","Emissions","Emissions","Emissions","Emissions","Carbon Stocks","Carbon Stocks","Carbon Stocks","Costs","Fuel Efficiency","Fuel Efficiency","Fuel Efficiency","Fuel Efficiency"],["Crop Yield","Biomass Yield","Extraction Yield","Land Equivalent Ratio","Area Time Equivalent Ratio","Weight Gain","Meat Yield","Milk Yield","Egg Yield","Other Animal Product Yield","Reproductive Yield","Feed Intake","Crop Residue Yield","Gross Return","Net Return","Gross Margin","Total Cost","Total Cost per Unit Product","Total Cost per Asset","Total Cost (Unconfirmed)","Fixed Cost","Fixed Cost per Unit Product","Fixed Cost per Asset","Variable Cost","Variable Cost per Unit Product","Variable Cost per Asset","Labour Cost","Labour Cost per Unit Product","Labour Cost per Asset","Benefit Cost Ratio (GRTC)","Benefit Cost Ratio (GRVC)","Benefit Cost Ratio (GMVC)","Benefit Cost Ratio (NRVC)","Benefit Cost Ratio (NRTC)","Benefit Cost Ratio (GMTC)","Benefit Cost Ratio (Unspecified)","Cost Benefit Ratio (TCGR)","Cost Benefit Ratio (VCGR)","Cost Benefit Ratio (TCNR)","Net Present Value","Payback Period","Return on Investment","Internal Rate of Return","Marginal Rate of Return","Biodiversity","Beneficial Organisms","Pest &amp; Pathogen (Losses)","Pest &amp; Pathogen (Product Weight)","Pest &amp; Pathogen (Numbers)","Erosion","Runoff","Soil Organic Matter","Soil Organic Carbon","Soil Organic Carbon (Change)","Soil Nitrogen","Soil Total Nitrogen","Soil Available Nitrogen","Soil NO3","Soil NH4","Soil Moisture","Infiltration Rate","Cation Exchange Capacity","Effective Cation Exchange Capacity","Yield Stability","Animal Survival","Animal Mortality","Water Use","Water Use Efficiency","Depreciated -Water Use (Rain &amp; Irrigation)","Depreciated - Water Use (Irrigation)","Depreciated - Water Use (Unspecified)","Nitrogen Use Efficiency (ARE Unspecificed)","Nitrogen Use Efficiency (ARE Product)","Nitrogen Use Efficiency (ARE AGB)","Nitrogen Use Efficiency (Isotopic Product)","Nitrogen Use Efficiency (Isotopic AGB)","Nitrogen Use Efficiency (PNB Product)","Nitrogen Use Efficiency (PNB AGB)","Nitrogen Agronomic Efficiency","Nitrogen Agronomic Efficiency (AGB)","Nitrogen Factor Productivity","Nitrogen (Apparent Efficiency Animals Feed)","Phosphorus Use Efficiency (ARE Unspecified)","Phosphorus Use Efficiency (ARE Product)","Phosphorus Use Efficiency (ARE AGB)","Phosphorus Agronomic Efficiency","Phosphorus Factor Productivity","Potassium Use Efficiency (ARE Unspecified)","Potassium Use Efficiency (ARE Product)","Potassium Use Efficiency (ARE AGB)","Potassium Agronomic Efficiency","Potassium Factor Productivity","Total Factor Productivity","Feed Conversion Ratio (Out In)","Feed Conversion Ratio (In Out)","Protein Conversion Ratio (Out In)","Protein Conversion Ratio (In Out)","Labour Female","Labour Male","Income Female","Income Male","Labour Person Hours","Return to Labour","CO2 Equivalent Emissions","Methane Emissions","Nitrous Oxide Emissions","Carbon Dioxide Emissions","Emissions Intensity","Soil Carbon Stocks","Aboveground Carbon Biomass","Belowground Carbon Biomass","Fuel Use","Fuel Savings","Cooking Time","Specific Fuel Use","Cookstove Emissions"],["Amount of crop plant product produced (e.g., grain or fruit yield) per unit area land.","Plant biomass yield. This can be used to describe pasture biomass yields or when total, above ground, or below ground biomass yields are given for crops that are usually split into product and non-product parts on harvest.","Extraction yield of oil from oil seeds or similar. For example 300kg oil extracted from 1000kg oil seeds = 0.3 or 30% oil yield per kg oil seeds.","The land equivalent ratio describes the relative land area required under sole cropping (monoculture) to produce the same yield as under intercropping (polyculture).","The Area Time Equivalent Ratio (ATER) is a measure of the productivity of an intercropping system. It is calculated by dividing the total yield of the intercrop by the yield of a sole crop grown for the same duration. The ATER is calculated as follows: ATER = (Total yield of intercrop) / (Yield of sole crop grown for the same duration). The ATER is particularly useful in intercropping systems where the crops have different growth durations. For example, if a farmer intercrops a fast-growing crop with a slow-growing crop, the faster-growing crop will produce a yield before the slower-growing crop. The ATER will take into account the different growth durations of the crops and will give a more accurate measure of the overall productivity of the intercropping system.","Change in animal weight relative to a baseline (usually weight at the start of an experiment) over a specified time period.","The total weight of the animal or meat parts of it.","Milk yields. Please specify absolute values and not change in yield relative to a base value.","Egg yields, such as number of eggs per hen(s) per day(s).","Animal products that are not meat, egg, milk or offsping, for example wool, hides and honey.","Number of offpsring produced. This also includes % calving rate or similar.","The amount of a diet consumed per unit time.","Crop residue yield is the amount of crop biomass left over once the crop products has been harvested. For example maize grain is a crop product, the stover and cobs leftover after harvesting the maize grain are crop residues.","Total income, revenue or returns without consideration of costs.","Net returns = income - total costs. Values for this outcome can be negative or positive.","Gross margin = revenue - variable costs. Values for this outcome can be negative or positive.","Total production costs.","Total production costs per unit of commodity produced. For example USD per kg maize produced or USD per kg of animal weight gained.","Total production costs per asset. For example USD per ha of farmland or USD per animal.","Total costs are stated in a publication, but there is insufficient methodological detail about the included costs to confirm this.","Cost that are constant whatever the amount of goods produced, for example land rental costs.","Fixed production costs per unit of commodity produced. For example USD per kg maize produced or USD per kg of animal weight gained.","Fixed production costs per asset. For example USD per ha of farmland or USD per animal.","Costs of inputs (labour, seeds, fertilizers, herbicides, tilling, etc.) that vary with the level of output. The total variable cost can include labour, but record the individual cost of labour using the \"Labour Cost\" subindicator.","Variable production costs per unit of commodity produced. For example USD per kg maize produced or USD per kg of animal weight gained.","Variable production costs per asset. For example USD per ha of farmland or USD per animal.","Labour costs only.","Labour costs per unit of commodity produced. For example USD per kg maize produced or USD per kg of animal weight gained.","Labour costs per asset. For example USD per ha of farmland or USD per animal.","The ratio of gross return to total costs (gross returns/total costs).","The ratio of gross returns to variable costs (gross returns/variable costs).","The ratio of gross margin to variable costs (gross margin/variable costs).","The ratio of net returns to variable costs (net returns/variable costs).","The ratio of net returns to variable costs (net returns/total costs).","The ratio of gross margin to variable costs (gross margin/total costs).","The ratio of benefits to costs when the exact formulation is not specified.","The ratio of total costs to gross returns (total costs/gross returns).","The ratio of variable costs to gross returns (variablecosts/gross returns).","The ratio of variable costs to net returns (variable costs/net returns).","Net Present Value = the value in the present of a sum of money, in contrast to some future value it will have when it has been invested at compound interest.","The period of time required to recoup the funds expended in investment.","Return on investment is the gain or loss relative to the amount invested.","Internal Rate of Return is the interest rate at which the net present value of all cash flows equal zero.","Marginal Rate of Return is the amount of revenue per additional item, divided by marginal costs.","The species richness or diversity (such as the Shannon or Simpsons index) of a community of organisms within the experimental field. Whether the group of organsims is beneficial, neutral or detrimental to production should be unclear or mixed. One typically reported measure of biodiversity is microbial biomass.","Species that provide benefits to crop production (i.e., species provide postive regulating ecosystem services). These can include pollinators (e.g., bees), arbuscular mycorrhizal fungi (AMF) colonisation of crop roots, earthworms or microrganisms involved in nutrient cycling or decomposition. Measures can include their abundance, taxonomic or functional diversity (include details in the Units column).","Amount of stored crop lost or degraded due to pest/disease.","Amount of stored crop left after being stored for a period of time.","The number or amount of pest or pathogen present in a stored product.\r\n","Quantity or extent of soil movement due to water or wind.","Quantity of water moving off site","Concentration or stock of organic matter in soil (SOM).","Concentration or stock of organic carbon in soil (SOC).","Change in soil organic carbon (SOC) over time compared to a baseline condition at the beginning of the experiment.","Stock or concentration of soil nitrogen exact nature of the nitrogen is not clear (i.e. it is unknown if it is total, available, nitrate or ammonium) or is some other measure of nitrogen.","Stock or concentration of nitrogen in the soil reported as total nitrogen (TN).","Stock or concentration of nitrogen in the soil reported as available nitrogen (NO3 + NH4).","Stock or concentration of nitrogen in the soil reported as nitrate (NO3).","Stock or concentration of nitrogen in the soil reported as ammonium (NH4).","Amount of water in the soil.","The rate of water movement into the soil.","Soil cation exchange capacity.","Soil effective cation exchange capacity.","The variability in yields between seasons or between years.","Animal offspring that survive to production.","Animals that do not survive.","Water used per area to produce crops.","Product produced or economic yield per unit water (includes rainfall).","Total water used to produce crops from irrigation &amp; rainfall.","Water used to produce crops from irrigation only.","Water used to produce crops, irrigation is present but it is unclear if water use includes rainfall or not.","Apparent N recovery efficiency. Use this code if it is unclear whether above-ground biomass or a sub-component (e.g. grain) was used in calculations. Formula for a zero N control = (N.trt - N.cont)/N input, otherwise Formula = (N.Out.trt - N.Out.cont)/(N.Input.trt - N.Input.Cont).","Apparent N recovery efficiency in crop product component (e.g. grain). Formula for a zero N control = (N.treatment - N.control)/N input, otherwise Formula = (N.Out.trt - N.Out.cont)/(N.In.trt - N.In.Cont). \r\n","Apparent N recovery efficiency in crop above ground biomass (the whole plant, grain + biomass). Formula for a zero N control = (N.treatment - N.control)/N input, otherwise Formula = (N.Out.trt - N.Out.cont)/(N.In.trt - N.In.Cont).","Nitrogen use efficiency of a crop product component (e.g., grain) measured using nitrogen-15 stable isotope methods. Formula =15N/N.input. The product component of the crop is used (e.g., grain).","Nitrogen use efficiency of aboveground biomass (the whole plant, grain + biomass) measured using nitrogen-15 stable isotope methods. Formula =15N/N.input.","Partial nitrogen balance of a crop product component (e.g., grain). Formula = N.product/N.input.","Partial nitrogen balance for crop aboveground biomass (the whole plant, grain + biomass). Formula = N.AGB/N.input.","The yield change in the crop product component (e.g. grain) of the treatment compared to the control, per unit of nitrogen input. Formula = (Yt -Yc)/N. Also called Agronomic Effectiveness.","The yield change in aboveground biomass (the whole plant, grain + biomass) of the treatment compared to the control, per unit of nitrogen input. Formula = (Yt -Yc)/N. Also called Agronomic Effectiveness.","Crop yield divided by amount of nitrogen applied (Yield/N).","Animal Products Only. Integration of N into production. Formula = N.retained/N.supplied.","Apparent P recovery efficiency. Use this code if it is unclear whether above-ground biomass or a sub-component (e.g. grain) was used in calculations. Formula for a zero P control = (P.trt - P.cont)/P input, otherwise Formula = (P.Out.trt - P.Out.cont)/(P.Input.trt - P.Input.Cont).","Apparent P recovery efficiency in crop product component (e.g. grain). Formula = (P.treatment - P.control)/P input. Formula for a zero P control = (P.trt - P.cont)/P input, otherwise Formula = (P.Out.trt - P.Out.cont)/(P.Input.trt - P.Input.Cont).","Apparent P recovery efficiency in crop above ground biomass (the whole plant, grain + biomass). Formula for a zero P control = (P.trt - P.cont)/P input, otherwise Formula = (P.Out.trt - P.Out.cont)/(P.Input.trt - P.Input.Cont).","The yield change in the crop product component (e.g. grain) of the treatment compared to the control, per unit of phosphorous input. Formula = (Yt -Yc)/P. Also called Agronomic Effectiveness.","Crop yield divided by amount of phosphorous applied (Yield/P input).","Apparent K recovery efficiency. Use this code if it is unclear whether above-ground biomass or a sub-component (e.g. grain) was used in calculations. Formula for a zero K control = (K.trt - K.cont)/K input, otherwise Formula = (K.Out.trt - K.Out.cont)/(K.Input.trt - K.Input.Cont).","Apparent K recovery efficiency in crop product component (e.g. grain). Formula for a zero K control = (K.trt - K.cont)/K input, otherwise Formula = (K.Out.trt - K.Out.cont)/(K.Input.trt - K.Input.Cont). \r\n","Apparent K recovery efficiency in crop above ground biomass (the whole plant, grain + biomass). Formula for a zero K control = (K.trt - K.cont)/K input, otherwise Formula = (K.Out.trt - K.Out.cont)/(K.Input.trt - K.Input.Cont).","The yield change in the crop product component (e.g. grain) of the treatment compared to the control, per unit of potassium input. Formula = (Yt -Yc)/K. Also called Agronomic Effectiveness.","Crop yield divided by amount of potassium applied (Yield/K input).","Weight of output (kg) per quantity of input (kg). Can be any input (other than N, P or K individually) and any output.","Ratio of Weight Gained to Feed Given.","Ratio of Feed Given to Weight Gained.","Ratio of Weight Gained to Protein Given, this is a ratio whose value should be less than 1 (although some aquatic experiment may yield slightly &gt;1 if there are other food resources available in the water, like algae).","Ratio of Protein Given to Weight Gained, this is a ratio whose value should be greater than 1 (although some aquatic experiment may yield slightly &lt;1 if there are other food resources available in the water, like algae).","Female labour time per task, season, or unit land.","Male labour time per task, season, or unit land.","Female income from practice(s).","Male income from practice(s).","Labour time per task, season, or unit land (gender is not specified).","Return to Labour or Labour Productivity. This may be expressed as income/day labour, income/area or production/day labour.","Emissions over time expressed as CO2 equivalent (e.g. CO2e, CO2eq or CO2-e), often expressed as emissions per area.","Flux (emissions or consumption) of methane (CH4) over time.","Flux (emissions or consumption) of nitrous oxides (NOx, NO or NO2) over time.","Flux (emissions or consumption)of carbon dioxide (CO2) over time.","Emissions per unit of output (e.g. kg CO2 per kg grain). Cumulative emissions relative to production.","Quantity in carbon pool or stock as total carbon and reported on soil profiles of at least 30cm or more.","Stock or amount of carbon in above ground biomass.","Stock or amount of carbon in below ground biomass.","Amount of fuel used in a cookstove.","Amount of fuel saved by using a cookstove.","Time taken to cook a particular food.","Ratio of fuel consumed to food cooked (e.g. kg fuel used/kg food cooked).","Emissions of gases (e.g CO) or particulate matter (e.g PM2.5) other than those in the Emissions outcome subpillar (not CO2, Methane, NOx, CO2e)."]],"container":"<table class=\"nowrap\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Code<\/th>\n      <th>Pillar<\/th>\n      <th>Pillar.Code<\/th>\n      <th>Subpillar<\/th>\n      <th>Indicator<\/th>\n      <th>Subindicator<\/th>\n      <th>Definition<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollY":"400px","scrollX":true,"pageLength":20,"fixedHeader":false,"columnDefs":[{"width":"100px","targets":6},{"className":"dt-right","targets":1},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Code","targets":1},{"name":"Pillar","targets":2},{"name":"Pillar.Code","targets":3},{"name":"Subpillar","targets":4},{"name":"Indicator","targets":5},{"name":"Subindicator","targets":6},{"name":"Definition","targets":7}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>products<span class="ot">&lt;-</span> era_master_codes<span class="sc">$</span>prod[,.(EU,Product.Type,Product.Subtype,Product,Product.Simple,Component,Latin.Name)]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  products,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">scrollY =</span> <span class="st">"400px"</span>,<span class="at">scrollX =</span> <span class="cn">TRUE</span>,<span class="at">pageLength =</span> <span class="dv">50</span>,<span class="at">fixedHeader =</span> <span class="cn">FALSE</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a> <span class="at">caption =</span> htmltools<span class="sc">::</span>tags<span class="sc">$</span><span class="fu">caption</span>(</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="st">"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;"</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"products (a.k.a. experimental units)"</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-3a58e590d176f3a55d0d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3a58e590d176f3a55d0d">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-weight: bold; font-size: 1.1em;\">products (a.k.a. experimental units)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414"],["a5","a8","a8.1","a6","a6.1","a13","a13.1","a20","a20.1","a20.2","n8","l4.1","l4.2","l18","l2","l2.1","l2.2","l2.3","l4","l14","h16","l17","l15","l6","I23","l22","l21","l4.2","l4.3","l5","l13","l20","l20.1","l20.2","l9","l9.1","l9.2","l9.3","l9.4","l9.5","l9.6","l11","l12","l23","l7","c2","c3","c20","c4","c18","c16","c6","c7","c9","c8","c17","c10","c11","c12","c13","c15","c19","c14","s33","s38","s40","s26","s18","s25","s39","s37","s36","s24","s30","s28","s31","s6","s22","s21","s20","s5","s12","s8","s10","s14","s9","s32","s19","s15","s34","s4","s27","s17","s3","s11","s16","s7","s13","s29","s35","s41","s23","a10","a11","m2","m5","m1","m6","a15","a14","NA","d18","d2","l18.1","l18.2","d4","d5","d5.2","d22","d20","d6","d19","d7","d15","d16","d9","d21","d10","r1.1","d11","d13","d14","l16","d8","o44","o31","o31.1","o48","o19","o9","o7","o8","o10","o58","o34","o42","o28","o41","o11","o12","o61","o33","s1","h58","o45","o67","o51","o30","o69","h26","o35","o36","o23","o2","o21","o3","o29","o17","o20","o14","o59","o4","o68","o6","o55","o66","o43","o62","o63","o65","o18","o26","o49","o16","o24","o54","o38","o37","o53","o32","o64","o39","o13","o25","o50","o40","o27","o46","o47","o1","o60","o52","o22","o15","o57","e1","e2","e3","e4","b2","e5","b3","l3","b4","b5","e40","e6","b6","e11","e44","e10","e41","e35","e12","e13","e14","e42","e31","g6.1","e17","e18","e29","e19","e20","e21","e22","e24","e32","e45","e25","e33","b8","e43","e26","e28","a21","h24","h32","h5","h21","h25","h7","h14","h15","h8","h8.1","h6","h30","h9","h9.1","h19","h28","h27","h22","h10","h17","h11","h3","h4","h12","h18","h13","h29","h23","h31","a33","f2","f3","f4","f5","f6","f7","f9","f19","f13","f8","f18","k35.1","g8","g8.1","g2","d5.1","g14","h9.2","g11.1","g11.2","g3","f10","g12","g6","g6.2","g4","g7","f15","f16","g9","g9.1","g9.2","g13","g10","f17","a16","a7","a7.1","a9","a12","a34","a36","a36.1","a4","a38","a22","a35","a18","a26","a37","a23","a24","a25","j2","j3","j5","j6","j12","j11","j14.2","j14.1","j14","k26.1","k26.2","i6","j9","j7","j8","j8.1","j13","i13","j10","i3","e23","e30","i14","i7","i9","i10","i16","i17","i15","i11","k42","k28","k4","k5","i8","k22","k6","k35","k18","i2","i3.1","k7","k17","j4","h14.1","k31","h8.2","k8","k16","k27","k36","k34","k26","k33","k33.1","i5","k41","k25","k9","k10","k11","k12","k12.1","k12.2","k12.3","k37","k14","k14.1","k20","k29","k30","k15","k13","k38","k24","i9.1","k23","e27","e27.1","e27.2","e27.3","k40","k21","k32","k19"],["Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Non-product","Animal","Animal","Non-product","Non-product","Non-product","Non-product","Animal","Animal","Non-product","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Animal","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Animal","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Animal","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant","Plant"],["Bovine","Bovine","Bovine","Camelid","Camelid","Caprine","Caprine","Caprine","Caprine","Caprine","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cash Crops","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cereals","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Cover Crop","Eggs (Stored)","Eggs (Stored)","Energy Production","Energy Production","Energy Production","Energy Production","Equine","Equine","Fallow","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fibre &amp; Wood","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fodders","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Fruits","Gastropod","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Legumes","Milk (Stored)","Nuts","Nuts","Nuts","Nuts","Nuts","Nuts","Nuts","Nuts","Nuts","Nuts","Nuts","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Oilseeds and Oils","Porcine","Poultry","Poultry","Poultry","Poultry","Poultry","Poultry","Poultry","Poultry","Poultry","Poultry","Rodent","Rodent","Seafood","Seafood","Seafood","Seafood","Seafood","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Spices","Starchy Staples","Starchy Staples","Starchy Staples","Starchy Staples","Starchy Staples","Starchy Staples","Starchy Staples","Starchy Staples","Starchy Staples","Starchy Staples","Starchy Staples","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables","Vegetables"],["Buffalo","Cattle (Meat)","Cattle (Milk)","Camel (Meat)","Camel (Milk)","Goat (Meat)","Goat (Milk)","Sheep (Meat)","Sheep (Milk)","Sheep (Wool)","Aloe","Coffee Arabica","Coffee Arabica (Pods)","Chamomile","Cocoa or Cacao","Cocoa or Cacao (Beans)","Cocoa or Cacao (Butter)","Cocoa or Cacao (Pods)","Coffee","Cupuaçu","Guar Gum or Cluster Bean","Gum Arabic","Hibiscus or Roselle (Flowers)","Hops","Khat","Moringa","Pelargonium sidoides","Coffee Robusta","Coffee Robusta (Pods)","Rubber","Stevia","Sugar Beet","Sugar Beet (Root)","Sugar Beet (Sugar)","Sugar Cane","Sugar Cane (Cane)","Sugar Cane (Sugar)","Sugar Cane (Cane)","Sugar Cane (Sugar)","Sweetcane (Cane)","Sweetcane (Sugar)","Tea","Tobacco","Tree cassava","Yerba Mate","Amaranth (Grain)","Barley","Black oats","Buckwheat","Durum Wheat","Finger Millet","Fonio","Maize","Oats","Millet (Other)","Pearl Millet","Quinoa","Rice","Rye","Sorghum","Teff","Triticale","Wheat","Arachis pintoi","Jack Bean","Calopogonium mucunoides","Centrosema pubescens","Cleretum bellidiforme","Clitoria ternatea","Common Vetch","Crotalaria juncea","Crotalaria ochroleuca","Crotalaria retusa","Crotalaria spectabilis","Desmodium intortum","Desmodium uncinatum","Dimorphotheca pluvialis","Drosanthemum floribundum","Drosanthemum speciosum","Drosanthemum striatum","Felicia heterophylla","Gazania krebsiana","Geranium incanum","Helichrysum petiolare","Heliophila coronopifolia","Hermannia pinnata","Hyptis spicigera","Lampranthus multiradiatus","Lessertia frutescens","Medicago scutellata","Medicago truncatula","Mimosa invisa","Monopsis lutea","Ornithopus sativus","Pelargonium capitatum","Roella ciliata","Senecio elegans","Steirodiscus tagetes","Tithonia diversifolia","Trifolium subterraneum","Vicia villosa","Unspecified Cover Crop","Stored Eggs (Chicken)","Stored Eggs (Other)","Biodigester","Biogas","Cookstove","Other Fuel","Donkey &amp; Mule","Horse","Natural Fallow","Acacia saligua (Wood)","Agave","Bamboo (Wood)","Bamboo (Fibre)","Coir (Coconut Fiber)","Cotton","Cotton (Lint or Fibre)","Croton sonderianus","Faidherbia albida (Wood)","Flax","Glyricidia sepium (Wood)","Hemp","Roselle or Hibiscus (Fibre)","Jute Mallow or Nalta Jute","Kapok","Leucaena leucocephala (Wood)","Manila or Abaca","Patula Pine","Ramie","Silkworm Cocoon","Sisal","Vetiver","White Jute","Aeschynomene afraspera","Alfalfa","Alfalfa","Andropogon gayanus","Blue Lupin","Brachiaria brizantha","Brachiaria decumbens","Brachiaria humidicola","Brachiaria hybrid","Calopogonium mucunoides","Cenchrus ciliaris","Centrosema brasilianum","Centrosema pascuorum","Chamaecrista rotundifolia","Chloris gayana","Cocksfoot","Common Vetch","Congo Grass","Cover Crop or Green Manure","Crotalaria breviflora","Crotalaria ochroleuca","Crotalaria paulina","Crotalaria sp.","Desho Grass","Desmodium intortum","Egyptian Clover","Enteropogon monostachyos","Eragrostis superba","Fodder (Natural Vegetation)","Fodder (Legumes)","Fodder Radish","Fodder (Trees)","Guinea Grass","Hairy Vetch","Jointvetche","Kikuyu Grass","Miscanthidium violoceum","Napier Grass","Opuntia stricta","Other Fodder","Palisade Grass","Panicum antidotale","Pueraria phaseoloides","Purple Vetch","Red Clover","Rhodes grass","Ryegrass sp","Sickle Grass","Silverleaf","Smutsfinger Grass","Stipagrostis uniplumis","Stylosanthes capitata","Stylosanthes guianensis","Stylosanthes hamata","Stylosanthes macrocephala","Subterranean Clover","Sudan grass","Sunn Hemp","Tall Fescue","Tassel Three-awn","Tephrosia candida","Themeda triandra","Tick Clover sp","Trifolium quartinianum","Trifolium steudneri","Unspecified Fodder Grass","Urochloa decumbens","Urochloa eminii","Vetiver Grass","Westerwold Ryegrass","Winter Vetch","Apple","Apricot","Avocado","Banana (Ripe Sweet)","Blueberry","Cashew Apple","Cherry","Coconut","Cranberry","Currant","Date","Fig","Gooseberry","Grape (Wine)","Grape (Table)","Grapefruit","Guava","Jujube","Kiwifruit","Lemon","Mango","Mangosteen","Melon","Olive (Fruits)","Orange","Papaya or Pawpaw","Passionfruit","Peach &amp; Nectarine","Pear","Persimmon","Pineapple","Plum","Pomegranate","Pomelo","Quince","Sapodilla or Nispero","Strawberry","Tamarind","Tangerine &amp; Mandarine","Watermelon","Snail","African Yam Bean","Ayocote Bean","Bambara Nut","Black Gram","Lima, Butter, Sieva or Madagascar Bean","Chickpea","Common Bean","Common Bean (Pod)","Cowpea","Cowpea (Pod)","Broad or Fava Bean","Fenugreek","Groundnut or Peanut","Groundnut or Peanut (Pod)","Horsegram","Grass Pea, Indian Pea, Blue Sweet Pea, Chickling Pea, White Pea, White Vetch","Jack Bean","Lablab","Lentil","Long Bean","Lupin","Mung Bean or Green Gram","Peas","Pigeon Pea","Rice Bean","Soybean","Unspecified Legume","Velvet Bean, Mucuna","White lupin","Stored Milk","Almond","Areca or Betel Nut","Brazil Nuts","Cashew Nut","Chestnut","Hazelnut","Kola Nut","Macadamia","Pistachio Nut","Shea Nut","Walnut","Calabash or Bottle Gourd (Seed)","Canola or Rape (Seed)","Canola or Rape (Oil)","Castor Seed","Cotton (Seed)","Ethiopian Mustard","Groundnut or Peanut (Oil)","Jatropha (Seed)","Jatropha (Oil)","Jojoba","Linseed","Niger Seed","Olive","Olive (Oil)","Palm Oil","Palm Kernel","Safflower Seed","Sesame Seed","Sunflower","Sunflower (Seed)","Sunflower (Oil)","Sunn Hemp (Seed)","Tallowtree Seed","Tung Seed","Pig","Chicken (Meat)","Chicken (Eggs)","Duck","Geese","Domestic Guineafowl","Ostrich","Ostrich","Bird (Other)","Japanese Quail","Turkey","Guinea Pig","Rabbit","Cephalapod","Collector Urchin","Crustacean","Fish","Shellfish","Anise","Cardamom","Cinnamon","Cloves","Coriander (Seed)","Cumin","Dill (Oil)","Dill (Leaf)","Dill (Seed)","Fennel (Oil)","Fennel (Seed)","Ginger","Mint","Nutmeg &amp; Mace","Pepper (Seed)","Pepper (Fruit)","Star Anise or Badium","Turmeric","Vanilla","Cassava or Yuca","Plantains and Cooking Banana","Enset","Yautia or New Cocoyam","Potato","Sweet Potato","Taro or Old Cocoyam or Arrowroot","Water Yam","White Yam","Yacon","Yam","African Nightshade","Amaranth (Leaf)","Artichoke","Asparagus","Beetroot","Bitter Melon","Cabbage","Calabash or Bottle Gourd","Capsicum or Bell Pepper","Carrot","Cassava or Yuca (Leaf)","Cauliflower &amp; Broccoli","Celery","Chili &amp; Hot Peppers","Common Bean (Leaf)","Common Purslane","Cowpea (Leaf)","Cucumber","Eggplant","Endive","Eru","Ethiopian Eggplant","Fennel","Fluted Pumpkin","Fluted Pumpkin","Garlic","Huckleberry","Kale","Leeks","Lettuce","Okra","Onion and Shallot (Total Yield)","Onion and Shallot (Total Yield)","Onion and Shallot (Marketable Yield)","Onion and Shallot (Non-marketable Yield)","Parsnip","Pumpkin","Pumpkin (Leaf)","Radish &amp; Daikon","Rape or Canola (Leaf)","Arugula or Rocket","Spinach","Scallions, Green Onions or Spring Onions","Squash (C.Moschata)","Sunchoke","Sweet Potato (Leaf)","Swiss Chard","Tomato","Tomato (Total Yield)","Tomato (Marketable Yield)","Tomato (Non-marketable Yield)","Turkey berry","Turnip","Waterleaf","Zucchini &amp; Summer Squash"],["Buffalo","Cattle","Cattle","Camel","Camel","Goat","Goat","Sheep","Sheep","Sheep","Aloe","Arabica","Arabica","Chamomile","Cocoa","Cocoa","Cocoa","Cocoa","Coffee","Cupuaçu","Guar Gum","Gum Arabic","Hibiscus","Hops","Khat","Moringa","Pelargonium sidoides","Robusta","Robusta","Rubber","Stevia","Sugar Beet","Sugar Beet","Sugar Beet","Sugar Cane","Sugar Cane","Sugar Cane","Sugar Cane","Sugar Cane","Sweetcane","Sweetcane","Tea","Tobacco","Tree cassava","Yerba Mate","Amaranth","Barley","Black oats","Buckwheat","Durum Wheat","Finger Millet","Fonio","Maize","Oats","Other Millet","Pearl Millet","Quinoa","Rice","Rye","Sorghum","Teff","Triticale","Wheat","Arachis pintoi","Jack Bean","Calopogonium mucunoides","Centrosema pubescens","Cleretum bellidiforme","Clitoria ternatea","Common Vetch","Crotalaria juncea","Crotalaria ochroleuca","Crotalaria retusa","Crotalaria spectabilis","Desmodium intortum","Desmodium uncinatum","Dimorphotheca pluvialis","Drosanthemum floribundum","Drosanthemum speciosum","Drosanthemum striatum","Felicia heterophylla","Gazania krebsiana","Geranium incanum","Helichrysum petiolare","Heliophyla coronopifolia","Hermannia pinnata","Hyptis spicigera","Lampranthus multiradiatus","Lessertia frutescens","Medicago scutellata","Medicago truncatula","Mimosa invisa","Monopsis lutea","Ornithopus sativus","Pelargonium capitatum","Roella ciliata","Senecio elegans","Steirodiscus tagetes","Tithonia diversifolia","Trifolium subterraneum","Vicia villosa","Unspecified Cover Crop","Eggs","Eggs","Biodigester","Biogas","Cookstove","Other Fuel","Donkey","Horse","Natural Fallow","Acacia saligna","Agave","Bamboo","Bamboo","Coir","Cotton","Cotton","Croton sonderianus","Faidherbia albida","Flax","Glyricidia sepium","Hemp","Hibiscus","Jute Mallow","Kapok","Leucaena leucocephala","Manila","Patula Pine","Ramie","Silk Cocoon","Sisal","Vetiver","White Jute","Aeschynomene afraspera","Alfalfa","Alfalfa","Andropogon gayanus","Blue Lupin","Brachiaria brizantha","Brachiaria decumbens","Brachiaria humidicola","Brachiaria hybrid","Calopogonium mucunoides","Cenchrus ciliaris","Centrosema brasilianum","Centrosema pascuorum","Chamaecrista rotundifolia","Chloris gayana","Cocksfoot","Common Vetch","Congo Grass","Cover Crop or Green Manure","Crotalaria breviflora","Crotalaria ochroleuca","Crotalaria paulina","Crotalaria sp.","Desho Grass","Desmodium intortum","Egyptian Clover","Enteropogon monostachyos","Eragrostis superba","Fodder (Natural Vegetation)","Fodder Legume","Fodder Radish","Fodder Tree","Guinea Grass","Hairy Vetch","Jointvetche","Kikuyu Grass","Miscanthidium violoceum","Napier Grass","Opuntia stricta","Other Fodder","Palisade Grass","Panicum antidotale","Pueraria phaseoloides","Purple Vetch","Red Clover","Rhodes grass","Ryegrass sp","Sickle Grass","Silverleaf","Smutsfinger Grass","Stipagrostis uniplumis","Stylosanthes capitata","Stylosanthes guianensis","Stylosanthes hamata","Stylosanthes macrocephala","Subterranean Clover","Sudan grass","Sunn Hemp","Tall Fescue","Tassel Three-awn","Tephrosia candida","Themeda triandra","Tick Clover sp","Trifolium quartinianum","Trifolium steudneri","Unspecified Fodder Grass","Urochloa decumbens","Urochloa eminii","Vetiver Grass","Westerwold Ryegrass","Winter Vetch","Apple","Apricot","Avocado","Banana Sweet","Blueberry","Cashew Apple","Cherry","Coconut","Cranberry","Currant","Date","Fig","Gooseberry","Grape","Grape","Grapefruit","Guava","Jujube","Kiwifruit","Lemon","Mango","Mangosteen","Melon","Olive","Orange","Papaya","Passionfruit","Peach &amp; Nectarine","Pear","Persimmon","Pineapple","Plum","Pomegranate","Pomelo","Quince","Sapodilla","Strawberry","Tamarind","Tangerine &amp; Mandarine","Watermelon","Snail","African Yam Bean","Ayocote bean","Bambara Nut","Black Gram","Butter Bean","Chickpea","Common Bean","Common Bean","Cowpea","Cowpea","Fava Bean","Fenugreek","Groundnut","Groundnut","Horsegram","Indian Pea","Jack Bean","Lablab","Lentil","Long Bean","Lupin","Mung Bean","Peas","Pigeon Pea","Rice Bean","Soybean","Unspecified Legume","Velvet Bean","White lupin","Milk","Almond","Areca Nut","Brazil Nuts","Cashew Nut","Chestnut","Hazelnut","Kola Nut","Macadamia","Pistachio Nut","Shea Nut","Walnut","Calabash","Canola","Canola","Castor","Cotton","Ethiopian Mustard","Groundnut","Jatropha","Jatropha","Jojoba","Linseed","Niger","Olive","Olive","Palm Oil","Palm Oil","Safflower","Sesame","Sunflower","Sunflower","Sunflower","Sunn Hemp","Tallowtree","Tung","Pigs","Chicken","Chicken","Duck","Geese","Guineafowl","Ostrich","Ostrich","Other Bird","Quail","Turkey","Guinea Pig","Rabbit","Cephalapod","Collector Urchin","Crustacean","Fish","Shellfish","Anise","Cardamom","Cinnamon","Cloves","Coriander","Cumin","Dill","Dill","Dill","Fennel","Fennel","Ginger","Mint","Nutmeg &amp; Mace","Pepper","Pepper","Star Anise","Turmeric","Vanilla","Cassava","Cooking Banana","Enset","New Cocoyam","Potato","Sweet Potato","Taro","Water Yam","White Yam","Yacon","Yam","African Nightshade","Amaranth","Artichokes","Asparagus","Beetroot","Bitter Melon","Cabbage","Calabash","Capsicum","Carrot","Cassava","Cauliflower &amp; Broccoli","Celery","Chili","Common Bean","Common Purslane","Cowpea","Cucumber","Eggplant","Endive","Eru","Ethiopian Eggplant","Fennel","Fluted Pumpkin","Fluted Pumpkin","Garlic","Huckleberry","Kale","Leeks","Lettuce","Okra","Onion","Onion","Onion","Onion","Parsnip","Pumpkin","Pumpkin","Radish","Rape","Rocket","Spinach","Spring Onion","Squash (C.Moschata)","Sunchoke","Sweet Potato","Swiss Chard","Tomato","Tomato","Tomato","Tomato","Turkey berry","Turnip","Waterleaf","Zucchini"],["Meat","Meat","Milk","Meat","Milk","Meat","Milk","Meat","Milk","Wool","Leaf","Seed","Pods","Flower","Unspecified","Seed","Oil","Pods","Seed","Fruit","Seeds","Sap","Flower","Flower","Leaf","Leaf","Tuber/Root/Bulb","Seed","Pods","Sap","Leaf","Unspecified","Tuber/Root/Bulb","Sugar","Unspecified","Stem/Stalks","Sugar","Stem/Stalks","Sugar","Stem/Stalks","Sugar","Leaf","Leaf","Tuber/Root/Bulb","Leaf","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","NA","NA","NA","NA","NA","NA","Meat","Meat","Biomass","Wood","Fibre","Wood","Fibre","Fibre","Unspecified","Fibre","Wood","Wood","Fibre","Wood","Fibre","Fibre","Fibre","Fibre","Wood","Fibre","Wood","Fibre","Fibre","Fibre","Fibre","Fibre","Biomass","Biomass","Seed","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Biomass","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Fruit","Meat","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Pods","Seed","Pods","Seed","Seed","Seed","Pods","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Milk","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Seed","Oil","Seed","Seed","Seed","Oil","Seed","Oil","Seed","Seed","Seed","Unspecified","Oil","Oil","Seed","Seed","Seed","Unspecified","Seed","Oil","Seed","Seed","Seed","Meat","Meat","Eggs","Meat","Meat","Meat","Meat","Eggs","Meat","Meat","Meat","Meat","Meat","Meat","Meat","Meat","Meat","Meat","Fruit","Seed","Bark","Flower","Seed","Seed","Oil","Leaf","Seed","Oil","Seed","Tuber/Root/Bulb","Leaf","Seed&amp;Fruit","Seed","Fruit","Fruit","Tuber/Root/Bulb","Fruit","Tuber/Root/Bulb","Fruit","Stem/Stalks","Tuber/Root/Bulb","Tuber/Root/Bulb","Tuber/Root/Bulb","Tuber/Root/Bulb","Tuber/Root/Bulb","Tuber/Root/Bulb","Tuber/Root/Bulb","Tuber/Root/Bulb","Leaf","Leaf","Flower","Stem/Stalks","Tuber/Root/Bulb","Fruit","Leaf","Fruit","Fruit","Tuber/Root/Bulb","Leaf","Flower","Stem/Stalks","Fruit","Leaf","Leaf","Leaf","Fruit","Fruit","Leaf","Leaf","Fruit","Tuber/Root/Bulb","Fruit","Leaf","Tuber/Root/Bulb","Leaf","Leaf","Leaf","Leaf","Pods","Unspecified","Tuber/Root/Bulb","Tuber/Root/Bulb","Tuber/Root/Bulb","Tuber/Root/Bulb","Fruit","Leaf","Tuber/Root/Bulb","Leaf","Leaf","Leaf","Leaf","Fruit","Tuber/Root/Bulb","Leaf","Leaf","Unspecified","Fruit","Fruit","Fruit","Fruit","Tuber/Root/Bulb","Leaf","Fruit"],["Bubalus bubalis",null,null,"Camelus dromedarius","Camelus dromedarius","Capra aegagrus hircus","Capra aegagrus hircus","Ovis aries","Ovis aries","Ovis aries","Aloe vera;Aloe sp","Coffea arabica","Coffea arabica","Matricaria chamomilla","Theobroma cacao","Theobroma cacao","Theobroma cacao","Theobroma cacao","Coffea sp","Theobroma grandiflorum","Cyamopsis tetragonoloba","Acacia senegal (for example)","Hibiscus sabdariffa","Humulus lupulus","Catha edulis","Moringa oleifera","Pelargonium sidoides","Coffea canephora","Coffea canephora","Hevea brasiliensis","Stevia rebaudiana","Beta vulgaris vulgaris","Beta vulgaris vulgaris","Beta vulgaris vulgaris","Saccharum sp","Saccharum sp","Saccharum sp","Saccharum officinarum","Saccharum officinarum","Saccharum arundinaceum","Saccharum arundinaceum","Camellia sinensis","Nicotiana sp","Manihot glaziovii","Ilex paraguariensis","Amaranthus sp","Hordeum vulgare","Avena strigosa","Fagopyrum esculentum","Triticum durum","Eleusine coracana","Digitaria sp","Zea mays","Avena sativa","Echinochloa sp","Pennisetum glaucum","Chenopodium quinoa","Oryza sativa","Secale cereale","Sorghum bicolor","Eragrostis tef","× Triticosecale","Triticum aestivum","Arachis pintoi","Canavalia ensiformis","Calopogonium mucunoides","Centrosema pubescens","Cleretum bellidiforme","Clitoria ternatea","Vicia sativa","Crotalaria juncea","Crotalaria ochroleuca","Crotalaria retusa","Crotalaria spectabilis","Desmodium intortum","Desmodium uncinatum","Dimorphotheca pluvialis","Drosanthemum floribundum","Drosanthemum speciosum","Drosanthemum striatum","Felicia heterophylla","Gazania krebsiana","Geranium incanum","Helichrysum petiolare","Heliophyla coronopifolia","Hermannia pinnata","Hyptis spicigera","Lampranthus multiradiatus","Lessertia frutescens","Medicago scutellata","Medicago truncatula","Mimosa invisa","Monopsis lutea","Ornithopus sativus","Pelargonium capitatum","Roella ciliata","Senecio elegans","Steirodiscus tagetes","Tithonia diversifolia","Trifolium subterraneum","Vicia villosa","NA",null,null,"NA","NA","NA","NA",null,"Equus ferus caballus","NA","Acacia saligna","Agave sp","Bambusa sp","Bambusa sp","Cocos nucifera","Gossypium sp","Gossypium sp","Croton sonderianus","Faidherbia albida","Linum usitatissimum","Glyricidia sepium","Cannabis sativa ssp indica","Hibiscus sp","Corchorus olitorius","Ceiba sp","Leucaena leucocephala","Musa textilis","Pinus patula","Boehmeria nivea",null,"Agave sisalana","Chrysopogon sp","Corchorus capsularis","Aeschynomene afraspera","Medicago sativa","Medicago sativa","Andropogon gayanus","Lupinus angustifolius","Brachiaria brizantha","Brachiaria decumbens","Brachiaria humidicola","Brachiaria hybrid","Calopogonium mucunoides","Cenchrus ciliaris","Centrosema brasilianum","Centrosema pascuorum","Chamaecrista rotundifolia","Chloris gayana","Dactylis glomerata","Vicia sativa","Brachiaria ruziziensis","NA","Crotalaria breviflora","Crotalaria ochroleuca","Crotalaria paulina","Crotalaria sp.","Pennisetum pedicellatum","Desmodium intortum","Trifolium alexandrinum","Enteropogon monostachyos","Eragrostis superba","NA","NA","Raphanus sativus","NA","Megathyrsus maximus","Vicia villosa","Aeschynomene histrix","Pennisetum clandestinum","Miscanthidium violoceum","Pennisetum purpureum","Opuntia stricta","NA","Zoysia japonica","Panicum antidotale","Pueraria phaseoloides","Vicia atropurpurea","Trifolium pratense","Chloris gayana","Lolium sp","Pogonarthria squarrosa","Desmodium uncinatum","Digitaria eriantha","Stipagrostis uniplumis","Stylosanthes capitata","Stylosanthes guianensis","Stylosanthes hamata","Stylosanthes macrocephala","Trifolium subterraneum","Sorghum sudanense","Crotalaria juncea","Festuca arundinacea","Aristida congesta","Tephrosia candida","Themeda triandra","Desmodium sp","Trifolium quartinianum","Trifolium steudneri","NA","Urochloa decumbens","Urochloa eminii","Chrysopogon zizanioides","Lolium westerwoldicum","Vicia dasycarpa","Malus domestica","Prunus armeniaca","Persea americana","Musa sp","Vaccinium corymbosum","Anacardium occidentale","Prunus avium;Prunus cerasus","Cocos nucifera","Vaccinium macrocarpum","Ribes sp","Phoenix dactylifera","Ficus sp","Ribes grossularia","Vitis sp","Vitis sp","Citrus × paradisi","Psidium guajava","Ziziphus jujuba","Actinidia sp","Citrus limon","Mangifera indica","Garcinia mangostana","Cucumis melo","Olea europaea","Citrus sinensis","Carica papaya","Passiflora edulis","Prunus persica","Pyrus sp","Diospyros sp","Ananas comosus","Prunus sp","Punica granatum","Citrus maxima","Cydonia oblonga","Manilkara zapota","Fragaria sp","Tamarindus indica","Citrus reticulata","Citrullus lanatus",null,"Sphenostylis stenocarpa","Phaseolus coccineus","Vigna subterranea","Vigna mungo","Phaseolus lunatus","Cicer arietinum","Phaseolus vulgaris","Phaseolus vulgaris","Vigna unguiculata","Vigna unguiculata","Vicia faba","Trigonella foenum-graecum","Arachis hypogaea","Arachis hypogaea","Dolichos uniflorus","Lathyrus sativus","Canavalia ensiformis","Lablab purpureus","Lens culinaris","Vigna unguiculata","Lupinus sp","Vigna radiata","Pisum sativum","Cajanus cajan","Vigna umbellata","Glycine max","NA","Mucuna pruriens","Lupinus albidus",null,"Prunus dulcis","Areca catechu","Bertholletia excelsa","Anacardium occidentale","Castanea sp","Corylus avellana","Cola sp","Macadamia integrifolia","Pistacia vera","Vitellaria paradoxa","Juglans sp","Lagenaria siceraria","Brassica napus","Brassica napus","Ricinus communis","Gossypium sp","Brassica carinata","Arachis hypogaea","Jatropha curcas","Jatropha curcas","Simmondsia chinensis","Linum sp","Guizotia abyssinica","Olea europaea","Olea europaea","Elaeis guineensis","Elaeis guineensis","Carthamus tinctorius","Sesamum indicum","Helianthus annuus","Helianthus annuus","Helianthus annuus","Crotalaria juncea","Triadica sebifera","Vernicia fordii","Sus scrofa domesticus","Gallus gallus domesticus","Gallus gallus domesticus","Anas platyrhynchos domesticus","Anser anser domesticus","Numida meleagris","Struthio camelus","Struthio camelus",null,"Cortunix cortunix japonica","Meleagris gallopavo","Cavia porcellus","Oryctolagus cuniculus domesticus",null,"Tripneustes gratilla",null,null,null,"Pimpinella anisum","Elettaria cardamomum","Cinnamomum sp","Syzygium aromaticum","Coriandrum sativum","Cuminum cyminum","Anethum graveolens","Anethum graveolens","Anethum graveolens","Foeniculum vulgare","Foeniculum vulgare","Zingiber officinale","Mentha sp","Myristica fragrans","Piper sp","Piper sp","Illicium verum","Curcuma longa","Vanilla sp","Manihot esculenta","Musa sp","Ensete ventricosum","Xanthosoma sp","Solanum tuberosum","Ipomoea batatas","Colocasia esculenta","Dioscorea alata","Dioscorea cayennensis subsp. Rotundata","Smallanthus sonchifolius","Dioscorea sp","Solanum nigrum","Amaranthus sp","Cynara cardunculus","Asparagus officinalis","Beta vulgaris","Momordica charantia","Brassica oleracea","Lagenaria siceraria","Capsicum annuum","Daucus carota","Manihot esculenta","Brassica oleracea","Apium graveolens","Capsicum sp","Phaseolus vulgaris","Portulaca oleracea","Vigna unguiculata","Cucumis sativus","Solanum melongena","Cichorium endivia","Gnetum africanum","Solanum aethiopicum","Foeniculum vulgare","Telfairia occidentalis","Telfairia occidentalis","Allium sativum","Solanum scabrum","Brassica oleracea","Allium ampeloprasum","Lactuca sativa","Abelmoschus esculentus","Allium cepa","Allium cepa","Allium cepa","Allium cepa","Pastinaca sativa","Cucurbita maxima","Cucurbita maxima","Raphanus sativus","Brassica napus","Eruca vesicaria","Spinacia oleracea","Allium sp",null,"Helianthus tuberosus","Ipomoea batatas","Beta vulgaris","Solanum lycopersicum","Solanum lycopersicum","Solanum lycopersicum","Solanum lycopersicum","Solanum torvum","Brassica rapa","Talinum fruticosum","Cucurbita pepo"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>EU<\/th>\n      <th>Product.Type<\/th>\n      <th>Product.Subtype<\/th>\n      <th>Product<\/th>\n      <th>Product.Simple<\/th>\n      <th>Component<\/th>\n      <th>Latin.Name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollY":"400px","scrollX":true,"pageLength":50,"fixedHeader":false,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"EU","targets":1},{"name":"Product.Type","targets":2},{"name":"Product.Subtype","targets":3},{"name":"Product","targets":4},{"name":"Product.Simple","targets":5},{"name":"Component","targets":6},{"name":"Latin.Name","targets":7}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>from IPython.display import display</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract tables from the loaded Excel sheets</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>practices <span class="ot">=</span> era_master_codes[<span class="st">"prac"</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>outcomes <span class="ot">=</span> era_master_codes[<span class="st">"out"</span>]</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>products <span class="ot">=</span> era_master_codes[<span class="st">"prod"</span>]</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Display tables with scrollable options in JupyterLab/Notebook</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>with <span class="fu">pd.option_context</span>(<span class="st">'display.max_rows'</span>, <span class="dv">20</span>, <span class="st">'display.max_columns'</span>, None)<span class="sc">:</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">display</span>(<span class="fu">practices.style.set_table_attributes</span>(<span class="st">"style='display:inline; float:left; margin-right:20px;'"</span>))</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">display</span>(<span class="fu">outcomes.style.set_table_attributes</span>(<span class="st">"style='display:inline; float:left; margin-right:20px;'"</span>))</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">display</span>(<span class="fu">products.style.set_table_attributes</span>(<span class="st">"style='display:inline; float:left; margin-right:20px;'"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="download-data-model" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="download-data-model"><span class="header-section-number">2.2</span> Download data model</h2>
<p>This section connects to the public S3 bucket, identifies the latest agronomic ERA data set, downloads it locally, and loads it into memory.</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an S3 filesystem handle</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">&lt;-</span> s3fs<span class="sc">::</span>S3FileSystem<span class="sc">$</span><span class="fu">new</span>(<span class="at">anonymous =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>era_s3 <span class="ot">&lt;-</span> <span class="st">"s3://digital-atlas/era"</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># List files in the s3 bucket</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>all_files <span class="ot">&lt;-</span> s3<span class="sc">$</span><span class="fu">dir_ls</span>(<span class="fu">file.path</span>(era_s3, <span class="st">"data"</span>))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for the "agronomic" RData file, selecting the most recent version</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>target_file <span class="ot">&lt;-</span> <span class="fu">tail</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grep</span>(<span class="st">".RData"</span>, <span class="fu">grep</span>(<span class="st">"agronomic"</span>, all_files, <span class="at">value =</span> <span class="cn">TRUE</span>), <span class="at">value =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a local path for saving the downloaded file</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>save_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dl_dir, <span class="fu">basename</span>(target_file))</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the file if it does not exist already</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(save_path)) {</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  s3<span class="sc">$</span><span class="fu">file_download</span>(target_file, save_path, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the agronomy data using the miceadds package</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>agronomic_data <span class="ot">&lt;-</span> miceadds<span class="sc">::</span><span class="fu">load.Rdata2</span>(</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">basename</span>(save_path),</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="fu">dirname</span>(save_path)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: This is a GPT-generated Python translation and requires validation.</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>import os</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>import s3fs</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>import re</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define download directory</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>dl_dir <span class="ot">=</span> <span class="st">"downloaded_data"</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">os.makedirs</span>(dl_dir, <span class="at">exist_ok=</span>True)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up anonymous S3 filesystem</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">=</span> <span class="fu">s3fs.S3FileSystem</span>(<span class="at">anon=</span>True)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>era_s3 <span class="ot">=</span> <span class="st">"digital-atlas/era/data"</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># List files in the S3 bucket</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>all_files <span class="ot">=</span> <span class="fu">s3.ls</span>(era_s3)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for latest agronomic .RData file</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>agronomic_files <span class="ot">=</span> [f <span class="cf">for</span> f <span class="cf">in</span> all_files <span class="cf">if</span> <span class="st">"agronomic"</span> <span class="cf">in</span> f and <span class="fu">f.endswith</span>(<span class="st">".RData"</span>)]</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>target_file <span class="ot">=</span> <span class="fu">sorted</span>(agronomic_files)[<span class="sc">-</span><span class="dv">1</span>] <span class="cf">if</span> agronomic_files <span class="cf">else</span> None</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Define local save path</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>save_path <span class="ot">=</span> <span class="fu">os.path.join</span>(dl_dir, <span class="fu">os.path.basename</span>(target_file))</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Download file if not already present</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not <span class="fu">os.path.exists</span>(save_path)<span class="sc">:</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    with <span class="fu">s3.open</span>(target_file, <span class="st">'rb'</span>) as src, <span class="fu">open</span>(save_path, <span class="st">'wb'</span>) as dst<span class="sc">:</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">dst.write</span>(<span class="fu">src.read</span>())</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: RData file loading requires R. Consider using `rpy2` if needed.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Once the data is downloaded, it will appear as the screenshot below.</p>
<p>Each of the tables can be extracted individual and combined with one another based on a common piece of information. For example, the B.Code, which is present in each tab, can be used to match information from one particular paper across all these tables.</p>
<p><img src="images/metadata.png" class="img-fluid"></p>
<p>To get a better understanding of what the fields in the data model are you can view data a catalog by running the following code:</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Access era_fields from era_master_codes</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>era_fields <span class="ot">&lt;-</span> era_master_codes<span class="sc">$</span>era_fields_v2</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter to the version relevant to the agronomy data model</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>era_fields<span class="ot">&lt;-</span>era_fields[industrious_elephant_2023<span class="sc">==</span>T,.(Table,Field,Display_Name,Field_Description,Data_Type)]</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(era_fields)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Table"             "Field"             "Display_Name"     </span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] "Field_Description" "Data_Type"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access and filter the era_fields_v2 sheet</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>era_fields_df <span class="ot">=</span> era_master_codes[<span class="st">"era_fields_v2"</span>]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter to the version relevant to the agronomy data model</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>filtered_fields <span class="ot">=</span> era_fields_df[era_fields_df[<span class="st">"industrious_elephant_2023"</span>] <span class="sc">==</span> True]</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Select specific columns</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>era_fields <span class="ot">=</span> filtered_fields[[<span class="st">"Table"</span>, <span class="st">"Field"</span>, <span class="st">"Display_Name"</span>, <span class="st">"Field_Description"</span>, <span class="st">"Data_Type"</span>]]</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Show column names</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">era_fields.columns.tolist</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-510611a9819c81f3b5b0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-510611a9819c81f3b5b0">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351"],["Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Soil.Out","Soil.Out","Soil.Out","Soil.Out","Soil.Out","Soil.Out","Soil.Out","ExpD.Out","ExpD.Out","ExpD.Out","ExpD.Out","ExpD.Out","Times.Out","Times.Out","Times.Out","Times.Out","Times.Out","Times.Clim","Times.Clim","Times.Clim","Times.Clim","Times.Clim","Times.Clim","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Plant.Out","Plant.Out","Plant.Out","Plant.Out","Plant.Out","Plant.Out","Plant.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Weed.Out","Weed.Out","Weed.Out","Weed.Out","Weed.Out","Weed.Out","Weed.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Har.Out","Har.Out","Har.Out","Har.Out","Har.Out","pH.Out","pH.Out","pH.Out","pH.Out","pH.Out","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","WH.Out","WH.Out","WH.Out","WH.Out","WH.Out","WH.Out","WH.Out","WH.Out","Base.Out","Base.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","Int.Out","Int.Out","Int.Out","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Levels","Rot.Levels","Rot.Levels","Rot.Levels","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","AF.Out","AF.Out","AF.Out","AF.Out","AF.Out","AF.Out","AF.Out","AF.Out","AF.Trees","AF.Trees","AF.Trees","AF.Trees","AF.Trees","Other.Out","Other.Out","Other.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","PD.Out","PD.Out","PD.Out","PD.Out","PD.Out","PD.Out","PD.Out","PD.Out"],["B.Code","B.Author.Last","B.Date","B.Journal","B.DOI","B.Url","B.Project","B.Link1","B.Link2","B.Link3","B.Link4","Site.Type","Country","Site.ID","Site.Admin","Site.Agg","ISO.3166.1.alpha.3","Site.LatD","Site.Lat.Unc","Site.LonD","Site.Lon.Unc","Site.Buffer.Manual","Site.Rain.Seasons","Site.Start.S1","Site.End.S1","Site.Length.S1","Site.Start.S2","Site.End.S2","Site.Length.S2","Site.MSP.S1","Site.MSP.S2","Site.MAP","Site.MAT","Site.Elevation","Site.Slope.Perc","Site.Slope.Degree","Site.Soil.Texture","Site.Notes","B.Code","Site.ID","Soil.Upper","Soil.Lower","variable","value","Unit","Method","EX.Design","EX.Plot.Size","EX.HPlot.Size","EX.Notes","B.Code","B.Code","Time","Time.Start.Year","Time.End.Year","Time.Season","B.Code","Site.ID","Time","Time.Clim.SP","Time.Clim.TAP","Time.Clim.Temp.Mean","V.Product","V.Var","V.Crop.Practice","V.Type","V.Trait1","V.Trait2","V.Trait3","V.Maturity","V.Codes","V.Level.Name","T.Level.Name","T.Method","Till.Other","T.Depth","T.Freq","T.Strip.P","T.Strip.WT","T.Strip.WU","Till.Mechanization","B.Code","Time","T.Date.Start","T.Date.End","Site.ID","P.Product","P.Level.Name","P.Structure","P.Prac.Prac","P.Prac.Info","B.Code","P.Notes","F.Level.Name","F.Rate.Pracs","F.Timing.Pracs","F.Info.Pracs","F.Precision.Pracs","F.Int","F.NO","F.PO","F.KO","F.NI","F.PI","F.P2O5","F.KI","F.K2O","F.O.Unit","F.I.Unit","F.Notes","B.Code","F.Level.Name","F.Category","F.Type","F.NPK","F.Amount","F.Unit","F.Method","F.Physical","F.Mechanization","F.Source","F.Fate","Site.ID","Time","F.Date.Start","F.Date.End","F.Date","F.Date.Stage","F.Date.DAP","F.Date.DAE","F.Date.Text","B.Code","F.NP2O5K2O","F.Codes","F.Codes.Level","C.Level.Name","C.Type","C.Name","C.Nam.Type","C.App.Method","C.Amount","C.Unit","C.Applications","Site.ID","Time","C.Date.Start","C.Date.End","C.Date","C.Mechanization","C.Date.Stage","C.Date.DAE","C.Date.DAP","C.Date.Text","B.Code","W.Level.Name","W.Method","W.Freq","W.Freq.Time","W.Notes","B.Code","W.Code","M.Level.Name","P1","P2","P3","P4","M.Codes","M.Notes","M.NO","M.PO","M.KO","M.Unit","B.Code","M.Level.Name","M.Tree","M.Material","M.Process","M.Source","M.Amount","M.Unit","M.Fate","M.Cover","M.Mechanization","Site.ID","Time","M.Date.Start","M.Date.End","M.Date","M.Date.Stage","M.Date.DAP","M.Date.DAE","M.Date.Text","B.Code","M.Tree","M.Material","M.DW","M.DM","M.OC","M.N","M.TN","M.AN","M.CN","M.P","M.TP","M.AP","M.K","M.pH","M.DM.Unit","M.OC.Unit","M.N.Unit","M.TN.Unit","M.AN.Unit","M.P.Unit","M.TP.Unit","M.AP.Unit","M.K.Unit","M.pH.Method","B.Code","H.Level.Name","H.Prac","H.Code","H.Notes","B.Code","pH.Level.Name","pH.Prac","pH.Codes","pH.Notes","B.Code","pH.Level.Name","pH.Material","pH.ECCE","pH.CCE","pH.CaCO3","pH.MgCO3","pH.Amount","pH.Unit","B.Code","WH.Level.Name","P1","P2","P3","P4","WH.Codes","WH.Notes","B.Code","B.Code","Base.Codes","T.Residue.Code","T.Name","T.Residue.Prev","T.Reps","T.Start.Year","T.Start.Season","AF.Level.Name","C.Level.Name","H.Level.Name","I.Level.Name","M.Level.Name","F.Level.Name","pH.Level.Name","P.Level.Name","Till.Level.Name","V.Level.Name","WH.Level.Name","O.Level.Name","W.Level.Name","B.Code","IN.Level.Name","IN.Notes","B.Code","Structure.Comb","B.Code","T.Codes","T.Agg.Levels","T.Codes.No.Agg","T.Codes.Agg","IN.T.Codes","IN.Code","IN.T.Codes.Shared","IN.T.Codes.Diff","seq_n","R.Residues.Codes","min_seq","n_crops","AF.Level.Name","F.Level.Name","AF.Codes","F.Codes","Out.Subind","Out.Unit","Out.Depth.Upper","Out.Depth.Lower","Out.Group","Out.NPV.Rate","Out.NPV.Time","Out.Agg.Stat","Out.Code.Joined","B.Code","B.Code","Site.ID","Econ.Timeframe","Time","Econ.Cat","Econ.Var","Econ.Subgroup","Econ.Val","Econ.Unit","AF.Level.Name","AF.Codes","AF.Boundary","AF.Silvopasture","AF.Parklands","AF.Multistrata","AF.Other","B.Code","B.Code","AF.Level.Name","AF.Tree","AF.Tree.N","AF.Tree.Unit","B.Code","O.Level.Name","O.Structure","Site.ID","T.Name","P.Product","ED.Product.Comp","IN.Level.Name","R.Level.Name","Time","Out.Code.Joined","ED.Mean.T","ED.Error","ED.Error.Type","ED.Data.Loc","ED.Sample.Start","ED.Sample.End","ED.Sample.DAS","ED.Reps","ED.Variety","ED.Comparison1","ED.Comparison2","B.Code","PD.Level.Name","Site.ID","Time","PD.Variable","PD.Date.Start","PD.Date.End","PD.Date.DAS","PD.Date.DAP"],["ERA Publication Code","Author Last Name","Year Published","Journal","DOI","Website","Project","Linked Publication DOI/Website 1","Linked Publication DOI/Website 2","Linked Publication DOI/Website 3","Linked Publication DOI/Website 4","What is the context of the experiment?","Country","Site Name","How is the location reported?","Does the location contain sub-locations?","Enter the Iso Code of the Country","Latitude (Decimal Degrees)","Latitude Uncertainty (m)","Longitude (Decimal Degrees)","Longitude Uncertainty (m)","Uncertainty (Radius in m)","Number of Rainy Seasons","Season1 Start","Season1 End","Rainy  Season 1 Length (days)","Season2 Start","Season2 End","Rainy Season 2 Length (days)","Mean Seasonal Precipitation (mm) - S1","Mean Seasonal Precipitation (mm) - S2","Mean Annual Rainfall (mm)","Mean Annual Temperature (°C)","Elevation (masl)","Slope (%)","Slope (°)","Soil Texture","Site.Notes","NA","Site Name","Depth (cm) Upper","Depth (cm) Lower","Soil variable measured","Value of the measured variable","Unit of the value of the measured variable","Method for the measured variable","Experimental Design","Size of Experimental Plot (m2)","Size of Harvested Plot (m2)","Design &amp; Previous Management Notes","NA","NA","Time Period Name","Year Start as stated by the author","Year Start as stated by the author","Season as stated by the author","NA","Site Name","Time Period Name","Total Precipitation Seasonal","Total Precipitation Annual","Temperature Mean","Product","Variety, Cultivar, Breed, etc.","Choose Crop Practice","Type of plant variety, breed or similar","Crop Trait 1","Crop Trait 2","Crop Trait 3","Time to Maturity (days)","NA","NA","Tillage Pratice Name","Tillage Method or Implement","Other Soil Prep Methods","Tillage Depth (cm)","Frequency per Growing Season","% Field Tilled","Tilled Strip Width (cm)","Untilled Strip Width (cm)","Tillage  Mechanization","NA","Time Period","Date Start","Date End","Site Name","Choose Product","Planting Method Name","Does Planting Method Structure Outcomes?","Planting Practice","Planting Information Practice","NA","Notes","Fertilizer Practice Name","Fertilizer Rate Practice","Fertilizer Timing Practice","Fertilizer Precision Practice","Fertilizer Information Practice","Intercropping Only : Applied to specific crop or whole plot ?","Total Organic Elemental N","Total Organic Elemental P","Total Organic Elemental K","Total Inorganic Elemental N","Total Inorganic  Elemental P","Total Organic  Elemental P2O5","Total Organic Elemental K","Total Organic Elemental K","Organic NPK Unit of Measurement","Inorganic NPK Unit of Measurement","Notes","NA","Fertilizer Practice Name","Type of Fertilizer","Specific Fertilizer","N-P-K Rating (as N-P2O5-K20)","Amount Applied","Unit of Measurement","Method of Application","Fertilizer Physical Processing","Fertilizer Mechanization","Fertilizer Source","What happened to the material? The mulched fate can only be used with manures or composts. Mulched organic materials that are not biosolids, compost or manure should be recorded in mulch and crop residues section.","Site Name","Time Period","Start Date","End Date","Application Date as dd/mm","Application Date as Crop Stage","Application Date as Days Before or After Planting","Application Date as Days After Emergence","Application Date as Other Text Description","NA","NPK Rating NP2O5K2O","NA","NA","Chemical Practice Name","Type of Product Applied","Name of Chemical/Product Applied","Name of product, drug or chemical applied","How is the product delivered?","Application Rate or Amount","Unit of Application","Total Number of Applications","Site Name","Time Period","Specific Application Date Date Start","Specific Application Date Date End","Application Date as dd/mm","Chemicals Mechanization","Application Date as Crop Stage","Application Date Days after emergence","Application Date as Days Before or After Planting","Application Date: Text Description","NA","Weeding Practice Name","Weeding Method","Weeding Frequency","Weeding Time Unit","Weeding Notes","NA","NA","Practice Name","ERA practice 1","ERA practice 2","ERA practice 3","ERA practice 4","NA","Notes","Total amount of elemental N (Nitrogen) from  addition of  non-composted organic materials","Total amount of elemental P (Phosphorus) from addition of  non-composted organic materials","Total amount of elemental K (Potassium) from  addition of  non-composted organic materials","NPK Unit of Measurement","NA","Practice Name","Tree (plant species)","Mulch Material Applied","Processing","Source of Material","Amount of Material Applied","Unit of Application","The Fate of The Material","Coverage of Material Applied as Mulch (%)","Mechanization","Site Name","Time Period","Specific Application Date Date Start","Specific Application Date Date End","Application Date: dd/mm","Application Date: Crop Stage","Application Date: Days before/after planting","Application Date Days after emergence","Application Date: Text Description ","NA","Mulch: Tree","Mulch: Other","Dry Weight?","Dry Matter","Organic Carbon (OC)","Nitrogen (Unspecified)","Total Nitrogen (TN)","Available Nitrogen (AN)","Carbon: Nitrogen (C/N) Ratio","Phosphorous (Unspecified)","Total Phosphorous (TP)","Available Phosphorous (AP)","Potassium (K)","pH","Dry Matter Unit","Organic Carbon (OC) Unit","Nitrogen (Unspecified) Unit","Total Nitrogen (TN) Unit","Available Nitrogen (AN) Unit","Phosphorous (Unspecified) Unit","Total Phosphorous (TP) Unit","Available Phosphorous (AP) Unit","Potassium (K) Unit","pH Method","NA","Practice Name","ERA Harvest Practice","NA","Notes","NA","Practice Name","ERA pH  Practice","NA","Notes","NA","Practice Name","Material Applied","Effective Calcium Carbonate Equivalent (ECCE)","Calcium Carbonate Equivalent (CCE)","% Calcium Carbonate (CaCO3)","% Magnesium Carbonate (MgCO3)","Amount Applied","Unit of Application","NA","Practice Name","ERA practice 1","ERA practice 2","ERA practice 3","ERA practice 4","NA","Notes","NA","NA","NA","NA","Treatment Name","Fate of Crop Residues From The Previous Season","Replicates","Start Year","Start Season","Agroforestry","Chemicals","Harvest","Irrigation","Residues","Fertilizer","pH","Planting","Tillage","Variety","Water Harvesting","Other","Weeding","NA","Intercrop Treatment Name","Notes","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","Outcome Subindicator","Outcome Unit","Soil Upper Depth (cm)","Soil Lower Depth (cm)","Outcome Group","Economic Discount Rate (%)","Economic Period (Years)","NA","NA","NA","NA","Site Name","NA","NA","NA","Item","Subgroup (variable description)","NA","NA","Practice Name","NA","Boundary Planting","SIlvopasture","Parklands or Scattered Trees","Multistrata","Other Agroforestry","NA","NA","Practice","Tree or shrub","Number or Density","Unit","NA","Name practice","NA","Site Name","Treatment","Product","Component","Intercropping","Rotation","Time","Outcome","Value","Error","Error Type","Publication Figure/Table","Sampling Date (Can be used with soil moisture outcomes, for example) - Start","Sampling Date (Can be used with soil moisture outcomes, for example) - End","Sampling Date (Can be used with soil moisture outcomes, for example) - Days After Planting","Reps","Variety","Comparison Treatment (e.g. for fertilizer use efficiency outcomes)","NA","NA","Name Practice","Site Name","Time Period","Variable","Start","End","Days After Sowing","Days After Planting"],["A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Publication first author's surname.","The year of publication.","Name of journal this research is published in.","Digital object identifier (DOI) for the publication (e.g. 10.1080/03650340.2017.1411589). Do not include https://doi.org/ when entering this. Please strip the “https://doi.org/” when entering a doi . Correct = “10.1002/jrsm.1563”, Incorrect = “https://doi.org/10.1002/jrsm.1563”.\r\nIf there is no DOI for a publication then report the https address of the article.","For a publication with no DOI, please enter the full website address where it can be found.","Name the project of the current extraction round","Publications that are referenced in this publication that may present results from the same experiment.","Publications that are referenced in this publication that may present results from the same experiment.","Publications that are referenced in this publication that may present results from the same experiment.","Publications that are referenced in this publication that may present results from the same experiment.","This describes the nature of the field and who is managing it","Country where the study is performed","If  you select a site name that already exists in ERA, the latitude and longitude fields will auto-populate. Please check the auto-generated co-ordinates against the ones reported in the publication and in GoogleMaps/Earth. If there is a mismatch you can overwrite the autogenerated values.","A qualitative measure of how accurate you think the location reporting is. If the study is at a research station, but we only know the location of the city where the station is,  we record \"City\". If we know the exact location of the station record \"Facility\".","State yes if a paper reports a general location which contains sub-locations that you do not know the co-ordinates of. For example a paper might state \"we repeated the experiment on 10 farms in 5 villages in Busia county, Kenya\" so we have a county location and know there are 5 village sub-locations in this county, we don't know where these villages are and results are reported averaged across all the farms and villages. If we know the location or names of the villages (e.g. results are reported per village) then we create one site per village and state \"no\" in this field.","Three letters code for countries","Longitude and latitude are geographic coordinates that specify the position of a point on the Earth's surface, with longitude measuring east-west position and latitude measuring north-south position","An important field used where a location is a region (e.g. a county or district polygon) which has a bounding box that is more rectangular than square (if square then just used the Uncertainty (Radius in m) field). Give the height of the region NAMITA IS THIS THE TOTAL HEIGHT OR HALF THE HEIGHT in meters?","Longitude and latitude are geographic coordinates that specify the position of a point on the Earth's surface, with longitude measuring east-west position and latitude measuring north-south position","An important field used where a location is a region (e.g. a county or district polygon) which has a bounding box that is more rectangular than square (if square then just used the Uncertainty (Radius in m) field). Give the width of the region NAMITA IS THIS THE TOTAL HEIGHT OR HALF THE HEIGHT in meters?","An important field used to indicate spatial uncertainty where a location is a point or a region  (e.g. a county or district polygon) with a square bounding box. Give the radius of uncertainty in meter for the point or region (so the distance from the centre of the region or study plot to the edge). If the study site is a research station you take the centre of the research station to the edge of the station.","Number of rainy seasons","start date of the first season","end date of the first season","Length of the first season","start date of the second season","end date of the second season","length of the second season","Mean Precipitation for the first season","Mean Precipitation fot the second season","This field is used to report the long-term avergae mean annual rainfall of the location. Rainall that is reported for a specific season or year during the experiment should be recorded in the times tab","This field is used to report the long-term avergae mean annual temperature of the location. Temperature that is reported for a specific season or year during the experiment should be recorded in the times tab","Elevation in meters above sea level","Slope of the site in %","Slope of the site in °","Texture of the soil site",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","If you select a site name that already exists in ERA, the latitude and longitude fields will auto-populate. Please check the auto-generated co-ordinates against the ones reported in the publication and in GoogleMaps/Earth. If there is a mismatch you can overwrite the autogenerated values.","The upper limit of depth at which soil samples are collected for analysis of soil properties such as texture, pH, and nutrient content.","The lower limit of depth at which soil samples are collected for analysis of soil properties such as texture, pH, and nutrient content. The lower depth will be greater than the upper depth","Select the variable measured on soil","Enter the measure of the soil variable","Unit of the soil variable","Method to measure the soil variable","A plan specification that states how treatments are allocated to the experimental units during an agronomic trial. It refers to the conceptual framework within which the experiment is conducted. Source: AGRO","The size of a treatment plot in the experiment, if variable use the mean value or mid-point of the size range.","The area of an treatment plot harvested to estimate crop yields (or other outcomes if crop yield was not the primary focus of the experiment).","Copy details about experimental design and previous management here. Previous management describes the study site before the experiment began.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"year when the experiment started","year when the experiment stopped",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,"Total Precipitation in mm for the season","Total Precipitation in mm for the year","Mean temperature in degrees","Name of the product at the crop level","Variety of the product","Is it an improved, Hybrid or unimproved variety ?","Is it a local variety","enter any specific info of the variety","enter any specific info of the variety","enter any specific info of the variety","The number of days required from seeding to grain ripening. Source: CO",null,null,"Choose a easy to recognize name for the tillage practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Tillage Method",null,"The depth at which a soil is ploughed or tilled. Source: AGROVOC","How many times was the land tilled during one experimental season","How much of the experimental plot was tilled?","Width of the tilled strip","Width of the untilled stip","Was manual, animal or mechanized effort used to till or otherwise prepare the soli for planting?","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"Start date of the tillage","End date of the tillage",null,"The crop to which the planting methods applies.","Choose a easy to recognize name for the planting method, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Is this practice a focus of the experiment? Does it structure the outcomes? e.g. a factorial design of Fertilizer A &amp; B and Planting Density A,B &amp; C. Where planting is different between certain treatments, but is not an experimental focus, record \"No\".","Is an improved or optimized planting practice used?","Is an improved method of providing information regarding planting provided to the farmer?","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"Choose a easy to recognize name for the fertilizer practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","rate or dosage of fertilizer application used in the study","timing of fertilizer application","details about the precision of fertilizer application",null,null,"Total elemental nitrogen applied  from organic sources (e.g., compost, manure, biosolid).","Total elemental phosphorus applied from organic sources (e.g., compost, manure, biosolid).","Total elemental potassium applied from organic sources (e.g., compost, manure, biosolid).","Total elemental nitrogen applied from inorganic sources (e.g., urea or DAP).","Total elemental phosphorus applied from inorganic sources (e.g., rock phosphate or DAP).","Total phosphorus applied from inorganic sources presented as phosphorus pentoxide (P2O5) .","Total elemental potassium applied from inorganic sources (e.g., potassium chloride or monopotassium phosphate).","Total potassium applied from inorganic sources presented as potassium oxide (K2O).","The unit of measurement for total organic NPK numbers.","The unit of measurement for total organic NPK numbers.",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Identifies the name of the fertilizer practice applied in the study","Category of fertilizer","Name of the fertilizer","For compound inorganic fertilizers that are mixture of several chemicals you can specify the N-P-K rating here (note the N-P-K rating should refer to N-P2O5-K2O and not elemental N-P-K). Please use a dash \"-\" to separate the numbers. If the components are well described then please enter these instead of the compound fertilizer.","Amount of the fertilizer that is applied","Unit of the amount of the fertilizer that is applied","The technique used to apply fertilizer. This does not include details of labor or mechanization.","Physical characteristics of a fertilizer, such as pelletting or supergranulation.","Was manual, animal or mechanized effort used to apply fertilizer?","Only required for organic materials like compost, manure or residues.","Describes the fate of the applied material after application, indicating whether it was incorporated, mulched, left on the surface, etc.","unique identifier or name of the site where the fertilizer application occurred.","Time Period","State date of fertilizer application. Where there is uncertainty around the exact timing of application the start and end date fields can be used to create a window that represents this. For example if a paper states fertilizer was applied in May 2020 we would state start date = 01/05/2020 and end date = 31/05/2020.","End date of fertilizer application. Where there is uncertainty around the exact timing of application the start and end date fields can be used to create a window that represents this. For example if a paper states fertilizer was applied in May 2020 we would state start date = 01/05/2020 and end date = 31/05/2020.","Application date of the fertilizer","Crop Stage when the fertilizer was applied","Enter days before planting as a minus number.\r\nIf activity is done at planting then enter \"0\".","Enter days before emergence as a minus number.\r\nIf activity is done at emergence then enter \"0\".","description of the fertilizer application date","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,null,"Choose a easy to recognize name for the chemical practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","category of the chemical","Please use active ingredient name over trade-name of product, unless the  product contains multiple active ingredients then it is acceptible to use the product name.","Name fo the applied chemical","Application method of the chemical","Chemical amount applied","unit of application for the chemical treatment","Use when dates are not provided, but a total number of sprays is.",null,null,"Start date of the chemical application","End date of the chemical application","specific date of the chemical application","Was manual, animal or mechanized effort used to apply chemicals or similar materials?","Crop stage when the chemical was applied","Number of days after emergence when the chemical was applied","Enter days before planting as a minus number.\r\nIf activity is done at planting then enter \"0\".",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the weeding practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Name the weeding method","Frequency of the weeding practice",null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Adds an ERA code for mechanincal weeding \"h66.2\"","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.",null,null,null,null,null,null,"Represents the total amount of elemental nitrogen (N) added from non-composted organic materials","Specifies the total amount of elemental phosphorus (P) from non-composted organic materials","Indicates the total amount of elemental potassium (K) from non-composted organic materials","The unit of measurement for total organic NPK numbers.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Practice name","Only required if a material comes from a tree or shrub","Choose from the list or add a new material if the list does not contain a suitable match. Please specifiy the type of any new materials add in the column to the left. You do not need to enter any details about mulched crop residues here.","Describes the type of processing applied to the material before application","In-field: From inside the experimental field\r\nOn-farm: From outside the experimental field within the same landholding.\r\nOff-farm: From outside the farm","Amount of material applied in the study",null,"post-application outcome of the material, indicating whether it was incorporated, left on the surface, or mulched etc","percentage of ground area covered by the applied material when used as mulch",null,null,null,"start date for a period of material application","end date for a period of material application",null,"Describes the crop stage at the time of application","Enter days before planting as a minus number.\r\nIf activity is done at planting then enter \"0\".","Indicates the application date in terms of days after crop emergence (DAE)",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","The mulch material as created in the Res.Method tab","The mulch material as created in the Res.Method tab","Is composition reported for dry weight?","Dry matter is calculated as the difference between the total weight and the moisture content. It is usually obtained by oven-drying, but there are methods specific to products such as silages, fats and molasses. Usually abbreviated as DM. Source: Feedipedia","Organic Carbon (OC)","Nitrogen (Unspecified)","Total Nitrogen (TN)","Available Nitrogen (AN)","Carbon: Nitrogen (C/N) Ratio","Phosphorous (Unspecified)","Total Phosphorous (TP)","Available Phosphorous (AP)","Potassium (K)","pH",null,null,null,null,null,null,null,null,null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Choose a corresponding ERA practice",null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.",null,null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","type of material applied to influence soil pH","Records the Effective Calcium Carbonate Equivalent (ECCE), representing the effectiveness of a liming material in neutralizing soil acidity. Expressed as a percentage, ECCE accounts for both purity and particle size.","Indicates the Calcium Carbonate Equivalent (CCE), measuring the neutralizing potential of the material in terms of calcium carbonate. ","Represents the percentage of calcium carbonate (CaCO₃) in the applied material, reflecting the material’s lime content","Specifies the percentage of magnesium carbonate (MgCO₃) in the material applied. Useful for understanding additional magnesium input from pH-adjusting substances.","Captures the total amount of pH-altering material applied",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Practices[Practice %in% c(\"Water Harvesting\"),Subpractice]","Practices[Practice %in% c(\"Water Harvesting\"),Subpractice]","Practices[Practice %in% c(\"Water Harvesting\"),Subpractice]","Practices[Practice %in% c(\"Water Harvesting\"),Subpractice]","Concatenation of P1 to P4 fields.",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"A residue management code (e.g. mulching or incorporation codes) is derived from the MT.Out2$T.Residue.Prev and MT.Out2$T.Comp fields by cross-referencing to the EU table's fields \"Mulched\", \"Incorporated\", or \"Unknown.Fate\" fields.","Choose a easy to recognize name for the treatment, you will use this name to reference it when creating intercrops or rotations and/or entering data. Avoid using special characters.","This field refers to residues from plants that grew within the experimental plot. Any residues from outside of the experimental unit should be recorded in the residues tab.","For crop paper this is the number of stated in the experiment, e.g. a randomised block design with 4 replicates. For animal paper we use a field, barn, pond, tank or similar as the unit of replication (record the number of animals in the treatment right).","Note the start year of the experimental treatment. This is particularly relevant for reduced or no-tillage experiments. Where a treatment is reset during the course of an experiment, then the Start Year should be listed per observation.","List the starting season of an experimental treatment in systems with &gt;1 growing seasons. If a region has unimodal rainfall or if seasonality is unspecified please leave this field blank.","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","The combined name of the treatments selected.",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Unit of measurement for the outcome (please use SI units)","Upper depth of measurement (cm) for soil outcomes","Lower depth of measurement (cm) for soil outcomes","Use the \"Species/Item/Group\" column to indicate anything that qualifies an outcome, for example if you had numbers of beneficial \"Insect A\" per plant as an outcome, you'd record \"individuals/plant\" as the unit and \"Insect A\" in the \"Species/Item/Group\" column.","Typically associated with calculations of Net Present Value (NPV).","Use with Net Present Value (NPV) outcome or similar only.",null,"Concatenation of Out.Out$Out.SubInd, Out.Out$Out.Unit, Out.Out$Out.Depth.Lower, Out.Out$Out.Depth.Upper, Out.Out$Out.Group, Out.Out$Out.NPV.Rate, Out.Out$Out.WG.Start fields using a \"..\" delimiter. Blank fields are not included.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,null,null,null,null,null,null,"Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.",null,"Name of the boundary planting practice","Name of the silvopasture practice","Name of the parkland practice","Name of the mutistrata practice","Name of another agroforestry practice","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Name of the agroforestry practice","Scientific name of the shrub or tree planted","Number of planted trees or shrub",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Other practice name",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,null,null,null,null,null,null],["Character","Character","Integer  (YYYY)","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Numeric","Numeric","Integer","Character","Character","Integer","Character","Character","Integer","Integer","Integer","Integer","Integer","Integer","Numeric","Numeric","Character","Character","Character","Character","Numeric","Numeric","Character","Numeric","Character","Character","Character","Numeric","Numeric","Character","Character","Character","Character","Numeric","Numeric","Character","Character","Character","Character","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Integer","Character","Character","Character","Character","Character","Integer","Character","Numeric","Integer","Integer","Character","Character","Character","double (S3: Date)","double (S3: Date)","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Date","Date","Character","Character","Integer","Integer","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Character","Integer","Character","Character","double (S3: Date)","double (S3: Date)","Character","Character","Character","double (S3: Date)","Integer","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Numeric","Character","Character","Numeric","Character","Character","Character","double (S3: Date)","double (S3: Date)","Character","Character","Integer","double (S3: Date)","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Integer","Integer","Integer","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Character","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Charcater","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Character","Character","double (S3: Date)","double (S3: Date)","double (S3: Date)","double","Character",null,"Character","Character","Character","Character","Character","Character","Date","Date","Integer","Integer"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Table<\/th>\n      <th>Field<\/th>\n      <th>Display_Name<\/th>\n      <th>Field_Description<\/th>\n      <th>Data_Type<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollY":"400px","scrollX":true,"pageLength":20,"fixedHeader":false,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Table","targets":1},{"name":"Field","targets":2},{"name":"Display_Name","targets":3},{"name":"Field_Description","targets":4},{"name":"Data_Type","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Note the data catalog <code>era_master_codes$era_fields_v2</code> is a work in progress, we are currently revising it and it should be completed by May 2025.</p>
<p>See our <a href="https://eragriculture.github.io/ERA_Agronomy/ERA-Create-Agronomy-Data-Model.html">agronomy data model page</a> for more information how the data tables are connected.</p>
</section>
<section id="download-comparisons-table" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="download-comparisons-table"><span class="header-section-number">2.3</span> Download comparisons table</h2>
<p>This section retrieves the most recent version of the ERA.Compiled comparisons table from the ERA S3 bucket, saves it locally, and loads it for use.</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">&lt;-</span> s3fs<span class="sc">::</span>S3FileSystem<span class="sc">$</span><span class="fu">new</span>(<span class="at">anonymous =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>era_s3 <span class="ot">&lt;-</span> <span class="st">"s3://digital-atlas/era"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># List files in the s3 bucket</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>all_files <span class="ot">&lt;-</span> s3<span class="sc">$</span><span class="fu">dir_ls</span>(<span class="fu">file.path</span>(era_s3, <span class="st">"data"</span>))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for the "agronomic" RData file, selecting the most recent version</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for the correct compiled comparison CSV</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>(target_file_compiled <span class="ot">&lt;-</span> all_files[</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">"era_compiled.*mh.*csv$"</span>, all_files, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"econ"</span>, all_files, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>] <span class="sc">|&gt;</span> <span class="fu">tail</span>(<span class="dv">1</span>))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "s3://digital-atlas/era/data/era_compiled-v1.0-mh_2025-03-19.2-sc_2025_01_30.1-ie_2025_03_19.1-2025-03-28.1.csv"</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co"># The file will start era_compiled, should not contain econ and the most recent version will have the most recent</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co"># date at the end of the file name.</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a local path for saving the downloaded file</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>save_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dl_dir, <span class="fu">basename</span>(target_file_compiled))</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the file if it does not exist already</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(save_path)) {</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  s3<span class="sc">$</span><span class="fu">file_download</span>(target_file_compiled, save_path, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>ERA_Compiled <span class="ot">&lt;-</span> <span class="fu">fread</span>(save_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>import os</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>import s3fs</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up S3 access</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>fs <span class="ot">=</span> <span class="fu">s3fs.S3FileSystem</span>(<span class="at">anon=</span>True)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>era_s3 <span class="ot">=</span> <span class="st">"digital-atlas/era/data"</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>dl_dir <span class="ot">=</span> <span class="st">"era_master_codes"</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="fu">os.makedirs</span>(dl_dir, <span class="at">exist_ok=</span>True)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># List files in the S3 directory</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>all_files <span class="ot">=</span> <span class="fu">fs.ls</span>(era_s3)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for most recent compiled CSV (excluding "econ")</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>compiled_files <span class="ot">=</span> <span class="fu">sorted</span>([</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    f <span class="cf">for</span> f <span class="cf">in</span> all_files</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"era_compiled"</span> <span class="cf">in</span> <span class="fu">f.lower</span>()</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    and <span class="st">"mh"</span> <span class="cf">in</span> <span class="fu">f.lower</span>()</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    and <span class="fu">f.lower</span>()<span class="fu">.endswith</span>(<span class="st">".csv"</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    and <span class="st">"econ"</span> not <span class="cf">in</span> <span class="fu">f.lower</span>()</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the most recent file</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>target_file <span class="ot">=</span> compiled_files[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>save_path <span class="ot">=</span> <span class="fu">os.path.join</span>(dl_dir, <span class="fu">os.path.basename</span>(target_file))</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Download if not already saved</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not <span class="fu">os.path.exists</span>(save_path)<span class="sc">:</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    with <span class="fu">fs.open</span>(target_file, <span class="st">'rb'</span>) as fsrc, <span class="fu">open</span>(save_path, <span class="st">'wb'</span>) as fdst<span class="sc">:</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fdst.write</span>(<span class="fu">fsrc.read</span>())</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>ERA_Compiled <span class="ot">=</span> <span class="fu">pd.read_csv</span>(save_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>An example of the content of <code>ERA.Compiled</code></p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-2f6445c8adb8a8555a9a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2f6445c8adb8a8555a9a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102"],["NN0381","NN0381","NN0381","NN0381","NN0381","NN0381","NN0381","NN0381","NN0381","NN0381","NN0381","NN0381","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0251","LM0235","LM0235","LM0235","LM0235","LM0235","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0256","LM0275","LM0275","LM0275","LM0275","LM0275","LM0275","LM0267","LM0267","LM0267","LM0267","LM0267","LM0152","LM0152","LM0152","LM0152"],["Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya","Kenya"],["2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","1987","2002.1","2002.2","2002.1.2002.2","2002.1.2002.2","2002.1.2002.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","1997.2","","","","","","","1990.2","1991.1","1991.2","1992.1","1992.2","2007","2007","2007","2007"],["Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Common Bean","Common Bean","Common Bean","Common Bean","Common Bean","Common Bean","Common Bean","Common Bean","Common Bean","Common Bean","Common Bean","Common Bean","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Maize","Chickpea","Chickpea","Chickpea","Chickpea","Chickpea","Chickpea","Maize","Maize","Maize","Maize","Maize","Cookstove","Cookstove","Cookstove","Cookstove"],["Nitrous Oxide Emissions","Nitrous Oxide Emissions","Nitrous Oxide Emissions","Nitrous Oxide Emissions","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Residue Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Net Return","Gross Return","Variable Cost","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Gross Return","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Carbon Dioxide Emissions","Carbon Dioxide Emissions","Carbon Dioxide Emissions","Carbon Dioxide Emissions","Carbon Dioxide Emissions","Carbon Dioxide Emissions","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Crop Yield","Specific Fuel Use","Specific Fuel Use","Specific Fuel Use","Specific Fuel Use"],["Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Inorganic Fertilizer","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Water Harvesting","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Rotation","Crop Residue Incorporation","Crop Residue Incorporation","Crop Residue Incorporation","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Crop Residue Incorporation-Green Manure","Agroforestry Pruning-Alleycropping","Agroforestry Pruning-Alleycropping","Agroforestry Pruning-Alleycropping","Agroforestry Pruning-Alleycropping","Agroforestry Pruning-Alleycropping","Cookstove","Cookstove","Cookstove","Cookstove"],["N applied (as DAP + Urea).50","N applied (as DAP + Urea).75","N applied (as DAP + Urea).100","N applied (as DAP + Urea).200","N applied (as DAP + Urea).50","N applied (as DAP + Urea).75","N applied (as DAP + Urea).100","N applied (as DAP + Urea).200","N applied (as DAP + Urea).50","N applied (as DAP + Urea).75","N applied (as DAP + Urea).100","N applied (as DAP + Urea).200","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","Pigeonpea green manure/maize","Sesbania green manure/maize","Leucaena green manure/maize","rainwater harvesting and management","rainwater harvesting and management","rainwater harvesting and management","rainwater harvesting and management","rainwater harvesting and management","lucerne/sunflower/maize/maize","soybean/sunflower/maize/maize","sesame/sunflower/maize/maize","peanut/sunflower/maize/maize","lucerne/pigeon pea/maize/maize","soybean/pigeon pea/maize/maize","sesame/pigeon pea/maize/maize","peanut/pigeon pea/maize/maize","lucerne/sunflower/maize/maize","soybean/sunflower/maize/maize","sesame/sunflower/maize/maize","peanut/sunflower/maize/maize","lucerne/pigeon pea/maize/maize","soybean/pigeon pea/maize/maize","sesame/pigeon pea/maize/maize","peanut/pigeon pea/maize/maize","lucerne/sunflower/maize/maize","soybean/sunflower/maize/maize","sesame/sunflower/maize/maize","peanut/sunflower/maize/maize","lucerne/pigeon pea/maize/maize","soybean/pigeon pea/maize/maize","sesame/pigeon pea/maize/maize","peanut/pigeon pea/maize/maize","lucerne/sunflower/maize/maize","soybean/sunflower/maize/maize","sesame/sunflower/maize/maize","peanut/sunflower/maize/maize","lucerne/pigeon pea/maize/maize","soybean/pigeon pea/maize/maize","sesame/pigeon pea/maize/maize","peanut/pigeon pea/maize/maize","lucerne/sunflower/maize/maize","soybean/sunflower/maize/maize","sesame/sunflower/maize/maize","peanut/sunflower/maize/maize","lucerne/pigeon pea/maize/maize","soybean/pigeon pea/maize/maize","sesame/pigeon pea/maize/maize","peanut/pigeon pea/maize/maize","residue as dry manure","residue as dry manure","residue as dry manure","residue as green manure","residue as green manure","residue as green manure","agroforestry hedge rows","agroforestry hedge rows","agroforestry hedge rows","agroforestry hedge rows","agroforestry hedge rows","improved cookstove with rocket design","improved cookstove with rocket design","improved cookstove with rocket design","improved cookstove with rocket design"],["no N applied","no N applied","no N applied","no N applied","no N applied","no N applied","no N applied","no N applied","no N applied","no N applied","no N applied","no N applied","Maize green manure/maize","Maize green manure/maize","Maize green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Maize green manure/maize","Maize green manure/maize","Maize green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Maize green manure/maize","Maize green manure/maize","Maize green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Maize green manure/maize","Maize green manure/maize","Maize green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Maize green manure/maize","Maize green manure/maize","Maize green manure/maize","Fallow green manure/maize","Fallow green manure/maize","Fallow green manure/maize","conventional rainwater harvesting","conventional rainwater harvesting","conventional rainwater harvesting","conventional rainwater harvesting","conventional rainwater harvesting","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","maize monocropping","control with no input","control with no input","control with no input","control with no input","control with no input","control with no input","sole maize","sole maize","sole maize","sole maize","sole maize","traditional cookstove with three stones","traditional cookstove with three stones","traditional cookstove with three stones","traditional cookstove with three stones"],[670,630,620,810,3.97,4.61,4.563,4.496,10.625,12.082,11.171,10.37,10.73,10.73,10.73,9.199999999999999,9.199999999999999,9.199999999999999,6.78,6.78,6.78,4.77,4.77,4.77,5.16,5.16,5.16,3.91,3.91,3.91,0.29,0.29,0.29,0.7,0.7,0.7,0.6,0.6,0.6,0.31,0.31,0.31,0.63,1.53,250,450,650,0.66,1.76,0.6,1.24,0.7,1.96,0.36,1.12,239,1044,186,195,292,239,204,194,129,129,160,222,148,160,154,228,1.249,0.844,1.05,0.954,1.568,1.33,1.218,1.01,0.637,0.789,0.844,1.101,0.787,0.912,0.786,1.138,37,160,36,56,160,57,1.26,1.17,0.66,1.37,1.12,0.38,0.11,0.59,0.22],[710,710,710,710,4.78,4.78,4.78,4.78,9.942,9.942,9.942,9.942,15.24,19,17.4,15.24,19,17.4,8.289999999999999,8.5,9.27,8.289999999999999,8.5,9.27,6.38,6.67,6.58,6.38,6.67,6.58,0.24,0.78,0.58,0.24,0.78,0.58,0.39,0.43,0.48,0.39,0.43,0.48,0.45,1.08,100,250,0,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,141,141,141,141,141,141,141,141,68,68,68,68,68,68,68,68,0.585,0.585,0.585,0.585,0.585,0.585,0.585,0.585,0.314,0.314,0.314,0.314,0.314,0.314,0.314,0.314,45,10,12,45,10,12,1.2,1.32,0.82,1.53,1.11,0.65,0.13,0.76,0.46]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Code<\/th>\n      <th>Country<\/th>\n      <th>M.Year<\/th>\n      <th>Product<\/th>\n      <th>Out.SubInd<\/th>\n      <th>PrName<\/th>\n      <th>T.Descrip<\/th>\n      <th>C.Descrip<\/th>\n      <th>MeanT<\/th>\n      <th>MeanC<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[9,10]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Code","targets":1},{"name":"Country","targets":2},{"name":"M.Year","targets":3},{"name":"Product","targets":4},{"name":"Out.SubInd","targets":5},{"name":"PrName","targets":6},{"name":"T.Descrip","targets":7},{"name":"C.Descrip","targets":8},{"name":"MeanT","targets":9},{"name":"MeanC","targets":10}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>To get a better understanding of what the fields in the comparisons table are you can view data a catalog by running the following code:</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access era_fields from era_master_codes</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>era_fields_comp <span class="ot">&lt;-</span> era_master_codes<span class="sc">$</span>era_fields_v1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access and filter the era_fields_v2 sheet</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>era_fields_comp <span class="ot">=</span> era_master_codes[<span class="st">"era_fields_v1"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-1d88fb044c3337106619" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1d88fb044c3337106619">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351"],["Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Pub.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Site.Out","Soil.Out","Soil.Out","Soil.Out","Soil.Out","Soil.Out","Soil.Out","Soil.Out","ExpD.Out","ExpD.Out","ExpD.Out","ExpD.Out","ExpD.Out","Times.Out","Times.Out","Times.Out","Times.Out","Times.Out","Times.Clim","Times.Clim","Times.Clim","Times.Clim","Times.Clim","Times.Clim","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Var.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Till.Out","Plant.Out","Plant.Out","Plant.Out","Plant.Out","Plant.Out","Plant.Out","Plant.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Out","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Fert.Method","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Chems.Out","Weed.Out","Weed.Out","Weed.Out","Weed.Out","Weed.Out","Weed.Out","Weed.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Out","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Method","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Res.Composition","Har.Out","Har.Out","Har.Out","Har.Out","Har.Out","pH.Out","pH.Out","pH.Out","pH.Out","pH.Out","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","pH.Method","WH.Out","WH.Out","WH.Out","WH.Out","WH.Out","WH.Out","WH.Out","WH.Out","Base.Out","Base.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","MT.Out2;MT.Out","Int.Out","Int.Out","Int.Out","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Seq","Rot.Levels","Rot.Levels","Rot.Levels","Rot.Levels","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Out","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","Out.Econ","AF.Out","AF.Out","AF.Out","AF.Out","AF.Out","AF.Out","AF.Out","AF.Out","AF.Trees","AF.Trees","AF.Trees","AF.Trees","AF.Trees","Other.Out","Other.Out","Other.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","Data.Out","PD.Out","PD.Out","PD.Out","PD.Out","PD.Out","PD.Out","PD.Out","PD.Out"],["B.Code","B.Author.Last","B.Date","B.Journal","B.DOI","B.Url","B.Project","B.Link1","B.Link2","B.Link3","B.Link4","Site.Type","Country","Site.ID","Site.Admin","Site.Agg","ISO.3166.1.alpha.3","Site.LatD","Site.Lat.Unc","Site.LonD","Site.Lon.Unc","Site.Buffer.Manual","Site.Rain.Seasons","Site.Start.S1","Site.End.S1","Site.Length.S1","Site.Start.S2","Site.End.S2","Site.Length.S2","Site.MSP.S1","Site.MSP.S2","Site.MAP","Site.MAT","Site.Elevation","Site.Slope.Perc","Site.Slope.Degree","Site.Soil.Texture","Site.Notes","B.Code","Site.ID","Soil.Upper","Soil.Lower","variable","value","Unit","Method","EX.Design","EX.Plot.Size","EX.HPlot.Size","EX.Notes","B.Code","B.Code","Time","Time.Start.Year","Time.End.Year","Time.Season","B.Code","Site.ID","Time","Time.Clim.SP","Time.Clim.TAP","Time.Clim.Temp.Mean","V.Product","V.Var","V.Crop.Practice","V.Type","V.Trait1","V.Trait2","V.Trait3","V.Maturity","V.Codes","V.Level.Name","T.Level.Name","T.Method","Till.Other","T.Depth","T.Freq","T.Strip.P","T.Strip.WT","T.Strip.WU","Till.Mechanization","B.Code","Time","T.Date.Start","T.Date.End","Site.ID","P.Product","P.Level.Name","P.Structure","P.Prac.Prac","P.Prac.Info","B.Code","P.Notes","F.Level.Name","F.Rate.Pracs","F.Timing.Pracs","F.Info.Pracs","F.Precision.Pracs","F.Int","F.NO","F.PO","F.KO","F.NI","F.PI","F.P2O5","F.KI","F.K2O","F.O.Unit","F.I.Unit","F.Notes","B.Code","F.Level.Name","F.Category","F.Type","F.NPK","F.Amount","F.Unit","F.Method","F.Physical","F.Mechanization","F.Source","F.Fate","Site.ID","Time","F.Date.Start","F.Date.End","F.Date","F.Date.Stage","F.Date.DAP","F.Date.DAE","F.Date.Text","B.Code","F.NP2O5K2O","F.Codes","F.Codes.Level","C.Level.Name","C.Type","C.Name","C.Nam.Type","C.App.Method","C.Amount","C.Unit","C.Applications","Site.ID","Time","C.Date.Start","C.Date.End","C.Date","C.Mechanization","C.Date.Stage","C.Date.DAE","C.Date.DAP","C.Date.Text","B.Code","W.Level.Name","W.Method","W.Freq","W.Freq.Time","W.Notes","B.Code","W.Code","M.Level.Name","P1","P2","P3","P4","M.Codes","M.Notes","M.NO","M.PO","M.KO","M.Unit","B.Code","M.Level.Name","M.Tree","M.Material","M.Process","M.Source","M.Amount","M.Unit","M.Fate","M.Cover","M.Mechanization","Site.ID","Time","M.Date.Start","M.Date.End","M.Date","M.Date.Stage","M.Date.DAP","M.Date.DAE","M.Date.Text","B.Code","M.Tree","M.Material","M.DW","M.DM","M.OC","M.N","M.TN","M.AN","M.CN","M.P","M.TP","M.AP","M.K","M.pH","M.DM.Unit","M.OC.Unit","M.N.Unit","M.TN.Unit","M.AN.Unit","M.P.Unit","M.TP.Unit","M.AP.Unit","M.K.Unit","M.pH.Method","B.Code","H.Level.Name","H.Prac","H.Code","H.Notes","B.Code","pH.Level.Name","pH.Prac","pH.Codes","pH.Notes","B.Code","pH.Level.Name","pH.Material","pH.ECCE","pH.CCE","pH.CaCO3","pH.MgCO3","pH.Amount","pH.Unit","B.Code","WH.Level.Name","P1","P2","P3","P4","WH.Codes","WH.Notes","B.Code","B.Code","Base.Codes","T.Residue.Code","T.Name","T.Residue.Prev","T.Reps","T.Start.Year","T.Start.Season","AF.Level.Name","C.Level.Name","H.Level.Name","I.Level.Name","M.Level.Name","F.Level.Name","pH.Level.Name","P.Level.Name","Till.Level.Name","V.Level.Name","WH.Level.Name","O.Level.Name","W.Level.Name","B.Code","IN.Level.Name","IN.Notes","B.Code","Structure.Comb","B.Code","T.Codes","T.Agg.Levels","T.Codes.No.Agg","T.Codes.Agg","IN.T.Codes","IN.Code","IN.T.Codes.Shared","IN.T.Codes.Diff","seq_n","R.Residues.Codes","min_seq","n_crops","AF.Level.Name","F.Level.Name","AF.Codes","F.Codes","Out.Subind","Out.Unit","Out.Depth.Upper","Out.Depth.Lower","Out.Group","Out.NPV.Rate","Out.NPV.Time","Out.Agg.Stat","Out.Code.Joined","B.Code","B.Code","Site.ID","Econ.Timeframe","Time","Econ.Cat","Econ.Var","Econ.Subgroup","Econ.Val","Econ.Unit","AF.Level.Name","AF.Codes","AF.Boundary","AF.Silvopasture","AF.Parklands","AF.Multistrata","AF.Other","B.Code","B.Code","AF.Level.Name","AF.Tree","AF.Tree.N","AF.Tree.Unit","B.Code","O.Level.Name","O.Structure","Site.ID","T.Name","P.Product","ED.Product.Comp","IN.Level.Name","R.Level.Name","Time","Out.Code.Joined","ED.Mean.T","ED.Error","ED.Error.Type","ED.Data.Loc","ED.Sample.Start","ED.Sample.End","ED.Sample.DAS","ED.Reps","ED.Variety","ED.Comparison1","ED.Comparison2","B.Code","PD.Level.Name","Site.ID","Time","PD.Variable","PD.Date.Start","PD.Date.End","PD.Date.DAS","PD.Date.DAP"],["ERA Publication Code","Author Last Name","Year Published","Journal","DOI","Website","Project","Linked Publication DOI/Website 1","Linked Publication DOI/Website 2","Linked Publication DOI/Website 3","Linked Publication DOI/Website 4","What is the context of the experiment?","Country","Site Name","How is the location reported?","Does the location contain sub-locations?","Enter the Iso Code of the Country","Latitude (Decimal Degrees)","Latitude Uncertainty (m)","Longitude (Decimal Degrees)","Longitude Uncertainty (m)","Uncertainty (Radius in m)","Number of Rainy Seasons","Season1 Start","Season1 End","Rainy  Season 1 Length (days)","Season2 Start","Season2 End","Rainy Season 2 Length (days)","Mean Seasonal Precipitation (mm) - S1","Mean Seasonal Precipitation (mm) - S2","Mean Annual Rainfall (mm)","Mean Annual Temperature (°C)","Elevation (masl)","Slope (%)","Slope (°)","Soil Texture","Site.Notes","NA","Site Name","Depth (cm) Upper","Depth (cm) Lower","Soil variable measured","Value of the measured variable","Unit of the value of the measured variable","Method for the measured variable","Experimental Design","Size of Experimental Plot (m2)","Size of Harvested Plot (m2)","Design &amp; Previous Management Notes","NA","NA","Time Period Name","Year Start as stated by the author","Year Start as stated by the author","Season as stated by the author","NA","Site Name","Time Period Name","Total Precipitation Seasonal","Total Precipitation Annual","Temperature Mean","Product","Variety, Cultivar, Breed, etc.","Choose Crop Practice","Type of plant variety, breed or similar","Crop Trait 1","Crop Trait 2","Crop Trait 3","Time to Maturity (days)","NA","NA","Tillage Pratice Name","Tillage Method or Implement","Other Soil Prep Methods","Tillage Depth (cm)","Frequency per Growing Season","% Field Tilled","Tilled Strip Width (cm)","Untilled Strip Width (cm)","Tillage  Mechanization","NA","Time Period","Date Start","Date End","Site Name","Choose Product","Planting Method Name","Does Planting Method Structure Outcomes?","Planting Practice","Planting Information Practice","NA","Notes","Fertilizer Practice Name","Fertilizer Rate Practice","Fertilizer Timing Practice","Fertilizer Precision Practice","Fertilizer Information Practice","Intercropping Only : Applied to specific crop or whole plot ?","Total Organic Elemental N","Total Organic Elemental P","Total Organic Elemental K","Total Inorganic Elemental N","Total Inorganic  Elemental P","Total Organic  Elemental P2O5","Total Organic Elemental K","Total Organic Elemental K","Organic NPK Unit of Measurement","Inorganic NPK Unit of Measurement","Notes","NA","Fertilizer Practice Name","Type of Fertilizer","Specific Fertilizer","N-P-K Rating (as N-P2O5-K20)","Amount Applied","Unit of Measurement","Method of Application","Fertilizer Physical Processing","Fertilizer Mechanization","Fertilizer Source","What happened to the material? The mulched fate can only be used with manures or composts. Mulched organic materials that are not biosolids, compost or manure should be recorded in mulch and crop residues section.","Site Name","Time Period","Start Date","End Date","Application Date as dd/mm","Application Date as Crop Stage","Application Date as Days Before or After Planting","Application Date as Days After Emergence","Application Date as Other Text Description","NA","NPK Rating NP2O5K2O","NA","NA","Chemical Practice Name","Type of Product Applied","Name of Chemical/Product Applied","Name of product, drug or chemical applied","How is the product delivered?","Application Rate or Amount","Unit of Application","Total Number of Applications","Site Name","Time Period","Specific Application Date Date Start","Specific Application Date Date End","Application Date as dd/mm","Chemicals Mechanization","Application Date as Crop Stage","Application Date Days after emergence","Application Date as Days Before or After Planting","Application Date: Text Description","NA","Weeding Practice Name","Weeding Method","Weeding Frequency","Weeding Time Unit","Weeding Notes","NA","NA","Practice Name","ERA practice 1","ERA practice 2","ERA practice 3","ERA practice 4","NA","Notes","Total amount of elemental N (Nitrogen) from  addition of  non-composted organic materials","Total amount of elemental P (Phosphorus) from addition of  non-composted organic materials","Total amount of elemental K (Potassium) from  addition of  non-composted organic materials","NPK Unit of Measurement","NA","Practice Name","Tree (plant species)","Mulch Material Applied","Processing","Source of Material","Amount of Material Applied","Unit of Application","The Fate of The Material","Coverage of Material Applied as Mulch (%)","Mechanization","Site Name","Time Period","Specific Application Date Date Start","Specific Application Date Date End","Application Date: dd/mm","Application Date: Crop Stage","Application Date: Days before/after planting","Application Date Days after emergence","Application Date: Text Description ","NA","Mulch: Tree","Mulch: Other","Dry Weight?","Dry Matter","Organic Carbon (OC)","Nitrogen (Unspecified)","Total Nitrogen (TN)","Available Nitrogen (AN)","Carbon: Nitrogen (C/N) Ratio","Phosphorous (Unspecified)","Total Phosphorous (TP)","Available Phosphorous (AP)","Potassium (K)","pH","Dry Matter Unit","Organic Carbon (OC) Unit","Nitrogen (Unspecified) Unit","Total Nitrogen (TN) Unit","Available Nitrogen (AN) Unit","Phosphorous (Unspecified) Unit","Total Phosphorous (TP) Unit","Available Phosphorous (AP) Unit","Potassium (K) Unit","pH Method","NA","Practice Name","ERA Harvest Practice","NA","Notes","NA","Practice Name","ERA pH  Practice","NA","Notes","NA","Practice Name","Material Applied","Effective Calcium Carbonate Equivalent (ECCE)","Calcium Carbonate Equivalent (CCE)","% Calcium Carbonate (CaCO3)","% Magnesium Carbonate (MgCO3)","Amount Applied","Unit of Application","NA","Practice Name","ERA practice 1","ERA practice 2","ERA practice 3","ERA practice 4","NA","Notes","NA","NA","NA","NA","Treatment Name","Fate of Crop Residues From The Previous Season","Replicates","Start Year","Start Season","Agroforestry","Chemicals","Harvest","Irrigation","Residues","Fertilizer","pH","Planting","Tillage","Variety","Water Harvesting","Other","Weeding","NA","Intercrop Treatment Name","Notes","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","Outcome Subindicator","Outcome Unit","Soil Upper Depth (cm)","Soil Lower Depth (cm)","Outcome Group","Economic Discount Rate (%)","Economic Period (Years)","NA","NA","NA","NA","Site Name","NA","NA","NA","Item","Subgroup (variable description)","NA","NA","Practice Name","NA","Boundary Planting","SIlvopasture","Parklands or Scattered Trees","Multistrata","Other Agroforestry","NA","NA","Practice","Tree or shrub","Number or Density","Unit","NA","Name practice","NA","Site Name","Treatment","Product","Component","Intercropping","Rotation","Time","Outcome","Value","Error","Error Type","Publication Figure/Table","Sampling Date (Can be used with soil moisture outcomes, for example) - Start","Sampling Date (Can be used with soil moisture outcomes, for example) - End","Sampling Date (Can be used with soil moisture outcomes, for example) - Days After Planting","Reps","Variety","Comparison Treatment (e.g. for fertilizer use efficiency outcomes)","NA","NA","Name Practice","Site Name","Time Period","Variable","Start","End","Days After Sowing","Days After Planting"],["A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Publication first author's surname.","The year of publication.","Name of journal this research is published in.","Digital object identifier (DOI) for the publication (e.g. 10.1080/03650340.2017.1411589). Do not include https://doi.org/ when entering this. Please strip the “https://doi.org/” when entering a doi . Correct = “10.1002/jrsm.1563”, Incorrect = “https://doi.org/10.1002/jrsm.1563”.\r\nIf there is no DOI for a publication then report the https address of the article.","For a publication with no DOI, please enter the full website address where it can be found.","Name the project of the current extraction round","Publications that are referenced in this publication that may present results from the same experiment.","Publications that are referenced in this publication that may present results from the same experiment.","Publications that are referenced in this publication that may present results from the same experiment.","Publications that are referenced in this publication that may present results from the same experiment.","This describes the nature of the field and who is managing it","Country where the study is performed","If  you select a site name that already exists in ERA, the latitude and longitude fields will auto-populate. Please check the auto-generated co-ordinates against the ones reported in the publication and in GoogleMaps/Earth. If there is a mismatch you can overwrite the autogenerated values.","A qualitative measure of how accurate you think the location reporting is. If the study is at a research station, but we only know the location of the city where the station is,  we record \"City\". If we know the exact location of the station record \"Facility\".","State yes if a paper reports a general location which contains sub-locations that you do not know the co-ordinates of. For example a paper might state \"we repeated the experiment on 10 farms in 5 villages in Busia county, Kenya\" so we have a county location and know there are 5 village sub-locations in this county, we don't know where these villages are and results are reported averaged across all the farms and villages. If we know the location or names of the villages (e.g. results are reported per village) then we create one site per village and state \"no\" in this field.","Three letters code for countries","Longitude and latitude are geographic coordinates that specify the position of a point on the Earth's surface, with longitude measuring east-west position and latitude measuring north-south position","An important field used where a location is a region (e.g. a county or district polygon) which has a bounding box that is more rectangular than square (if square then just used the Uncertainty (Radius in m) field). Give the height of the region NAMITA IS THIS THE TOTAL HEIGHT OR HALF THE HEIGHT in meters?","Longitude and latitude are geographic coordinates that specify the position of a point on the Earth's surface, with longitude measuring east-west position and latitude measuring north-south position","An important field used where a location is a region (e.g. a county or district polygon) which has a bounding box that is more rectangular than square (if square then just used the Uncertainty (Radius in m) field). Give the width of the region NAMITA IS THIS THE TOTAL HEIGHT OR HALF THE HEIGHT in meters?","An important field used to indicate spatial uncertainty where a location is a point or a region  (e.g. a county or district polygon) with a square bounding box. Give the radius of uncertainty in meter for the point or region (so the distance from the centre of the region or study plot to the edge). If the study site is a research station you take the centre of the research station to the edge of the station.","Number of rainy seasons","start date of the first season","end date of the first season","Length of the first season","start date of the second season","end date of the second season","length of the second season","Mean Precipitation for the first season","Mean Precipitation fot the second season","This field is used to report the long-term avergae mean annual rainfall of the location. Rainall that is reported for a specific season or year during the experiment should be recorded in the times tab","This field is used to report the long-term avergae mean annual temperature of the location. Temperature that is reported for a specific season or year during the experiment should be recorded in the times tab","Elevation in meters above sea level","Slope of the site in %","Slope of the site in °","Texture of the soil site",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","If you select a site name that already exists in ERA, the latitude and longitude fields will auto-populate. Please check the auto-generated co-ordinates against the ones reported in the publication and in GoogleMaps/Earth. If there is a mismatch you can overwrite the autogenerated values.","The upper limit of depth at which soil samples are collected for analysis of soil properties such as texture, pH, and nutrient content.","The lower limit of depth at which soil samples are collected for analysis of soil properties such as texture, pH, and nutrient content. The lower depth will be greater than the upper depth","Select the variable measured on soil","Enter the measure of the soil variable","Unit of the soil variable","Method to measure the soil variable","A plan specification that states how treatments are allocated to the experimental units during an agronomic trial. It refers to the conceptual framework within which the experiment is conducted. Source: AGRO","The size of a treatment plot in the experiment, if variable use the mean value or mid-point of the size range.","The area of an treatment plot harvested to estimate crop yields (or other outcomes if crop yield was not the primary focus of the experiment).","Copy details about experimental design and previous management here. Previous management describes the study site before the experiment began.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"year when the experiment started","year when the experiment stopped",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,"Total Precipitation in mm for the season","Total Precipitation in mm for the year","Mean temperature in degrees","Name of the product at the crop level","Variety of the product","Is it an improved, Hybrid or unimproved variety ?","Is it a local variety","enter any specific info of the variety","enter any specific info of the variety","enter any specific info of the variety","The number of days required from seeding to grain ripening. Source: CO",null,null,"Choose a easy to recognize name for the tillage practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Tillage Method",null,"The depth at which a soil is ploughed or tilled. Source: AGROVOC","How many times was the land tilled during one experimental season","How much of the experimental plot was tilled?","Width of the tilled strip","Width of the untilled stip","Was manual, animal or mechanized effort used to till or otherwise prepare the soli for planting?","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"Start date of the tillage","End date of the tillage",null,"The crop to which the planting methods applies.","Choose a easy to recognize name for the planting method, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Is this practice a focus of the experiment? Does it structure the outcomes? e.g. a factorial design of Fertilizer A &amp; B and Planting Density A,B &amp; C. Where planting is different between certain treatments, but is not an experimental focus, record \"No\".","Is an improved or optimized planting practice used?","Is an improved method of providing information regarding planting provided to the farmer?","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"Choose a easy to recognize name for the fertilizer practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","rate or dosage of fertilizer application used in the study","timing of fertilizer application","details about the precision of fertilizer application",null,null,"Total elemental nitrogen applied  from organic sources (e.g., compost, manure, biosolid).","Total elemental phosphorus applied from organic sources (e.g., compost, manure, biosolid).","Total elemental potassium applied from organic sources (e.g., compost, manure, biosolid).","Total elemental nitrogen applied from inorganic sources (e.g., urea or DAP).","Total elemental phosphorus applied from inorganic sources (e.g., rock phosphate or DAP).","Total phosphorus applied from inorganic sources presented as phosphorus pentoxide (P2O5) .","Total elemental potassium applied from inorganic sources (e.g., potassium chloride or monopotassium phosphate).","Total potassium applied from inorganic sources presented as potassium oxide (K2O).","The unit of measurement for total organic NPK numbers.","The unit of measurement for total organic NPK numbers.",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Identifies the name of the fertilizer practice applied in the study","Category of fertilizer","Name of the fertilizer","For compound inorganic fertilizers that are mixture of several chemicals you can specify the N-P-K rating here (note the N-P-K rating should refer to N-P2O5-K2O and not elemental N-P-K). Please use a dash \"-\" to separate the numbers. If the components are well described then please enter these instead of the compound fertilizer.","Amount of the fertilizer that is applied","Unit of the amount of the fertilizer that is applied","The technique used to apply fertilizer. This does not include details of labor or mechanization.","Physical characteristics of a fertilizer, such as pelletting or supergranulation.","Was manual, animal or mechanized effort used to apply fertilizer?","Only required for organic materials like compost, manure or residues.","Describes the fate of the applied material after application, indicating whether it was incorporated, mulched, left on the surface, etc.","unique identifier or name of the site where the fertilizer application occurred.","Time Period","State date of fertilizer application. Where there is uncertainty around the exact timing of application the start and end date fields can be used to create a window that represents this. For example if a paper states fertilizer was applied in May 2020 we would state start date = 01/05/2020 and end date = 31/05/2020.","End date of fertilizer application. Where there is uncertainty around the exact timing of application the start and end date fields can be used to create a window that represents this. For example if a paper states fertilizer was applied in May 2020 we would state start date = 01/05/2020 and end date = 31/05/2020.","Application date of the fertilizer","Crop Stage when the fertilizer was applied","Enter days before planting as a minus number.\r\nIf activity is done at planting then enter \"0\".","Enter days before emergence as a minus number.\r\nIf activity is done at emergence then enter \"0\".","description of the fertilizer application date","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,null,"Choose a easy to recognize name for the chemical practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","category of the chemical","Please use active ingredient name over trade-name of product, unless the  product contains multiple active ingredients then it is acceptible to use the product name.","Name fo the applied chemical","Application method of the chemical","Chemical amount applied","unit of application for the chemical treatment","Use when dates are not provided, but a total number of sprays is.",null,null,"Start date of the chemical application","End date of the chemical application","specific date of the chemical application","Was manual, animal or mechanized effort used to apply chemicals or similar materials?","Crop stage when the chemical was applied","Number of days after emergence when the chemical was applied","Enter days before planting as a minus number.\r\nIf activity is done at planting then enter \"0\".",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the weeding practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Name the weeding method","Frequency of the weeding practice",null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Adds an ERA code for mechanincal weeding \"h66.2\"","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.",null,null,null,null,null,null,"Represents the total amount of elemental nitrogen (N) added from non-composted organic materials","Specifies the total amount of elemental phosphorus (P) from non-composted organic materials","Indicates the total amount of elemental potassium (K) from non-composted organic materials","The unit of measurement for total organic NPK numbers.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Practice name","Only required if a material comes from a tree or shrub","Choose from the list or add a new material if the list does not contain a suitable match. Please specifiy the type of any new materials add in the column to the left. You do not need to enter any details about mulched crop residues here.","Describes the type of processing applied to the material before application","In-field: From inside the experimental field\r\nOn-farm: From outside the experimental field within the same landholding.\r\nOff-farm: From outside the farm","Amount of material applied in the study",null,"post-application outcome of the material, indicating whether it was incorporated, left on the surface, or mulched etc","percentage of ground area covered by the applied material when used as mulch",null,null,null,"start date for a period of material application","end date for a period of material application",null,"Describes the crop stage at the time of application","Enter days before planting as a minus number.\r\nIf activity is done at planting then enter \"0\".","Indicates the application date in terms of days after crop emergence (DAE)",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","The mulch material as created in the Res.Method tab","The mulch material as created in the Res.Method tab","Is composition reported for dry weight?","Dry matter is calculated as the difference between the total weight and the moisture content. It is usually obtained by oven-drying, but there are methods specific to products such as silages, fats and molasses. Usually abbreviated as DM. Source: Feedipedia","Organic Carbon (OC)","Nitrogen (Unspecified)","Total Nitrogen (TN)","Available Nitrogen (AN)","Carbon: Nitrogen (C/N) Ratio","Phosphorous (Unspecified)","Total Phosphorous (TP)","Available Phosphorous (AP)","Potassium (K)","pH",null,null,null,null,null,null,null,null,null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Choose a corresponding ERA practice",null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.",null,null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","type of material applied to influence soil pH","Records the Effective Calcium Carbonate Equivalent (ECCE), representing the effectiveness of a liming material in neutralizing soil acidity. Expressed as a percentage, ECCE accounts for both purity and particle size.","Indicates the Calcium Carbonate Equivalent (CCE), measuring the neutralizing potential of the material in terms of calcium carbonate. ","Represents the percentage of calcium carbonate (CaCO₃) in the applied material, reflecting the material’s lime content","Specifies the percentage of magnesium carbonate (MgCO₃) in the material applied. Useful for understanding additional magnesium input from pH-adjusting substances.","Captures the total amount of pH-altering material applied",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.","Practices[Practice %in% c(\"Water Harvesting\"),Subpractice]","Practices[Practice %in% c(\"Water Harvesting\"),Subpractice]","Practices[Practice %in% c(\"Water Harvesting\"),Subpractice]","Practices[Practice %in% c(\"Water Harvesting\"),Subpractice]","Concatenation of P1 to P4 fields.",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"A residue management code (e.g. mulching or incorporation codes) is derived from the MT.Out2$T.Residue.Prev and MT.Out2$T.Comp fields by cross-referencing to the EU table's fields \"Mulched\", \"Incorporated\", or \"Unknown.Fate\" fields.","Choose a easy to recognize name for the treatment, you will use this name to reference it when creating intercrops or rotations and/or entering data. Avoid using special characters.","This field refers to residues from plants that grew within the experimental plot. Any residues from outside of the experimental unit should be recorded in the residues tab.","For crop paper this is the number of stated in the experiment, e.g. a randomised block design with 4 replicates. For animal paper we use a field, barn, pond, tank or similar as the unit of replication (record the number of animals in the treatment right).","Note the start year of the experimental treatment. This is particularly relevant for reduced or no-tillage experiments. Where a treatment is reset during the course of an experiment, then the Start Year should be listed per observation.","List the starting season of an experimental treatment in systems with &gt;1 growing seasons. If a region has unimodal rainfall or if seasonality is unspecified please leave this field blank.","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","Choose practice for this management category","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","The combined name of the treatments selected.",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Unit of measurement for the outcome (please use SI units)","Upper depth of measurement (cm) for soil outcomes","Lower depth of measurement (cm) for soil outcomes","Use the \"Species/Item/Group\" column to indicate anything that qualifies an outcome, for example if you had numbers of beneficial \"Insect A\" per plant as an outcome, you'd record \"individuals/plant\" as the unit and \"Insect A\" in the \"Species/Item/Group\" column.","Typically associated with calculations of Net Present Value (NPV).","Use with Net Present Value (NPV) outcome or similar only.",null,"Concatenation of Out.Out$Out.SubInd, Out.Out$Out.Unit, Out.Out$Out.Depth.Lower, Out.Out$Out.Depth.Upper, Out.Out$Out.Group, Out.Out$Out.NPV.Rate, Out.Out$Out.WG.Start fields using a \"..\" delimiter. Blank fields are not included.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,null,null,null,null,null,null,"Choose a easy to recognize name for the practice, you will use this name to reference it when building treatments later in the extraction process. Avoid using special characters.",null,"Name of the boundary planting practice","Name of the silvopasture practice","Name of the parkland practice","Name of the mutistrata practice","Name of another agroforestry practice","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Name of the agroforestry practice","Scientific name of the shrub or tree planted","Number of planted trees or shrub",null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.","Other practice name",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"A unique code that identifies an extracted publication in the ERA dataset. This code is present in all the tables of era extraction data models.",null,null,null,null,null,null,null,null],["Character","Character","Integer  (YYYY)","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Numeric","Numeric","Integer","Character","Character","Integer","Character","Character","Integer","Integer","Integer","Integer","Integer","Integer","Numeric","Numeric","Character","Character","Character","Character","Numeric","Numeric","Character","Numeric","Character","Character","Character","Numeric","Numeric","Character","Character","Character","Character","Numeric","Numeric","Character","Character","Character","Character","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Integer","Character","Character","Character","Character","Character","Integer","Character","Numeric","Integer","Integer","Character","Character","Character","double (S3: Date)","double (S3: Date)","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Date","Date","Character","Character","Integer","Integer","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Character","Integer","Character","Character","double (S3: Date)","double (S3: Date)","Character","Character","Character","double (S3: Date)","Integer","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Numeric","Character","Character","Numeric","Character","Character","Character","double (S3: Date)","double (S3: Date)","Character","Character","Integer","double (S3: Date)","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Numeric","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Integer","Integer","Integer","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Character","Numeric","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Charcater","Numeric","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Character","Numeric","Numeric","Character","Character","double (S3: Date)","double (S3: Date)","double (S3: Date)","double","Character",null,"Character","Character","Character","Character","Character","Character","Date","Date","Integer","Integer"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Table<\/th>\n      <th>Field<\/th>\n      <th>Display_Name<\/th>\n      <th>Field_Description<\/th>\n      <th>Data_Type<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollY":"400px","scrollX":true,"pageLength":20,"fixedHeader":false,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Table","targets":1},{"name":"Field","targets":2},{"name":"Display_Name","targets":3},{"name":"Field_Description","targets":4},{"name":"Data_Type","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Note the data catalog <code>era_master_codes$era_fields_v2</code> is a work in progress, we are currently revising it and it should be completed by May 2025.</p>
</section>
</section>
<section id="exploring-the-comparisons-data-era.compiled" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Exploring the comparisons data (<code>ERA.Compiled</code>)</h1>
<section id="subsetting-the-data-to-agronomy" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="subsetting-the-data-to-agronomy"><span class="header-section-number">3.1</span> Subsetting the data to agronomy</h2>
<p>ERA has a diverse range of practices, from agronomy to livestock and a few papers on postharvest storage. We will therefore focus on Agronomy for this User Guide. If you are interest in livestock practices, please explore our Livestock User Guide (<a href="https://eragriculture.github.io/ERL/Guide-to-Livestock-Data-Analysis-in-the-ERA-Dataset--STATIC.html" class="uri">https://eragriculture.github.io/ERL/Guide-to-Livestock-Data-Analysis-in-the-ERA-Dataset--STATIC.html</a>)</p>
<p>Unhide the code to see how we sub-set the data to agronomy papers only. Product.Type has either Animal or Plant and therefore in this example, we will subset to Plant</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ERA.Compiled_ag <span class="ot">&lt;-</span>ERA.Compiled[<span class="fu">grepl</span>(<span class="st">"Plant"</span>, Product.Type)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming ERA_Compiled is your DataFrame</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>ERA_Compiled_ag <span class="ot">=</span> ERA_Compiled[ERA_Compiled[<span class="st">'Product.Type'</span>]<span class="fu">.str.contains</span>(<span class="st">"Plant"</span>, <span class="at">na=</span>False)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="exploring-geographic-locations-of-studies-available" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="exploring-geographic-locations-of-studies-available"><span class="header-section-number">3.2</span> Exploring geographic locations of studies available</h2>
<p>We collected country, site name paraphrased from study, and spatial coordinates when given. Location’s coordinates were verified in Google Maps, as they were often inaccurately reported. Enumerators also recorded a measure of spatial uncertainty. When authors reported decimal degrees and there was no correction required to the co-ordinates, then uncertainty was measured in terms of the value’s precision. When the location was estimated using Google Maps, the spatial uncertainty value was measured in terms of the precision of the site location description (e.g., a single farm or region) and the enumerator’s visual interpretation of land use at and near the coordinates. Observation’s geographic coordinates were collected to facilitate linking the data compiled in ERA to external databases, for example related to climatic and environmental factors not necessarily reported in the original study.</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure coordinates are numeric</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>ERA.Compiled_ag <span class="ot">&lt;-</span> ERA.Compiled_ag <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Latitude =</span> <span class="fu">as.numeric</span>(Latitude),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Longitude =</span> <span class="fu">as.numeric</span>(Longitude)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Latitude) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(Longitude))</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of papers per country</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>paper_counts <span class="ot">&lt;-</span> ERA.Compiled_ag <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N_Papers =</span> <span class="fu">n_distinct</span>(Code), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Load only African countries</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">continent =</span> <span class="st">"Africa"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix Tanzania name if needed</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">admin =</span> <span class="fu">if_else</span>(admin <span class="sc">==</span> <span class="st">"United Republic of Tanzania"</span>, <span class="st">"Tanzania"</span>, admin))</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure CRS is consistent</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(world, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert combined_sites to spatial data</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>sites_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(ERA.Compiled_ag, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"Longitude"</span>, <span class="st">"Latitude"</span>), <span class="at">crs =</span> <span class="dv">4326</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Join paper counts to map</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>map_data <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(admin, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Country =</span> admin) <span class="sc">%&gt;%</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(paper_counts, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the map</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>map<span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> map_data, <span class="fu">aes</span>(<span class="at">fill =</span> N_Papers), <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> sites_sf, <span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude), </span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"mako"</span>,</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"gray95"</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Agronomy Papers"</span>) <span class="sc">+</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,          <span class="co"># ⬅ Move to bottom</span></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,     <span class="co"># ⬅ Make it horizontal</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(</span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">barwidth =</span> <span class="dv">10</span>, <span class="at">barheight =</span> <span class="fl">0.5</span>, <span class="at">title.position =</span> <span class="st">"top"</span>, <span class="at">title.hjust =</span> <span class="fl">0.5</span></span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">20</span>, <span class="dv">55</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">35</span>, <span class="dv">38</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the map</span></span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ERA-User-Guide_files/figure-html/r_plotting%20the%20distribution%20of%20data-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Python equivalent code:</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>import numpy as np</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>import geopandas as gpd</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>import matplotlib.pyplot as plt</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure coordinates are numeric</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>ERA_Compiled_ag[<span class="st">'Latitude'</span>] <span class="ot">=</span> <span class="fu">pd.to_numeric</span>(ERA_Compiled_ag[<span class="st">'Latitude'</span>], <span class="at">errors=</span><span class="st">'coerce'</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>ERA_Compiled_ag[<span class="st">'Longitude'</span>] <span class="ot">=</span> <span class="fu">pd.to_numeric</span>(ERA_Compiled_ag[<span class="st">'Longitude'</span>], <span class="at">errors=</span><span class="st">'coerce'</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>ERA_Compiled_ag <span class="ot">=</span> <span class="fu">ERA_Compiled_ag.dropna</span>(<span class="at">subset=</span>[<span class="st">'Latitude'</span>, <span class="st">'Longitude'</span>])</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of papers per country</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>paper_counts <span class="ot">=</span> (</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    ERA_Compiled_ag</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.groupby</span>(<span class="st">'Country'</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.agg</span>(<span class="at">N_Papers=</span>(<span class="st">'Code'</span>, <span class="st">'nunique'</span>))</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.reset_index</span>()</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Load only African countries using Natural Earth data</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>world <span class="ot">=</span> <span class="fu">gpd.read_file</span>(<span class="fu">gpd.datasets.get_path</span>(<span class="st">'naturalearth_lowres'</span>))</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>world <span class="ot">=</span> world[world[<span class="st">'continent'</span>] <span class="sc">==</span> <span class="st">'Africa'</span>]</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix Tanzania name if needed</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>world[<span class="st">'admin'</span>] <span class="ot">=</span> world[<span class="st">'admin'</span>]<span class="fu">.replace</span>(<span class="st">"United Republic of Tanzania"</span>, <span class="st">"Tanzania"</span>)</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure CRS is consistent</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>world <span class="ot">=</span> <span class="fu">world.to_crs</span>(<span class="at">epsg=</span><span class="dv">4326</span>)</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert ERA_Compiled_ag to spatial data</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>sites_sf <span class="ot">=</span> <span class="fu">gpd.GeoDataFrame</span>(</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    ERA_Compiled_ag,</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">geometry=</span><span class="fu">gpd.points_from_xy</span>(ERA_Compiled_ag[<span class="st">'Longitude'</span>], ERA_Compiled_ag[<span class="st">'Latitude'</span>]),</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">crs=</span><span class="st">"EPSG:4326"</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Join paper counts to map: select only country names and geometry, rename and merge</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>map_data <span class="ot">=</span> world[[<span class="st">'admin'</span>, <span class="st">'geometry'</span>]]<span class="fu">.rename</span>(<span class="at">columns=</span>{<span class="st">'admin'</span><span class="sc">:</span> <span class="st">'Country'</span>})</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>map_data <span class="ot">=</span> <span class="fu">map_data.merge</span>(paper_counts, <span class="at">on=</span><span class="st">'Country'</span>, <span class="at">how=</span><span class="st">'left'</span>)</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the map</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="ot">=</span> <span class="fu">plt.subplots</span>(<span class="at">figsize=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot African countries colored by N_Papers; missing values will appear in light gray</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a><span class="fu">map_data.plot</span>(</span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">column=</span><span class="st">'N_Papers'</span>,</span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">ax=</span>ax,</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">edgecolor=</span><span class="st">'white'</span>,</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">cmap=</span><span class="st">'viridis'</span>,</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_kwds=</span>{<span class="st">'color'</span><span class="sc">:</span> <span class="st">'gray95'</span>, <span class="st">'edgecolor'</span><span class="sc">:</span> <span class="st">'white'</span>}</span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot site locations</span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a><span class="fu">sites_sf.plot</span>(</span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">ax=</span>ax,</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">marker=</span><span class="st">'o'</span>,</span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="st">'white'</span>,</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">edgecolor=</span><span class="st">'black'</span>,</span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">markersize=</span><span class="dv">50</span>,</span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha=</span><span class="fl">0.5</span></span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Set plot limits to match the original R code coordinates</span></span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a><span class="fu">ax.set_xlim</span>(<span class="sc">-</span><span class="dv">20</span>, <span class="dv">55</span>)</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a><span class="fu">ax.set_ylim</span>(<span class="sc">-</span><span class="dv">35</span>, <span class="dv">38</span>)</span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a><span class="fu">ax.axis</span>(<span class="st">'off'</span>)</span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Add legend (customization may be needed to mirror ggplot's style)</span></span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.legend</span>(<span class="at">title=</span><span class="st">'Agronomy Papers'</span>, <span class="at">loc=</span><span class="st">'lower center'</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.tight_layout</span>()</span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.show</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="exploring-the-products-of-studies-available" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="exploring-the-products-of-studies-available"><span class="header-section-number">3.3</span> Exploring the products of studies available</h2>
<p>The <code>Product.Subtype</code> column in the <code>ERA.Compiled_ag</code> dataset contains the specific <strong>crop types</strong> examined in each study (e.g., <code>"Maize"</code>, <code>"Rice"</code>, <code>"Wheat"</code>).</p>
<p>To accurately <strong>count how many unique studies (identified by <code>Code</code>)</strong> examined each crop, the following code processes and summarizes the data.</p>
<p>The figure below displays the distribution of crop categories in the dataset. It highlights the relative focus of studies across different crop types.</p>
<ul>
<li><p>The <strong>largest category</strong> by far is <strong>Cereals</strong>, indicating that most studies in ERA are focused on cereal crops such as maize, wheat, rice, and sorghum.</p></li>
<li><p>This is followed by <strong>Legumes</strong>, <strong>Starchy Staples</strong>, and <strong>Vegetables</strong>, which also appear frequently in the dataset.</p></li>
<li><p>Categories such as <strong>Fodders</strong>, <strong>Cash Crops</strong>, and <strong>Fruits</strong> are represented to a lesser extent.</p></li>
</ul>
<p>Each tile represents a crop category, and its size reflects the <strong>number of unique studies</strong> (<code>Code</code>) that included at least one crop from that category. The number in parentheses shows the count of studies for that group.</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>prod_counts <span class="ot">&lt;-</span> ERA.Compiled_ag <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(Product.Subtype, <span class="at">sep =</span> <span class="st">"-"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Product.Subtype) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Count =</span> <span class="fu">n_distinct</span>(Code), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">paste0</span>(Product.Subtype, <span class="st">" ("</span>, Count, <span class="st">")"</span>))</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>tree_plot<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(prod_counts, <span class="fu">aes</span>(<span class="at">area =</span> Count, <span class="at">fill =</span> Count, <span class="at">label =</span> label)) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap_text</span>(</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"black"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">place =</span> <span class="st">"centre"</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">grow =</span> <span class="cn">FALSE</span>,       <span class="co"># Disable growing to avoid oversized text</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">reflow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">10</span>            <span class="co"># Adjust this value to control the actual text size</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Greens"</span>, <span class="at">direction =</span> <span class="dv">1</span>, <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>tree_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ERA-User-Guide_files/figure-html/r_plotting%20products-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Python equivalent code:</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>import squarify</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>import matplotlib.pyplot as plt</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Separate rows by "-" in the "Product.Subtype" column</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>prod_counts <span class="ot">=</span> (</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    ERA_Compiled_ag</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.assign</span>(<span class="at">Product_Subtype=</span>ERA_Compiled_ag[<span class="st">'Product.Subtype'</span>]<span class="fu">.str.split</span>(<span class="st">'-'</span>))</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.explode</span>(<span class="st">'Product_Subtype'</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.groupby</span>(<span class="st">'Product_Subtype'</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.agg</span>(<span class="at">Count=</span>(<span class="st">'Code'</span>, <span class="st">'nunique'</span>))</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.reset_index</span>()</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Create label as "Product.Subtype (Count)"</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>prod_counts[<span class="st">'label'</span>] <span class="ot">=</span> prod_counts[<span class="st">'Product_Subtype'</span>] <span class="sc">+</span> <span class="st">" ("</span> <span class="sc">+</span> prod_counts[<span class="st">'Count'</span>]<span class="fu">.astype</span>(str) <span class="sc">+</span> <span class="st">")"</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the treemap</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.figure</span>(<span class="at">figsize=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>sizes <span class="ot">=</span> prod_counts[<span class="st">'Count'</span>].values</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">=</span> prod_counts[<span class="st">'label'</span>].values</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalize sizes for colormap mapping</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>normed <span class="ot">=</span> sizes <span class="sc">/</span> <span class="fu">sizes.max</span>()</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">=</span> <span class="fu">plt.cm.Greens</span>(normed)</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="fu">squarify.plot</span>(<span class="at">sizes=</span>sizes, <span class="at">label=</span>labels, <span class="at">color=</span>colors, <span class="at">alpha=</span><span class="fl">0.7</span>)</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.axis</span>(<span class="st">'off'</span>)</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.title</span>(<span class="st">'Products Treemap'</span>, <span class="at">fontsize=</span><span class="dv">14</span>, <span class="at">fontweight=</span><span class="st">'bold'</span>)</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Set white borders for each rectangle</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> patch <span class="cf">in</span> <span class="fu">plt.gca</span>().patches<span class="sc">:</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">patch.set_linewidth</span>(<span class="dv">1</span>)</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">patch.set_edgecolor</span>(<span class="st">'white'</span>)</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.show</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="exploring-the-agronomic-practices-within-studies-available" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="exploring-the-agronomic-practices-within-studies-available"><span class="header-section-number">3.4</span> Exploring the agronomic practices within studies available</h2>
<p>The following analysis explores the types of <strong>agronomic practices</strong>-referred to as <strong>“Themes”</strong> in the dataset.</p>
<p>Each study in ERA may be associated with multiple practices—for example, a study might examine both Soil Management and Nutrient Management.<br>
For example, the theme ‘Soil Management’ include practices like green manure, crop residue, pH control, tillage, improved fallows. ‘Nutrient Management’ includes organic and inorganic fertilizer. This can be found in the practices within the mastercodes<br>
</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>ag_counts <span class="ot">&lt;-</span> ERA.Compiled_ag <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(Theme, <span class="at">sep =</span> <span class="st">"-"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Theme) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Count =</span> <span class="fu">n_distinct</span>(Code), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">paste0</span>(Theme, <span class="st">" ("</span>, Count, <span class="st">")"</span>))</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define parts per square (e.g. 1 square = 10 studies)</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>parts_per_square <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare waffle input</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>waffle_data <span class="ot">&lt;-</span> ag_counts <span class="sc">%&gt;%</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">squares =</span> <span class="fu">round</span>(Count <span class="sc">/</span> parts_per_square)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(squares <span class="sc">&gt;</span> <span class="dv">0</span>)  <span class="co"># Drop any 0-square items</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Named vector for waffle</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>waffle_vec <span class="ot">&lt;-</span> <span class="fu">setNames</span>(waffle_data<span class="sc">$</span>squares, waffle_data<span class="sc">$</span>label)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Waffle plot</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>waffle_plot <span class="ot">&lt;-</span> waffle<span class="sc">::</span><span class="fu">waffle</span>(</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">parts =</span> waffle_vec,</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">rows =</span> <span class="dv">10</span>,</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">size =</span> <span class="fl">0.5</span>,</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">colors =</span> RColorBrewer<span class="sc">::</span><span class="fu">brewer.pal</span>(<span class="at">n =</span> <span class="fu">nrow</span>(waffle_data), <span class="at">name =</span> <span class="st">"Blues"</span>),</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend_pos =</span> <span class="st">"bottom"</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>()</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>))</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>waffle_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ERA-User-Guide_files/figure-html/r_plotting%20practices-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Python equivalent code:</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>import numpy as np</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>from pywaffle import Waffle</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>import matplotlib.pyplot as plt</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>import matplotlib as mpl</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Separate rows by "-" in the "Theme" column and count unique 'Code's</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>ag_counts <span class="ot">=</span> (</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    ERA_Compiled_ag</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.assign</span>(<span class="at">Theme=</span>ERA_Compiled_ag[<span class="st">'Theme'</span>]<span class="fu">.str.split</span>(<span class="st">'-'</span>))</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.explode</span>(<span class="st">'Theme'</span>)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.groupby</span>(<span class="st">'Theme'</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.agg</span>(<span class="at">Count=</span>(<span class="st">'Code'</span>, <span class="st">'nunique'</span>))</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.reset_index</span>()</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>ag_counts[<span class="st">'label'</span>] <span class="ot">=</span> ag_counts[<span class="st">'Theme'</span>] <span class="sc">+</span> <span class="st">" ("</span> <span class="sc">+</span> ag_counts[<span class="st">'Count'</span>]<span class="fu">.astype</span>(str) <span class="sc">+</span> <span class="st">")"</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Define parts per square (e.g. 1 square = 20 studies)</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>parts_per_square <span class="ot">=</span> <span class="dv">20</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare waffle input: compute squares per theme</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>waffle_data <span class="ot">=</span> <span class="fu">ag_counts.copy</span>()</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>waffle_data[<span class="st">'squares'</span>] <span class="ot">=</span> (waffle_data[<span class="st">'Count'</span>] <span class="sc">/</span> parts_per_square)<span class="fu">.round</span>()<span class="fu">.astype</span>(int)</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>waffle_data <span class="ot">=</span> waffle_data[waffle_data[<span class="st">'squares'</span>] <span class="sc">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dictionary for the waffle plot: keys are labels, values are squares</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>waffle_vec <span class="ot">=</span> <span class="fu">dict</span>(<span class="fu">zip</span>(waffle_data[<span class="st">'label'</span>], waffle_data[<span class="st">'squares'</span>]))</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a color palette similar to RColorBrewer "Blues"</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>n_categories <span class="ot">=</span> <span class="fu">len</span>(waffle_data)</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">=</span> [<span class="fu">mpl.cm.Blues</span>(i) <span class="cf">for</span> i <span class="cf">in</span> <span class="fu">np.linspace</span>(<span class="fl">0.3</span>, <span class="fl">0.7</span>, n_categories)]</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the waffle chart</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">=</span> <span class="fu">plt.figure</span>(</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">FigureClass=</span>Waffle,</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows=</span><span class="dv">10</span>,</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">values=</span>waffle_vec,</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">colors=</span>colors,</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend=</span>{</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">'loc'</span><span class="sc">:</span> <span class="st">'lower center'</span>,</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">'bbox_to_anchor'</span><span class="sc">:</span> (<span class="fl">0.5</span>, <span class="sc">-</span><span class="fl">0.1</span>),</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">'ncol'</span><span class="sc">:</span> <span class="dv">3</span>,</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">'fontsize'</span><span class="sc">:</span> <span class="dv">10</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span>{<span class="st">'label'</span><span class="sc">:</span> <span class="st">'Practices Waffle Chart'</span>, <span class="st">'loc'</span><span class="sc">:</span> <span class="st">'center'</span>},</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">figsize=</span>(<span class="dv">10</span>, <span class="dv">8</span>)</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.show</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="exploring-outcomes-reported-in-the-studies-available" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="exploring-outcomes-reported-in-the-studies-available"><span class="header-section-number">3.5</span> Exploring outcomes reported in the studies available</h2>
<p>The ERA dataset tracks outcomes of agronomic interventions across several broad categories—called <strong>Pillars</strong>—such as productivity, environmental impact, and more. Each pillar includes more specific <strong>indicators</strong> like <em>yield</em>, <em>GHG emissions</em>, <em>soil organic carbon</em>, and others.</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate data by pillar and indicator</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>out_counts <span class="ot">&lt;-</span> ERA.Compiled_ag <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Out.Pillar =</span> <span class="fu">trimws</span>(<span class="fu">as.character</span>(Out.Pillar))) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Out.Pillar <span class="sc">!=</span> <span class="st">""</span>, <span class="sc">!</span><span class="fu">is.na</span>(Out.Pillar), <span class="sc">!</span><span class="fu">is.na</span>(Out.Ind)) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Out.Pillar, Out.Ind) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Num_Papers =</span> <span class="fu">n_distinct</span>(Code), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Pillar =</span> Out.Pillar, <span class="at">Indicator =</span> Out.Ind)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort indicators within each pillar</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>out_counts <span class="ot">&lt;-</span> out_counts <span class="sc">%&gt;%</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Pillar, Indicator) <span class="sc">%&gt;%</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Indicator =</span> <span class="fu">factor</span>(Indicator, <span class="at">levels =</span> <span class="fu">unique</span>(Indicator)),</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Pillar =</span> <span class="fu">factor</span>(Pillar, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Productivity"</span>, <span class="st">"Resilience"</span>, <span class="st">"Mitigation"</span>))</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: define pillar colors</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>pillar_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivity"</span> <span class="ot">=</span> <span class="st">"#FFCC66"</span>,</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Resilience"</span> <span class="ot">=</span> <span class="st">"#990000"</span>,</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Mitigation"</span> <span class="ot">=</span> <span class="st">"#8B4513"</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>bar_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(out_counts, <span class="fu">aes</span>(</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> Indicator, <span class="at">y =</span> Num_Papers, <span class="at">fill =</span> Pillar</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>)) <span class="sc">+</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Papers"</span>,</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Outcome Indicator"</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pillar_colors, <span class="at">na.value =</span> <span class="st">"gray70"</span>) <span class="sc">+</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(out_counts<span class="sc">$</span>Num_Papers) <span class="sc">+</span> <span class="dv">50</span>),</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Pillar, <span class="at">scales =</span> <span class="st">"free_x"</span>, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a>bar_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ERA-User-Guide_files/figure-html/r_plotting%20Outcomes-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Python equivalent code:</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>import numpy as np</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>import matplotlib.pyplot as plt</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>import seaborn as sns</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate data by pillar and indicator</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Trim whitespace from 'Out.Pillar' and filter out empty/missing values</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>out_counts <span class="ot">=</span> <span class="fu">ERA_Compiled_ag.copy</span>()</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>out_counts[<span class="st">'Out.Pillar'</span>] <span class="ot">=</span> out_counts[<span class="st">'Out.Pillar'</span>]<span class="fu">.astype</span>(str)<span class="fu">.str.strip</span>()</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>out_counts <span class="ot">=</span> out_counts[</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    (out_counts[<span class="st">'Out.Pillar'</span>] <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">&amp;</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    (out_counts[<span class="st">'Out.Pillar'</span>]<span class="fu">.notna</span>()) <span class="sc">&amp;</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    (out_counts[<span class="st">'Out.Ind'</span>]<span class="fu">.notna</span>())</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by Out.Pillar and Out.Ind, counting unique 'Code'</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>out_counts <span class="ot">=</span> (</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">out_counts.groupby</span>([<span class="st">'Out.Pillar'</span>, <span class="st">'Out.Ind'</span>], <span class="at">as_index=</span>False)</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.agg</span>(<span class="at">Num_Papers=</span>(<span class="st">'Code'</span>, <span class="st">'nunique'</span>))</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns: Pillar = Out.Pillar, Indicator = Out.Ind</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>out_counts <span class="ot">=</span> <span class="fu">out_counts.rename</span>(<span class="at">columns=</span>{<span class="st">'Out.Pillar'</span><span class="sc">:</span> <span class="st">'Pillar'</span>, <span class="st">'Out.Ind'</span><span class="sc">:</span> <span class="st">'Indicator'</span>})</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort indicators within each pillar</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>out_counts <span class="ot">=</span> <span class="fu">out_counts.sort_values</span>(<span class="at">by=</span>[<span class="st">'Pillar'</span>, <span class="st">'Indicator'</span>])</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Set categorical ordering:</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="co"># For Indicator, levels are based on order of appearance</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>indicator_levels <span class="ot">=</span> out_counts[<span class="st">'Indicator'</span>]<span class="fu">.unique</span>()<span class="fu">.tolist</span>()</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>out_counts[<span class="st">'Indicator'</span>] <span class="ot">=</span> <span class="fu">pd.Categorical</span>(out_counts[<span class="st">'Indicator'</span>], <span class="at">categories=</span>indicator_levels, <span class="at">ordered=</span>True)</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="co"># For Pillar, use a fixed order</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>pillar_order <span class="ot">=</span> [<span class="st">"Productivity"</span>, <span class="st">"Resilience"</span>, <span class="st">"Mitigation"</span>]</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>out_counts[<span class="st">'Pillar'</span>] <span class="ot">=</span> <span class="fu">pd.Categorical</span>(out_counts[<span class="st">'Pillar'</span>], <span class="at">categories=</span>pillar_order, <span class="at">ordered=</span>True)</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Define pillar colors</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>pillar_colors <span class="ot">=</span> {</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Productivity"</span><span class="sc">:</span> <span class="st">"#FFCC66"</span>,</span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Resilience"</span><span class="sc">:</span> <span class="st">"#990000"</span>,</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mitigation"</span><span class="sc">:</span> <span class="st">"#8B4513"</span></span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Create faceted bar plot: one subplot per Pillar</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>pillars <span class="ot">=</span> [p <span class="cf">for</span> p <span class="cf">in</span> pillar_order <span class="cf">if</span> p <span class="cf">in</span> out_counts[<span class="st">'Pillar'</span>].cat.categories]</span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a>num_pillars <span class="ot">=</span> <span class="fu">len</span>(pillars)</span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="ot">=</span> <span class="fu">plt.subplots</span>(<span class="dv">1</span>, num_pillars, <span class="at">figsize=</span>(<span class="dv">5</span> <span class="sc">*</span> num_pillars, <span class="dv">5</span>), <span class="at">sharey=</span>False)</span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure axes is iterable when only one subplot exists</span></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> num_pillars <span class="sc">==</span> <span class="dv">1</span><span class="sc">:</span></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a>    axes <span class="ot">=</span> [axes]</span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax, pillar <span class="cf">in</span> <span class="fu">zip</span>(axes, pillars)<span class="sc">:</span></span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a>    subset <span class="ot">=</span> out_counts[out_counts[<span class="st">'Pillar'</span>] <span class="sc">==</span> pillar]</span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ax.bar</span>(subset[<span class="st">'Indicator'</span>], subset[<span class="st">'Num_Papers'</span>],</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="fu">pillar_colors.get</span>(pillar, <span class="st">"gray70"</span>), <span class="at">width=</span><span class="fl">0.8</span>)</span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ax.set_xlabel</span>(<span class="st">"Outcome Indicator"</span>, <span class="at">fontsize=</span><span class="dv">12</span>, <span class="at">fontweight=</span><span class="st">'bold'</span>, <span class="at">labelpad=</span><span class="dv">10</span>)</span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ax.set_ylabel</span>(<span class="st">"Number of Papers"</span>, <span class="at">fontsize=</span><span class="dv">12</span>, <span class="at">fontweight=</span><span class="st">'bold'</span>)</span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ax.tick_params</span>(<span class="at">axis=</span><span class="st">'x'</span>, <span class="at">labelsize=</span><span class="dv">10</span>, <span class="at">rotation=</span><span class="dv">45</span>)</span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ax.tick_params</span>(<span class="at">axis=</span><span class="st">'y'</span>, <span class="at">labelsize=</span><span class="dv">10</span>)</span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ax.set_ylim</span>(<span class="dv">0</span>, subset[<span class="st">'Num_Papers'</span>]<span class="fu">.max</span>() <span class="sc">+</span> <span class="dv">50</span>)</span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ax.set_title</span>(pillar, <span class="at">fontsize=</span><span class="dv">12</span>, <span class="at">fontweight=</span><span class="st">'bold'</span>)</span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove grid and extra spines to mimic theme_minimal()</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ax.grid</span>(False)</span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a>    ax.spines[<span class="st">'top'</span>]<span class="fu">.set_visible</span>(False)</span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a>    ax.spines[<span class="st">'right'</span>]<span class="fu">.set_visible</span>(False)</span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.tight_layout</span>()</span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.show</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="an-example-of-an-analysis-you-could-do-with-era.compiled" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> An example of an analysis you could do with <code>ERA.Compiled</code></h1>
<p>Lets assume you want to explore the impact of agriculture technologies on Maize yields. ERA only considers treatment comparisons. Each observation encodes a comparison between two treatments.</p>
<p>The following principles assisted in consistent comparisons of treatment outcomes across studies:</p>
<ol type="1">
<li><p>New versus common treatment. A new technology versus a control, which is typically farmers’ conventional technologies.</p></li>
<li><p>Additive complexity. An improved technology / set of technologies to a simpler option, e.g., agroforestry+fertilizer vs agroforestry alone.</p></li>
<li><p>Agriculture to agriculture. Agricultural systems are never compared to natural systems. For example, we can compare soil organic carbon in mulch versus no mulch systems, but not versus natural or semi-natural vegetation.</p></li>
<li><p>Same implementation levels. Comparisons were made within the same ‘level’ of implementation. For example, 40 kg N/ha was compared with other treatments using 40 kgN/ha but not 20 kgN/ha.</p></li>
<li><p>All treatment details. All major characteristics of the treatments were coded, including seed variety, tillage type, weed control, tree species, and chemical applications, among others, up to 13 labels per treatment.</p></li>
<li><p>In-year comparisons. Only comparisons of treatments and outcomes that occur in the same year or season were included. Residual effects, e.g., of phosphorus applied in year one with yield in year three, were not recorded.</p></li>
<li><p>Include all possible treatments. All treatments, and their component technologies, in a study were coded if they formed part of valid comparison.</p></li>
</ol>
<p>Based this, a response ratio is calculated by MeanT/MeanC</p>
<p><code>R code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="ot">&lt;-</span> ERA.Compiled_ag <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Product <span class="sc">==</span> <span class="st">"Maize"</span>, Out.SubInd <span class="sc">==</span> <span class="st">"Crop Yield"</span>, <span class="sc">!</span><span class="fu">is.na</span>(yi))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Keep only practices with at least 3 values and some variation</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>valid_practices <span class="ot">&lt;-</span> filtered_data <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PrName) <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">3</span>, <span class="fu">sd</span>(yi, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Get top 5 PrName by number of rows</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>top_practices <span class="ot">&lt;-</span> valid_practices <span class="sc">%&gt;%</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(PrName, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(PrName)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Final filtered data</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>ridge_data <span class="ot">&lt;-</span> valid_practices <span class="sc">%&gt;%</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PrName <span class="sc">%in%</span> top_practices)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Plot</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>ridge_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(ridge_data, <span class="fu">aes</span>(<span class="at">x =</span> yi, <span class="at">y =</span> PrName, <span class="at">fill =</span> ..x..)) <span class="sc">+</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="at">scale =</span> <span class="dv">3</span>, <span class="at">rel_min_height =</span> <span class="fl">0.01</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> yi),</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> mean,</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">18</span>,</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Response Ratios for Maize - Crop Yield"</span>,</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Response Ratio (yi)"</span>,</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Practice"</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>ridge_plot</span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Picking joint bandwidth of 0.0954</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ERA-User-Guide_files/figure-html/r_analysis-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>python code:</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Python equivalent code:</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>import pandas as pd</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>import numpy as np</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>import matplotlib.pyplot as plt</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>import joypy</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Filter data for Product "Maize", Out.SubInd "Crop Yield", and non-missing yi</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="ot">=</span> ERA_Compiled_ag[</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    (ERA_Compiled_ag[<span class="st">'Product'</span>] <span class="sc">==</span> <span class="st">"Maize"</span>) <span class="sc">&amp;</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    (ERA_Compiled_ag[<span class="st">'Out.SubInd'</span>] <span class="sc">==</span> <span class="st">"Crop Yield"</span>) <span class="sc">&amp;</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    (ERA_Compiled_ag[<span class="st">'yi'</span>]<span class="fu">.notna</span>())</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>]<span class="fu">.copy</span>()</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Keep only practices with at least 3 values and some variation in yi</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>def <span class="fu">valid_group</span>(df)<span class="sc">:</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span> (<span class="fu">len</span>(df) <span class="sc">&gt;=</span> <span class="dv">3</span>) <span class="fu">and</span> (df[<span class="st">'yi'</span>]<span class="fu">.std</span>(<span class="at">ddof=</span><span class="dv">0</span>) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>valid_practices <span class="ot">=</span> <span class="fu">filtered_data.groupby</span>(<span class="st">'PrName'</span>)<span class="fu">.filter</span>(valid_group)</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Get top 5 PrName by number of rows</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>top_practices <span class="ot">=</span> (valid_practices[<span class="st">'PrName'</span>]</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">.value_counts</span>()</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">.nlargest</span>(<span class="dv">5</span>)</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>                 .index</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">.tolist</span>())</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Final filtered data</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>ridge_data <span class="ot">=</span> valid_practices[valid_practices[<span class="st">'PrName'</span>]<span class="fu">.isin</span>(top_practices)]<span class="fu">.copy</span>()</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Plot ridgeline plot using joypy</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the mean of yi for each practice for summary points</span></span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>mean_values <span class="ot">=</span> <span class="fu">ridge_data.groupby</span>(<span class="st">'PrName'</span>)[<span class="st">'yi'</span>]<span class="fu">.mean</span>()</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the ridgeline plot</span></span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="ot">=</span> <span class="fu">joypy.joyplot</span>(</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>    ridge_data,</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">by=</span><span class="st">"PrName"</span>,</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">column=</span><span class="st">"yi"</span>,</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">kind=</span><span class="st">"kde"</span>,</span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">overlap=</span><span class="dv">1</span>,</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">colormap=</span>plt.cm.viridis,</span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">linewidth=</span><span class="dv">1</span>,</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">linecolor=</span><span class="st">"black"</span>,</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">fade=</span>True,</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">figsize=</span>(<span class="dv">10</span>, <span class="dv">6</span>)</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a vertical dashed line at x = 0</span></span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.axvline</span>(<span class="at">x=</span><span class="dv">0</span>, <span class="at">linestyle=</span><span class="st">"dashed"</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Add mean points for each practice</span></span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Joypy orders groups alphabetically by default; get that order for accurate y positions</span></span>
<span id="cb26-55"><a href="#cb26-55" aria-hidden="true" tabindex="-1"></a>practices <span class="ot">=</span> <span class="fu">sorted</span>(ridge_data[<span class="st">'PrName'</span>]<span class="fu">.unique</span>())</span>
<span id="cb26-56"><a href="#cb26-56" aria-hidden="true" tabindex="-1"></a>y_positions <span class="ot">=</span> {pr<span class="sc">:</span> i <span class="cf">for</span> i, pr <span class="cf">in</span> <span class="fu">enumerate</span>(practices)}</span>
<span id="cb26-57"><a href="#cb26-57" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pr, mean_val <span class="cf">in</span> <span class="fu">mean_values.items</span>()<span class="sc">:</span></span>
<span id="cb26-58"><a href="#cb26-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The y position for each group corresponds to its index in the sorted list</span></span>
<span id="cb26-59"><a href="#cb26-59" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">=</span> y_positions[pr]</span>
<span id="cb26-60"><a href="#cb26-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plt.plot</span>(mean_val, y, <span class="at">marker=</span><span class="st">"D"</span>, <span class="at">color=</span><span class="st">"black"</span>, <span class="at">markersize=</span><span class="dv">6</span>)</span>
<span id="cb26-61"><a href="#cb26-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-62"><a href="#cb26-62" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.title</span>(<span class="st">"Response Ratios for Maize - Crop Yield"</span>, <span class="at">fontsize=</span><span class="dv">14</span>, <span class="at">fontweight=</span><span class="st">"bold"</span>)</span>
<span id="cb26-63"><a href="#cb26-63" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.xlabel</span>(<span class="st">"Response Ratio (yi)"</span>, <span class="at">fontsize=</span><span class="dv">12</span>, <span class="at">fontweight=</span><span class="st">"bold"</span>)</span>
<span id="cb26-64"><a href="#cb26-64" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.ylabel</span>(<span class="st">"Practice"</span>, <span class="at">fontsize=</span><span class="dv">12</span>, <span class="at">fontweight=</span><span class="st">"bold"</span>)</span>
<span id="cb26-65"><a href="#cb26-65" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.tight_layout</span>()</span>
<span id="cb26-66"><a href="#cb26-66" aria-hidden="true" tabindex="-1"></a><span class="fu">plt.show</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="for-more-details-or-to-explore-collaborative-opportunities" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> For more details or to explore collaborative opportunities:</h1>
<p>Please visit our GitHub repository: <a href="https://github.com/ERAgriculture/ERA_Agronomy.git" class="uri">https://github.com/ERAgriculture/ERA_Agronomy.git</a> or our development GitHub: <a href="https://github.com/CIAT/ERA_dev" class="uri">https://github.com/CIAT/ERA_dev</a></p>
<p>Or contact: Peter Steward (Scientist II): <a href="mailto:p.steward@cgiar.org" class="email">p.steward@cgiar.org</a><br>
Namita Joshi (Senior Research Associate): <a href="mailto:n.joshi@cgiar.org" class="email">n.joshi@cgiar.org</a><br>
Todd Rosenstock (Principal Scientist): <a href="mailto:t.rosenstock@cgiar.org" class="email">t.rosenstock@cgiar.org</a></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>
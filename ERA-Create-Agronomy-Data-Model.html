<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alliance of Bioversity International &amp; CIAT">
<meta name="dcterms.date" content="2025-04-01">

<title>Creating the ERA Data Model</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="ERA-Create-Agronomy-Data-Model_files/libs/clipboard/clipboard.min.js"></script>
<script src="ERA-Create-Agronomy-Data-Model_files/libs/quarto-html/quarto.js"></script>
<script src="ERA-Create-Agronomy-Data-Model_files/libs/quarto-html/popper.min.js"></script>
<script src="ERA-Create-Agronomy-Data-Model_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ERA-Create-Agronomy-Data-Model_files/libs/quarto-html/anchor.min.js"></script>
<link href="ERA-Create-Agronomy-Data-Model_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ERA-Create-Agronomy-Data-Model_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ERA-Create-Agronomy-Data-Model_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ERA-Create-Agronomy-Data-Model_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ERA-Create-Agronomy-Data-Model_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">1</span> Overview</a></li>
  <li><a href="#packages-and-setup" id="toc-packages-and-setup" class="nav-link" data-scroll-target="#packages-and-setup"><span class="header-section-number">2</span> Packages and Setup</a></li>
  <li><a href="#download-agronomic-dataset" id="toc-download-agronomic-dataset" class="nav-link" data-scroll-target="#download-agronomic-dataset"><span class="header-section-number">3</span> Download Agronomic Dataset</a></li>
  <li><a href="#download-and-import-master-vocabulary" id="toc-download-and-import-master-vocabulary" class="nav-link" data-scroll-target="#download-and-import-master-vocabulary"><span class="header-section-number">4</span> Download and Import Master Vocabulary</a></li>
  <li><a href="#clean-and-harmonize-tables" id="toc-clean-and-harmonize-tables" class="nav-link" data-scroll-target="#clean-and-harmonize-tables"><span class="header-section-number">5</span> Clean and Harmonize Tables</a></li>
  <li><a href="#create-data-model" id="toc-create-data-model" class="nav-link" data-scroll-target="#create-data-model"><span class="header-section-number">6</span> Create Data Model</a></li>
  <li><a href="#save-data-model" id="toc-save-data-model" class="nav-link" data-scroll-target="#save-data-model"><span class="header-section-number">7</span> Save Data Model</a></li>
  <li><a href="#show-data-model" id="toc-show-data-model" class="nav-link" data-scroll-target="#show-data-model"><span class="header-section-number">8</span> Show Data Model</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Creating the ERA Data Model</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Alliance of Bioversity International &amp; CIAT </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div style="display: flex; align-items: center; gap: 20px;">
<p><img src="images/Era_Logo_FINAL_Colour.png" width="100" style="margin-top: 10px;"></p>
</div>
<section id="overview" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Overview</h1>
<p>This guide describes how to build a structured data model for the agronomic component of the Evidence for Resilient Agriculture (ERA) dataset using <code>dm</code>. It includes steps for downloading, cleaning, and linking the data tables into a coherent data model object.</p>
</section>
<section id="packages-and-setup" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Packages and Setup</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"pacman"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dm, data.table, DiagrammeR, miceadds, readxl, s3fs,htmlwidgets,DiagrammeR,DiagrammeRsvg,rsvg,htmltools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dl_dir <span class="ot">&lt;-</span> <span class="st">"downloaded_data"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(dl_dir)) <span class="fu">dir.create</span>(dl_dir, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="download-agronomic-dataset" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Download Agronomic Dataset</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">&lt;-</span> s3fs<span class="sc">::</span>S3FileSystem<span class="sc">$</span><span class="fu">new</span>(<span class="at">anonymous =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>era_s3 <span class="ot">&lt;-</span> <span class="st">"s3://digital-atlas/era"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>all_files <span class="ot">&lt;-</span> s3<span class="sc">$</span><span class="fu">dir_ls</span>(<span class="fu">file.path</span>(era_s3, <span class="st">"data"</span>))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>target_file <span class="ot">&lt;-</span> <span class="fu">tail</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grep</span>(<span class="st">".RData"</span>, <span class="fu">grep</span>(<span class="st">"agronomic"</span>, all_files, <span class="at">value =</span> <span class="cn">TRUE</span>), <span class="at">value =</span> <span class="cn">TRUE</span>),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>save_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">getwd</span>(), dl_dir, <span class="fu">basename</span>(target_file))</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(save_path)) {</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  s3<span class="sc">$</span><span class="fu">file_download</span>(target_file, save_path, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>agronomic_data <span class="ot">&lt;-</span> miceadds<span class="sc">::</span><span class="fu">load.Rdata2</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">basename</span>(save_path),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="fu">dirname</span>(save_path)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="download-and-import-master-vocabulary" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Download and Import Master Vocabulary</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>era_vocab_url <span class="ot">&lt;-</span> <span class="st">"https://github.com/peetmate/era_codes/raw/main/era_master_sheet.xlsx"</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>era_vocab_local <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dl_dir, <span class="fu">basename</span>(era_vocab_url))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(era_vocab_local)){</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(era_vocab_url, era_vocab_local, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>sheet_names <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">excel_sheets</span>(era_vocab_local)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>sheet_names <span class="ot">&lt;-</span> sheet_names[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"sheet|Sheet"</span>, sheet_names)]</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>era_master_codes <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  sheet_names,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> <span class="cf">function</span>(x) data.table<span class="sc">::</span><span class="fu">data.table</span>(readxl<span class="sc">::</span><span class="fu">read_excel</span>(era_vocab_local, <span class="at">sheet =</span> x)),</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">USE.NAMES =</span> <span class="cn">TRUE</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="clean-and-harmonize-tables" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Clean and Harmonize Tables</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"Prod.Out"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]  </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(data,<span class="fu">c</span>(<span class="st">"P.Product.Subtype"</span>,<span class="st">"P.Product"</span>),<span class="fu">c</span>(<span class="st">"Product.Subtype"</span>,<span class="st">"Product.Simple"</span>),<span class="at">skip_absent =</span> T)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"MT.Out"</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]  </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(data,<span class="fu">c</span>(<span class="st">"P.Product"</span>),<span class="fu">c</span>(<span class="st">"Product.Simple"</span>),<span class="at">skip_absent =</span> T)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span><span class="fu">merge</span>(data,agronomic_data<span class="sc">$</span>Prod.Out[,.(B.Code,Product.Simple,Product.Subtype)],<span class="at">by=</span><span class="fu">c</span>(<span class="st">"B.Code"</span>,<span class="st">"Product.Simple"</span>))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"Var.Out"</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]  </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(data,<span class="fu">c</span>(<span class="st">"V.Product"</span>),<span class="fu">c</span>(<span class="st">"Product.Simple"</span>),<span class="at">skip_absent =</span> T)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span><span class="fu">merge</span>(data,agronomic_data<span class="sc">$</span>Prod.Out[,.(B.Code,Product.Simple,Product.Subtype)],<span class="at">by=</span><span class="fu">c</span>(<span class="st">"B.Code"</span>,<span class="st">"Product.Simple"</span>))</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"Chems.Out"</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]  </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(data,<span class="fu">c</span>(<span class="st">"Times"</span>),<span class="fu">c</span>(<span class="st">"Time"</span>),<span class="at">skip_absent =</span> T)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>era_master_codes<span class="sc">$</span>vars</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(data,<span class="fu">c</span>(<span class="st">"V.Product"</span>),<span class="fu">c</span>(<span class="st">"Product.Simple"</span>),<span class="at">skip_absent =</span> T)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>data[,V.Var<span class="sc">:</span><span class="er">=</span>V.Var1][,V.Species<span class="sc">:</span><span class="er">=</span>V.Species1][,<span class="fu">c</span>(<span class="st">"V.Var1"</span>,<span class="st">"V.Species1"</span>,<span class="st">"V.Subspecies1"</span>)<span class="sc">:</span><span class="er">=</span><span class="cn">NULL</span>]</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>era_master_codes<span class="sc">$</span>vars<span class="ot">&lt;-</span>data</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>era_master_codes<span class="sc">$</span>chem</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>chem<span class="ot">&lt;-</span>data[,.(AOM,C.Type...<span class="dv">3</span>,C.Type.AI,C.Name,C.Is.Name.Commercial,C.AI)]</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(chem,<span class="st">"C.Type...3"</span>,<span class="st">"C.Type"</span>,<span class="at">skip_absent =</span> T)</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>chem<span class="ot">&lt;-</span>chem[<span class="sc">!</span><span class="fu">is.na</span>(C.Type)]</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>chem.comm<span class="ot">&lt;-</span>data[,.(C.Name.Commercial,C.Name.AI...<span class="dv">10</span>,C.Animal,C.Crop,C.Is.Chem,C.Type...<span class="dv">14</span>)]</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(chem.comm,<span class="fu">c</span>(<span class="st">"C.Name.AI...10"</span>,<span class="st">"C.Type...14"</span>),<span class="fu">c</span>(<span class="st">"C.Name.AI"</span>,<span class="st">"C.Type"</span>),<span class="at">skip_absent =</span> T)</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>chem.comm<span class="ot">&lt;-</span>chem.comm[<span class="sc">!</span><span class="fu">is.na</span>(C.Name.Commercial)]</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>chem.ai<span class="ot">&lt;-</span>data[,.(C.Name.AI...<span class="dv">16</span>,C.Name.AI.CHEBI,C.Tname.AI.Type_gpt)]</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(chem.ai,<span class="fu">c</span>(<span class="st">"C.Name.AI...16"</span>),<span class="fu">c</span>(<span class="st">"C.Name.AI"</span>))</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>chem.ai<span class="ot">&lt;-</span>chem.ai[<span class="sc">!</span><span class="fu">is.na</span>(C.Name.AI)]</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>era_master_codes<span class="sc">$</span>chem<span class="ot">&lt;-</span>chem</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>era_master_codes<span class="sc">$</span>chem.ai<span class="ot">&lt;-</span>chem.ai</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>era_master_codes<span class="sc">$</span>chem.comm<span class="ot">&lt;-</span>chem.comm</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"Out.Out"</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(data,<span class="st">"Out.Subind"</span>,<span class="st">"Subindicator"</span>,<span class="at">skip_absent =</span> T)</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"Res.Method"</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(data,<span class="st">"M.Tree"</span>,<span class="st">"Tree.Latin.Name"</span>,<span class="at">skip_absent =</span> T)</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"AF.Trees"</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(data,<span class="st">"AF.Tree"</span>,<span class="st">"Tree.Latin.Name"</span>,<span class="at">skip_absent =</span> T)</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Dev.Note: Probably needs converting from wide to long format</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"Int.Out"</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>data[,T.Name<span class="sc">:</span><span class="er">=</span>IN.Level.Name] <span class="co"># Note this multiple T.Names is concatenated with a "..."</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span><span class="st">"Rot.Seq"</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>agronomic_data[[tab]]</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>data[<span class="sc">!</span><span class="fu">is.na</span>(R.Prod2)<span class="sc">|!</span><span class="fu">is.na</span>(IN.Code),IN.Level.Name<span class="sc">:</span><span class="er">=</span>R.Treatment]</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>data[<span class="fu">is.na</span>(R.Prod2) <span class="sc">&amp;</span> <span class="fu">is.na</span>(IN.Code),T.Name<span class="sc">:</span><span class="er">=</span>R.Treatment]</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>agronomic_data[[tab]] <span class="ot">&lt;-</span>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-data-model" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Create Data Model</h1>
<ul>
<li>Ensure consistent key naming and uniqueness before setting PKs/FKs.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>era_agronomy.model <span class="ot">&lt;-</span> <span class="fu">dm</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Pub.Out =</span> agronomic_data<span class="sc">$</span>Pub.Out,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Site.Out =</span> agronomic_data<span class="sc">$</span>Site.Out,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Times.Out =</span> agronomic_data<span class="sc">$</span>Times.Out,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Times.Clim =</span> agronomic_data<span class="sc">$</span>Times.Clim,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Prod.Out =</span> agronomic_data<span class="sc">$</span>Prod.Out,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ExpD.Out =</span> agronomic_data<span class="sc">$</span>ExpD.Out,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Var.Out =</span> agronomic_data<span class="sc">$</span>Var.Out,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Till.Out =</span> agronomic_data<span class="sc">$</span>Till.Out,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Plant.Out =</span> agronomic_data<span class="sc">$</span>Plant.Out,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Plant.Method =</span> agronomic_data<span class="sc">$</span>Plant.Method,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">PD.Codes =</span> agronomic_data<span class="sc">$</span>PD.Codes,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">PD.Out =</span> agronomic_data<span class="sc">$</span>PD.Out,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">Chems.Code =</span> agronomic_data<span class="sc">$</span>Chems.Code,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">Chems.Out =</span> agronomic_data<span class="sc">$</span>Chems.Out,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a> <span class="co"># Chems.AI = agronomic_data$Chems.AI,</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">Res.Out =</span> agronomic_data<span class="sc">$</span>Res.Out,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">Res.Method =</span> agronomic_data<span class="sc">$</span>Res.Method,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a> <span class="co"># Res.Comp = agronomic_data$Res.Comp,</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fert.Out =</span> agronomic_data<span class="sc">$</span>Fert.Out,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fert.Method =</span> agronomic_data<span class="sc">$</span>Fert.Method,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a> <span class="co"># Fert.Comp =  agronomic_data$Fert.Comp,</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">Har.Out =</span> agronomic_data<span class="sc">$</span>Har.Out,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">pH.Out =</span> agronomic_data<span class="sc">$</span>pH.Out,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">pH.Method =</span> agronomic_data<span class="sc">$</span>pH.Method,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">WH.Out =</span> agronomic_data<span class="sc">$</span>WH.Out,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">AF.Out =</span> agronomic_data<span class="sc">$</span>AF.Out,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">AF.Trees=</span>agronomic_data<span class="sc">$</span>AF.Trees,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">Weed.Out=</span>agronomic_data<span class="sc">$</span>Weed.Out,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">Other.Out=</span>agronomic_data<span class="sc">$</span>Other.Out,</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">Irrig.Codes=</span>agronomic_data<span class="sc">$</span>Irrig.Codes,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">Irrig.Method=</span>agronomic_data<span class="sc">$</span>Irrig.Method,</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">MT.Out =</span> agronomic_data<span class="sc">$</span>MT.Out,</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">Int.Out =</span> agronomic_data<span class="sc">$</span>Int.Out,</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">Rot.Out =</span> agronomic_data<span class="sc">$</span>Rot.Out,</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">Rot.Seq =</span> agronomic_data<span class="sc">$</span>Rot.Seq,</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">Rot.Seq.Summ =</span> agronomic_data<span class="sc">$</span>Rot.Seq.Summ,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">Out.Out =</span> agronomic_data<span class="sc">$</span>Out.Out,</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">Data.Out=</span>agronomic_data<span class="sc">$</span>Data.Out,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.fert =</span> era_master_codes<span class="sc">$</span>fert,</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.prod  =</span> era_master_codes<span class="sc">$</span>prod,</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.vars =</span> era_master_codes<span class="sc">$</span>vars,</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.chem =</span> era_master_codes<span class="sc">$</span>chem,</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.residues =</span> era_master_codes<span class="sc">$</span>residues,</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.trees =</span> era_master_codes<span class="sc">$</span>trees,</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.out =</span> era_master_codes<span class="sc">$</span>out,</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.prac =</span> era_master_codes<span class="sc">$</span>prac) <span class="sc">|&gt;</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># PRIMARY KEYS</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Pub.Out, B.Code) <span class="sc">|&gt;</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Site.Out, <span class="fu">c</span>(B.Code,Site.ID))<span class="sc">|&gt;</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Times.Out, <span class="fu">c</span>(B.Code,Time)) <span class="sc">|&gt;</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Times.Clim, <span class="fu">c</span>(B.Code,Site.ID,Time)) <span class="sc">|&gt;</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Prod.Out, <span class="fu">c</span>(B.Code,Product.Subtype,Product.Simple)) <span class="sc">|&gt;</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(ExpD.Out, B.Code) <span class="sc">|&gt;</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Var.Out, <span class="fu">c</span>(B.Code,V.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Till.Out, <span class="fu">c</span>(B.Code,Till.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Plant.Out, <span class="fu">c</span>(B.Code,P.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Plant.Method, <span class="fu">c</span>(B.Code,P.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(PD.Codes, <span class="fu">c</span>(B.Code,PD.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(PD.Out, <span class="fu">c</span>(B.Code,PD.Level.Name,Site.ID ,Time)) <span class="sc">|&gt;</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Chems.Code, <span class="fu">c</span>(B.Code,C.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Chems.Out, <span class="fu">c</span>(B.Code,C.Level.Name,C.Type,C.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dm_add_pk(Chems.AI, c(B.Code,C.Name)) |&gt;</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Fert.Out, <span class="fu">c</span>(B.Code,F.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Fert.Method, <span class="fu">c</span>(B.Code,F.Level.Name,F.Type)) <span class="sc">|&gt;</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dm_add_pk(Fert.Comp, c(B.Code,F.Type)) |&gt;</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Res.Out, <span class="fu">c</span>(B.Code,M.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Res.Method, <span class="fu">c</span>(B.Code,M.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dm_add_pk(Res.Comp, c(B.Code,M.Tree,M.Material)) |&gt;</span></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Har.Out, <span class="fu">c</span>(B.Code,H.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(pH.Out, <span class="fu">c</span>(B.Code,pH.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(pH.Method, <span class="fu">c</span>(B.Code,pH.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(WH.Out, <span class="fu">c</span>(B.Code,WH.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(AF.Out, <span class="fu">c</span>(B.Code,AF.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(AF.Trees, <span class="fu">c</span>(B.Code,AF.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Weed.Out, <span class="fu">c</span>(B.Code,W.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Other.Out, <span class="fu">c</span>(B.Code,O.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Irrig.Codes, <span class="fu">c</span>(B.Code,I.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Irrig.Method, <span class="fu">c</span>(B.Code,I.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(MT.Out, <span class="fu">c</span>(T.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Int.Out, <span class="fu">c</span>(IN.Level.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Rot.Out, <span class="fu">c</span>(R.Level.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Rot.Seq, <span class="fu">c</span>(R.Level.Name,T.Name,IN.Level.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Rot.Seq.Summ, <span class="fu">c</span>(R.Level.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Out.Out, <span class="fu">c</span>(Out.Code.Joined,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Data.Out, <span class="fu">c</span>(Site.ID,Time,T.Name,IN.Level.Name,R.Level.Name,Out.Code.Joined,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.fert , F.Type) <span class="sc">|&gt;</span></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.prod, <span class="fu">c</span>(Product.Subtype,Product.Simple)) <span class="sc">|&gt;</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.vars, <span class="fu">c</span>(Product.Simple,V.Var)) <span class="sc">|&gt;</span></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.chem, <span class="fu">c</span>(C.Type,C.Name)) <span class="sc">|&gt;</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.residues, M.Material) <span class="sc">|&gt;</span></span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.trees, Tree.Latin.Name) <span class="sc">|&gt;</span></span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.out, Subindicator) <span class="sc">|&gt;</span></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.prac, Subpractice) <span class="sc">|&gt;</span></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>  <span class="co"># FOREIGN KEYS</span></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Site.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Times.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Times.Clim, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Times.Clim, <span class="fu">c</span>(B.Code,Site.ID), Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Prod.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Prod.Out, <span class="fu">c</span>(Product.Subtype,Product.Simple), era_master_codes.prod) <span class="sc">|&gt;</span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(ExpD.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Plant.Out, B.Code,Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Plant.Method, <span class="fu">c</span>(B.Code,P.Level.Name),Plant.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Var.Out, <span class="fu">c</span>(Product.Simple,V.Var),era_master_codes.vars) <span class="sc">|&gt;</span></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Var.Out, <span class="fu">c</span>(B.Code,Product.Subtype,Product.Simple), Prod.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Var.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Till.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Till.Out, <span class="fu">c</span>(B.Code,Site.ID), Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Till.Out, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(PD.Codes, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(PD.Out, <span class="fu">c</span>(B.Code,PD.Level.Name), PD.Codes) <span class="sc">|&gt;</span></span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(PD.Out, <span class="fu">c</span>(B.Code,Site.ID), Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(PD.Out, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Code, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Out, <span class="fu">c</span>(B.Code,C.Level.Name), Chems.Code) <span class="sc">|&gt;</span></span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Out, <span class="fu">c</span>(B.Code,Site.ID), Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Out, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Out, <span class="fu">c</span>(C.Type,C.Name), era_master_codes.chem) <span class="sc">|&gt;</span></span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Method, <span class="fu">c</span>(B.Code,F.Level.Name), Fert.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Method, F.Type, era_master_codes.fert ) <span class="sc">|&gt;</span></span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Method, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Method, <span class="fu">c</span>(B.Code,Site.ID), Site.Out ) <span class="sc">|&gt;</span></span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, <span class="fu">c</span>(B.Code,M.Level.Name), Res.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, M.Material, era_master_codes.residues) <span class="sc">|&gt;</span></span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, Tree.Latin.Name, era_master_codes.trees) <span class="sc">|&gt;</span></span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, <span class="fu">c</span>(B.Code,Site.ID), Site.Out ) <span class="sc">|&gt;</span></span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(pH.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(pH.Method, <span class="fu">c</span>(B.Code,pH.Level.Name), pH.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(WH.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(AF.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(AF.Trees, <span class="fu">c</span>(B.Code,AF.Level.Name), AF.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(AF.Trees, Tree.Latin.Name, era_master_codes.trees) <span class="sc">|&gt;</span></span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Weed.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Other.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Irrig.Codes, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Irrig.Method, <span class="fu">c</span>(B.Code,I.Level.Name), Irrig.Codes) <span class="sc">|&gt;</span>           </span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Irrig.Method, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Irrig.Method, <span class="fu">c</span>(B.Code,Site.ID), Site.Out ) <span class="sc">|&gt;</span></span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,Product.Subtype,Product.Simple), Prod.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,F.Level.Name), Fert.Out) <span class="sc">|&gt;</span> </span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,P.Level.Name), Plant.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,V.Level.Name), Var.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,Till.Level.Name), Till.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,PD.Level.Name), PD.Codes) <span class="sc">|&gt;</span></span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,C.Level.Name), Chems.Code) <span class="sc">|&gt;</span></span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,M.Level.Name), Res.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,H.Level.Name), Har.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,pH.Level.Name), pH.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,WH.Level.Name), WH.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,AF.Level.Name), AF.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,W.Level.Name), Weed.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,O.Level.Name), Other.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,I.Level.Name), Irrig.Codes) <span class="sc">|&gt;</span></span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Int.Out, <span class="fu">c</span>(B.Code,T.Name),MT.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq, <span class="fu">c</span>(B.Code,T.Name),MT.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq, <span class="fu">c</span>(B.Code,IN.Level.Name),Int.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq, <span class="fu">c</span>(B.Code,R.Level.Name),Rot.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq, <span class="fu">c</span>(B.Code,Time),Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-165"><a href="#cb7-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq.Summ, <span class="fu">c</span>(B.Code,R.Level.Name),Rot.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-166"><a href="#cb7-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Out.Out, Subindicator,era_master_codes.out) <span class="sc">|&gt;</span></span>
<span id="cb7-167"><a href="#cb7-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,Out.Code.Joined),Out.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-168"><a href="#cb7-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,Site.ID),Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-169"><a href="#cb7-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,Time),Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-170"><a href="#cb7-170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,T.Name),MT.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-171"><a href="#cb7-171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,IN.Level.Name),Int.Out) <span class="sc">|&gt;</span></span>
<span id="cb7-172"><a href="#cb7-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,R.Level.Name),Rot.Out) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="save-data-model" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Save Data Model</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>save_name <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".RData"</span>, <span class="st">"_model.rds"</span>, <span class="fu">basename</span>(target_file))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>save_file <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dl_dir, save_name)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(era_agronomy.model, <span class="at">file =</span> save_file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="show-data-model" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Show Data Model</h1>
<ul>
<li>The data model enables efficient checking of table linkages and enforcement of relational structure.</li>
<li>For a visualisation, you can use:</li>
</ul>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> dm<span class="sc">::</span><span class="fu">dm_draw</span>(era_agronomy.model)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>svg <span class="ot">&lt;-</span> <span class="fu">export_svg</span>(g)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(svg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->
&lt;!DOCTYPE svg PUBLIC -//W3C//DTD SVG 1.1//EN http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&gt; <!-- Generated by graphviz version 2.40.1 (20161225.0304)
 --> <!-- Title: %0 Pages: 1 --> <svg width="1723pt" height="1937pt" viewbox="0.00 0.00 1723.00 1936.53" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"> <g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1932.5271)">
<title>
%0
</title>
<g id="a_graph0"><a title="Data Model" href=""> <polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1932.5271 1719,-1932.5271 1719,4 -4,4"></polygon> </a> </g> <!-- AF.Out --> <g id="AF.Out" class="node">
<title>
AF.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1295,-159.909 1295,-179.909 1438,-179.909 1438,-159.909 1295,-159.909"></polygon> <text text-anchor="start" x="1345.3068" y="-165.309" font-family="Times,serif" font-size="14.00" fill="#000000">AF.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1295,-139.909 1295,-159.909 1438,-159.909 1438,-139.909 1295,-139.909"></polygon> <text text-anchor="start" x="1297" y="-145.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1295,-119.909 1295,-139.909 1438,-139.909 1438,-119.909 1295,-119.909"></polygon> <text text-anchor="start" x="1296.7121" y="-126.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, AF.Level.Name</text> <polygon fill="none" stroke="#555555" points="1293.5,-118.909 1293.5,-180.909 1438.5,-180.909 1438.5,-118.909 1293.5,-118.909"></polygon> </g> <!-- Pub.Out --> <g id="Pub.Out" class="node">
<title>
Pub.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1594,-858.909 1594,-878.909 1644,-878.909 1644,-858.909 1594,-858.909"></polygon> <text text-anchor="start" x="1595.8601" y="-864.309" font-family="Times,serif" font-size="14.00" fill="#000000">Pub.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1594,-838.909 1594,-858.909 1644,-858.909 1644,-838.909 1594,-838.909"></polygon> <text text-anchor="start" x="1596" y="-845.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="none" stroke="#555555" points="1593,-837.909 1593,-879.909 1645,-879.909 1645,-837.909 1593,-837.909"></polygon> </g> <!-- AF.Out&#45;&gt;Pub.Out --> <g id="AF.Out_1" class="edge">
<title>
AF.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1438,-149.909C1563.1817,-149.909 1618.5532,-5.4707 1618.9973,-828.8704"></path> <polygon fill="#555555" stroke="#555555" points="1615.4972,-828.9099 1619,-838.909 1622.4972,-828.908 1615.4972,-828.9099"></polygon> </g> <!-- AF.Trees --> <g id="AF.Trees" class="node">
<title>
AF.Trees
</title>
<polygon fill="#efebdd" stroke="transparent" points="1017,-159.909 1017,-179.909 1160,-179.909 1160,-159.909 1017,-159.909"></polygon> <text text-anchor="start" x="1062.2619" y="-165.309" font-family="Times,serif" font-size="14.00" fill="#000000">AF.Trees</text> <polygon fill="#ffffff" stroke="transparent" points="1017,-139.909 1017,-159.909 1160,-159.909 1160,-139.909 1017,-139.909"></polygon> <text text-anchor="start" x="1019" y="-145.309" font-family="Times,serif" font-size="14.00" fill="#444444">Tree.Latin.Name</text> <polygon fill="#ffffff" stroke="transparent" points="1017,-119.909 1017,-139.909 1160,-139.909 1160,-119.909 1017,-119.909"></polygon> <text text-anchor="start" x="1018.7121" y="-126.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, AF.Level.Name</text> <polygon fill="none" stroke="#555555" points="1015.5,-118.909 1015.5,-180.909 1160.5,-180.909 1160.5,-118.909 1015.5,-118.909"></polygon> </g> <!-- AF.Trees&#45;&gt;AF.Out --> <g id="AF.Trees_1" class="edge">
<title>
AF.Trees:B.Code, AF.Level.Name-&gt;AF.Out:B.Code, AF.Level.Name
</title>
<path fill="none" stroke="#555555" d="M1160,-129.909C1216.4844,-129.909 1233.0877,-129.909 1284.8985,-129.909"></path> <polygon fill="#555555" stroke="#555555" points="1285,-133.4091 1295,-129.909 1285,-126.4091 1285,-133.4091"></polygon> </g> <!-- era_master_codes.trees --> <g id="era_master_codes.trees" class="node">
<title>
era_master_codes.trees
</title>
<polygon fill="#efebdd" stroke="transparent" points="1299,-368.909 1299,-388.909 1433,-388.909 1433,-368.909 1299,-368.909"></polygon> <text text-anchor="start" x="1300.8979" y="-374.309" font-family="Times,serif" font-size="14.00" fill="#000000">era_master_codes.trees</text> <polygon fill="#ffffff" stroke="transparent" points="1299,-348.909 1299,-368.909 1433,-368.909 1433,-348.909 1299,-348.909"></polygon> <text text-anchor="start" x="1301" y="-355.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">Tree.Latin.Name</text> <polygon fill="none" stroke="#555555" points="1298,-347.909 1298,-389.909 1434,-389.909 1434,-347.909 1298,-347.909"></polygon> </g> <!-- AF.Trees&#45;&gt;era_master_codes.trees --> <g id="AF.Trees_2" class="edge">
<title>
AF.Trees:Tree.Latin.Name-&gt;era_master_codes.trees:Tree.Latin.Name
</title>
<path fill="none" stroke="#555555" d="M1160,-149.909C1204.7279,-149.909 1244.577,-338.4682 1245,-338.909 1260.1603,-354.7052 1270.1711,-358.1116 1288.7709,-358.7663"></path> <polygon fill="#555555" stroke="#555555" points="1288.9521,-362.2691 1299,-358.909 1289.0498,-355.2698 1288.9521,-362.2691"></polygon> </g> <!-- Chems.Code --> <g id="Chems.Code" class="node">
<title>
Chems.Code
</title>
<polygon fill="#efebdd" stroke="transparent" points="1299,-1645.909 1299,-1665.909 1434,-1665.909 1434,-1645.909 1299,-1645.909"></polygon> <text text-anchor="start" x="1330.5312" y="-1651.309" font-family="Times,serif" font-size="14.00" fill="#000000">Chems.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1299,-1625.909 1299,-1645.909 1434,-1645.909 1434,-1625.909 1299,-1625.909"></polygon> <text text-anchor="start" x="1301" y="-1631.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1299,-1605.909 1299,-1625.909 1434,-1625.909 1434,-1605.909 1299,-1605.909"></polygon> <text text-anchor="start" x="1300.9884" y="-1612.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, C.Level.Name</text> <polygon fill="none" stroke="#555555" points="1297.5,-1604.909 1297.5,-1666.909 1434.5,-1666.909 1434.5,-1604.909 1297.5,-1604.909"></polygon> </g> <!-- Chems.Code&#45;&gt;Pub.Out --> <g id="Chems.Code_1" class="edge">
<title>
Chems.Code:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1434,-1635.909C1608.9809,-1635.909 1423.0829,-879.3509 1583.967,-849.7979"></path> <polygon fill="#555555" stroke="#555555" points="1584.3479,-853.2779 1594,-848.909 1583.7301,-846.3053 1584.3479,-853.2779"></polygon> </g> <!-- Chems.Out --> <g id="Chems.Out" class="node">
<title>
Chems.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="970,-1665.909 970,-1685.909 1206,-1685.909 1206,-1665.909 970,-1665.909"></polygon> <text text-anchor="start" x="1056.3082" y="-1671.309" font-family="Times,serif" font-size="14.00" fill="#000000">Chems.Out</text> <polygon fill="#ffffff" stroke="transparent" points="970,-1645.909 970,-1665.909 1206,-1665.909 1206,-1645.909 970,-1645.909"></polygon> <text text-anchor="start" x="971.555" y="-1652.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, C.Level.Name, C.Type, C.Name</text> <polygon fill="#ffffff" stroke="transparent" points="970,-1625.909 970,-1645.909 1206,-1645.909 1206,-1625.909 970,-1625.909"></polygon> <text text-anchor="start" x="972" y="-1631.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="#ffffff" stroke="transparent" points="970,-1605.909 970,-1625.909 1206,-1625.909 1206,-1605.909 970,-1605.909"></polygon> <text text-anchor="start" x="972" y="-1611.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="#ffffff" stroke="transparent" points="970,-1585.909 970,-1605.909 1206,-1605.909 1206,-1585.909 970,-1585.909"></polygon> <text text-anchor="start" x="972" y="-1591.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, C.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="970,-1565.909 970,-1585.909 1206,-1585.909 1206,-1565.909 970,-1565.909"></polygon> <text text-anchor="start" x="972" y="-1571.309" font-family="Times,serif" font-size="14.00" fill="#444444">C.Type, C.Name</text> <polygon fill="none" stroke="#555555" points="969,-1564.909 969,-1686.909 1207,-1686.909 1207,-1564.909 969,-1564.909"></polygon> </g> <!-- Chems.Out&#45;&gt;Chems.Code --> <g id="Chems.Out_3" class="edge">
<title>
Chems.Out:B.Code, C.Level.Name-&gt;Chems.Code:B.Code, C.Level.Name
</title>
<path fill="none" stroke="#555555" d="M1206,-1595.909C1244.645,-1595.909 1255.0206,-1612.6192 1288.8068,-1615.4912"></path> <polygon fill="#555555" stroke="#555555" points="1288.865,-1618.9965 1299,-1615.909 1289.1517,-1612.0023 1288.865,-1618.9965"></polygon> </g> <!-- era_master_codes.chem --> <g id="era_master_codes.chem" class="node">
<title>
era_master_codes.chem
</title>
<polygon fill="#efebdd" stroke="transparent" points="1297,-1565.909 1297,-1585.909 1435,-1585.909 1435,-1565.909 1297,-1565.909"></polygon> <text text-anchor="start" x="1298.9505" y="-1571.309" font-family="Times,serif" font-size="14.00" fill="#000000">era_master_codes.chem</text> <polygon fill="#ffffff" stroke="transparent" points="1297,-1545.909 1297,-1565.909 1435,-1565.909 1435,-1545.909 1297,-1545.909"></polygon> <text text-anchor="start" x="1299" y="-1552.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">C.Type, C.Name</text> <polygon fill="none" stroke="#555555" points="1296,-1544.909 1296,-1586.909 1436,-1586.909 1436,-1544.909 1296,-1544.909"></polygon> </g> <!-- Chems.Out&#45;&gt;era_master_codes.chem --> <g id="Chems.Out_4" class="edge">
<title>
Chems.Out:C.Type, C.Name-&gt;era_master_codes.chem:C.Type, C.Name
</title>
<path fill="none" stroke="#555555" d="M1206,-1575.909C1243.6893,-1575.909 1253.8521,-1559.3413 1286.5953,-1556.3643"></path> <polygon fill="#555555" stroke="#555555" points="1287.1626,-1559.8429 1297,-1555.909 1286.8565,-1552.8496 1287.1626,-1559.8429"></polygon> </g> <!-- Site.Out --> <g id="Site.Out" class="node">
<title>
Site.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1320,-1230.909 1320,-1250.909 1413,-1250.909 1413,-1230.909 1320,-1230.909"></polygon> <text text-anchor="start" x="1343.3622" y="-1236.309" font-family="Times,serif" font-size="14.00" fill="#000000">Site.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1320,-1210.909 1320,-1230.909 1413,-1230.909 1413,-1210.909 1320,-1210.909"></polygon> <text text-anchor="start" x="1322" y="-1216.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1320,-1190.909 1320,-1210.909 1413,-1210.909 1413,-1190.909 1320,-1190.909"></polygon> <text text-anchor="start" x="1321.7833" y="-1197.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="none" stroke="#555555" points="1318.5,-1189.909 1318.5,-1251.909 1413.5,-1251.909 1413.5,-1189.909 1318.5,-1189.909"></polygon> </g> <!-- Chems.Out&#45;&gt;Site.Out --> <g id="Chems.Out_1" class="edge">
<title>
Chems.Out:B.Code, Site.ID-&gt;Site.Out:B.Code, Site.ID
</title>
<path fill="none" stroke="#555555" d="M1206,-1635.909C1252.8427,-1635.909 1268.1356,-1253.5848 1311.0346,-1205.7942"></path> <polygon fill="#555555" stroke="#555555" points="1312.8937,-1208.7671 1320,-1200.909 1309.5443,-1202.6204 1312.8937,-1208.7671"></polygon> </g> <!-- Times.Out --> <g id="Times.Out" class="node">
<title>
Times.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1325,-1150.909 1325,-1170.909 1407,-1170.909 1407,-1150.909 1325,-1150.909"></polygon> <text text-anchor="start" x="1336.2549" y="-1156.309" font-family="Times,serif" font-size="14.00" fill="#000000">Times.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1325,-1130.909 1325,-1150.909 1407,-1150.909 1407,-1130.909 1325,-1130.909"></polygon> <text text-anchor="start" x="1327" y="-1136.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1325,-1110.909 1325,-1130.909 1407,-1130.909 1407,-1110.909 1325,-1110.909"></polygon> <text text-anchor="start" x="1326.5319" y="-1117.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="none" stroke="#555555" points="1324,-1109.909 1324,-1171.909 1408,-1171.909 1408,-1109.909 1324,-1109.909"></polygon> </g> <!-- Chems.Out&#45;&gt;Times.Out --> <g id="Chems.Out_2" class="edge">
<title>
Chems.Out:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M1206,-1615.909C1254.5272,-1615.909 1221.3798,-1223.2997 1245,-1180.909 1264.8584,-1145.2695 1278.2195,-1124.5019 1314.6576,-1121.3345"></path> <polygon fill="#555555" stroke="#555555" points="1315.1524,-1124.8172 1325,-1120.909 1314.8645,-1117.8231 1315.1524,-1124.8172"></polygon> </g> <!-- Data.Out --> <g id="Data.Out" class="node">
<title>
Data.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1,-1314.909 1,-1334.909 467,-1334.909 467,-1314.909 1,-1314.909"></polygon> <text text-anchor="start" x="208.5382" y="-1320.309" font-family="Times,serif" font-size="14.00" fill="#000000">Data.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1,-1294.909 1,-1314.909 467,-1314.909 467,-1294.909 1,-1294.909"></polygon> <text text-anchor="start" x="2.8698" y="-1301.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">Site.ID, Time, T.Name, IN.Level.Name, R.Level.Name, Out.Code.Joined, B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1,-1274.909 1,-1294.909 467,-1294.909 467,-1274.909 1,-1274.909"></polygon> <text text-anchor="start" x="3" y="-1280.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="#ffffff" stroke="transparent" points="1,-1254.909 1,-1274.909 467,-1274.909 467,-1254.909 1,-1254.909"></polygon> <text text-anchor="start" x="3" y="-1260.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="#ffffff" stroke="transparent" points="1,-1234.909 1,-1254.909 467,-1254.909 467,-1234.909 1,-1234.909"></polygon> <text text-anchor="start" x="3" y="-1240.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, T.Name</text> <polygon fill="#ffffff" stroke="transparent" points="1,-1214.909 1,-1234.909 467,-1234.909 467,-1214.909 1,-1214.909"></polygon> <text text-anchor="start" x="3" y="-1220.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, IN.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="1,-1194.909 1,-1214.909 467,-1214.909 467,-1194.909 1,-1194.909"></polygon> <text text-anchor="start" x="3" y="-1200.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, R.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="1,-1174.909 1,-1194.909 467,-1194.909 467,-1174.909 1,-1174.909"></polygon> <text text-anchor="start" x="3" y="-1180.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Out.Code.Joined</text> <polygon fill="none" stroke="#555555" points="0,-1173.909 0,-1335.909 468,-1335.909 468,-1173.909 0,-1173.909"></polygon> </g> <!-- Int.Out --> <g id="Int.Out" class="node">
<title>
Int.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="508.5,-1033.909 508.5,-1053.909 648.5,-1053.909 648.5,-1033.909 508.5,-1033.909"></polygon> <text text-anchor="start" x="558.4758" y="-1039.309" font-family="Times,serif" font-size="14.00" fill="#000000">Int.Out</text> <polygon fill="#ffffff" stroke="transparent" points="508.5,-1013.909 508.5,-1033.909 648.5,-1033.909 648.5,-1013.909 508.5,-1013.909"></polygon> <text text-anchor="start" x="510.2731" y="-1020.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">IN.Level.Name, B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="508.5,-993.909 508.5,-1013.909 648.5,-1013.909 648.5,-993.909 508.5,-993.909"></polygon> <text text-anchor="start" x="510.5" y="-999.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, T.Name</text> <polygon fill="none" stroke="#555555" points="507.5,-992.909 507.5,-1054.909 649.5,-1054.909 649.5,-992.909 507.5,-992.909"></polygon> </g> <!-- Data.Out&#45;&gt;Int.Out --> <g id="Data.Out_4" class="edge">
<title>
Data.Out:B.Code, IN.Level.Name-&gt;Int.Out:IN.Level.Name, B.Code
</title>
<path fill="none" stroke="#555555" d="M467,-1224.909C554.4762,-1224.909 428.453,-1040.0591 498.4156,-1024.8957"></path> <polygon fill="#555555" stroke="#555555" points="498.8884,-1028.3662 508.5,-1023.909 498.2067,-1021.3995 498.8884,-1028.3662"></polygon> </g> <!-- MT.Out --> <g id="MT.Out" class="node">
<title>
MT.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="690,-894.909 690,-914.909 930,-914.909 930,-894.909 690,-894.909"></polygon> <text text-anchor="start" x="787.2528" y="-900.309" font-family="Times,serif" font-size="14.00" fill="#000000">MT.Out</text> <polygon fill="#ffffff" stroke="transparent" points="690,-874.909 690,-894.909 930,-894.909 930,-874.909 690,-874.909"></polygon> <text text-anchor="start" x="692" y="-881.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">T.Name, B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="690,-854.909 690,-874.909 930,-874.909 930,-854.909 690,-854.909"></polygon> <text text-anchor="start" x="691.9793" y="-860.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Product.Subtype, Product.Simple</text> <polygon fill="#ffffff" stroke="transparent" points="690,-834.909 690,-854.909 930,-854.909 930,-834.909 690,-834.909"></polygon> <text text-anchor="start" x="692" y="-840.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, V.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-814.909 690,-834.909 930,-834.909 930,-814.909 690,-814.909"></polygon> <text text-anchor="start" x="692" y="-820.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Till.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-794.909 690,-814.909 930,-814.909 930,-794.909 690,-794.909"></polygon> <text text-anchor="start" x="692" y="-800.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, P.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-774.909 690,-794.909 930,-794.909 930,-774.909 690,-774.909"></polygon> <text text-anchor="start" x="692" y="-780.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, PD.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-754.909 690,-774.909 930,-774.909 930,-754.909 690,-754.909"></polygon> <text text-anchor="start" x="692" y="-760.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, C.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-734.909 690,-754.909 930,-754.909 930,-734.909 690,-734.909"></polygon> <text text-anchor="start" x="692" y="-740.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, M.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-714.909 690,-734.909 930,-734.909 930,-714.909 690,-714.909"></polygon> <text text-anchor="start" x="692" y="-720.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, F.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-694.909 690,-714.909 930,-714.909 930,-694.909 690,-694.909"></polygon> <text text-anchor="start" x="692" y="-700.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, H.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-674.909 690,-694.909 930,-694.909 930,-674.909 690,-674.909"></polygon> <text text-anchor="start" x="692" y="-680.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, pH.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-654.909 690,-674.909 930,-674.909 930,-654.909 690,-654.909"></polygon> <text text-anchor="start" x="692" y="-660.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, WH.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-634.909 690,-654.909 930,-654.909 930,-634.909 690,-634.909"></polygon> <text text-anchor="start" x="692" y="-640.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, AF.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-614.909 690,-634.909 930,-634.909 930,-614.909 690,-614.909"></polygon> <text text-anchor="start" x="692" y="-620.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, W.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-594.909 690,-614.909 930,-614.909 930,-594.909 690,-594.909"></polygon> <text text-anchor="start" x="692" y="-600.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, O.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="690,-574.909 690,-594.909 930,-594.909 930,-574.909 690,-574.909"></polygon> <text text-anchor="start" x="692" y="-580.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, I.Level.Name</text> <polygon fill="none" stroke="#555555" points="689,-573.909 689,-915.909 931,-915.909 931,-573.909 689,-573.909"></polygon> </g> <!-- Data.Out&#45;&gt;MT.Out --> <g id="Data.Out_3" class="edge">
<title>
Data.Out:B.Code, T.Name-&gt;MT.Out:T.Name, B.Code
</title>
<path fill="none" stroke="#555555" d="M467,-1244.909C501.0167,-1244.909 479.929,-1201.9449 504,-1177.909 557.4879,-1124.499 609.041,-1157.4003 653,-1095.909 678.5218,-1060.2081 647.9757,-911.0116 680.3431,-887.9176"></path> <polygon fill="#555555" stroke="#555555" points="681.4937,-891.2251 690,-884.909 679.4115,-884.5419 681.4937,-891.2251"></polygon> </g> <!-- Out.Out --> <g id="Out.Out" class="node">
<title>
Out.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="505.5,-1227.909 505.5,-1247.909 652.5,-1247.909 652.5,-1227.909 505.5,-1227.909"></polygon> <text text-anchor="start" x="556.2528" y="-1233.309" font-family="Times,serif" font-size="14.00" fill="#000000">Out.Out</text> <polygon fill="#ffffff" stroke="transparent" points="505.5,-1207.909 505.5,-1227.909 652.5,-1227.909 652.5,-1207.909 505.5,-1207.909"></polygon> <text text-anchor="start" x="507.5" y="-1213.309" font-family="Times,serif" font-size="14.00" fill="#444444">Subindicator</text> <polygon fill="#ffffff" stroke="transparent" points="505.5,-1187.909 505.5,-1207.909 652.5,-1207.909 652.5,-1187.909 505.5,-1187.909"></polygon> <text text-anchor="start" x="507.257" y="-1194.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">Out.Code.Joined, B.Code</text> <polygon fill="none" stroke="#555555" points="504,-1186.909 504,-1248.909 653,-1248.909 653,-1186.909 504,-1186.909"></polygon> </g> <!-- Data.Out&#45;&gt;Out.Out --> <g id="Data.Out_6" class="edge">
<title>
Data.Out:B.Code, Out.Code.Joined-&gt;Out.Out:Out.Code.Joined, B.Code
</title>
<path fill="none" stroke="#555555" d="M467,-1184.909C481.1096,-1184.909 485.6484,-1192.8435 495.5707,-1196.3149"></path> <polygon fill="#555555" stroke="#555555" points="495.0716,-1199.7795 505.5,-1197.909 496.1812,-1192.868 495.0716,-1199.7795"></polygon> </g> <!-- Rot.Out --> <g id="Rot.Out" class="node">
<title>
Rot.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="511.5,-953.909 511.5,-973.909 646.5,-973.909 646.5,-953.909 511.5,-953.909"></polygon> <text text-anchor="start" x="556.6378" y="-959.309" font-family="Times,serif" font-size="14.00" fill="#000000">Rot.Out</text> <polygon fill="#ffffff" stroke="transparent" points="511.5,-933.909 511.5,-953.909 646.5,-953.909 646.5,-933.909 511.5,-933.909"></polygon> <text text-anchor="start" x="513.4884" y="-940.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">R.Level.Name, B.Code</text> <polygon fill="none" stroke="#555555" points="510,-932.909 510,-974.909 647,-974.909 647,-932.909 510,-932.909"></polygon> </g> <!-- Data.Out&#45;&gt;Rot.Out --> <g id="Data.Out_5" class="edge">
<title>
Data.Out:B.Code, R.Level.Name-&gt;Rot.Out:R.Level.Name, B.Code
</title>
<path fill="none" stroke="#555555" d="M467,-1204.909C521.9298,-1204.909 461.7993,-977.4221 501.4477,-947.209"></path> <polygon fill="#555555" stroke="#555555" points="503.0906,-950.3535 511.5,-943.909 500.9072,-943.7027 503.0906,-950.3535"></polygon> </g> <!-- Data.Out&#45;&gt;Site.Out --> <g id="Data.Out_1" class="edge">
<title>
Data.Out:B.Code, Site.ID-&gt;Site.Out:B.Code, Site.ID
</title>
<path fill="none" stroke="#555555" d="M467,-1284.909C528.2916,-1284.909 907.1596,-1504.6506 967,-1517.909 1072.009,-1541.175 1121.2752,-1580.1388 1209,-1517.909 1327.8998,-1433.5644 1178.0702,-1211.6406 1310.0061,-1201.2842"></path> <polygon fill="#555555" stroke="#555555" points="1310.1384,-1204.7818 1320,-1200.909 1309.8757,-1197.7867 1310.1384,-1204.7818"></polygon> </g> <!-- Data.Out&#45;&gt;Times.Out --> <g id="Data.Out_2" class="edge">
<title>
Data.Out:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M467,-1264.909C549.4463,-1264.909 1139.8107,-1304.7446 1209,-1259.909 1241.3806,-1238.9259 1220.8151,-1210.9736 1245,-1180.909 1270.5725,-1149.1195 1279.157,-1125.1335 1314.7729,-1121.4122"></path> <polygon fill="#555555" stroke="#555555" points="1315.1841,-1124.8963 1325,-1120.909 1314.84,-1117.9048 1315.1841,-1124.8963"></polygon> </g> <!-- era_master_codes.fert --> <g id="era_master_codes.fert" class="node">
<title>
era_master_codes.fert
</title>
<polygon fill="#efebdd" stroke="transparent" points="1303,-1057.909 1303,-1077.909 1430,-1077.909 1430,-1057.909 1303,-1057.909"></polygon> <text text-anchor="start" x="1304.8972" y="-1063.309" font-family="Times,serif" font-size="14.00" fill="#000000">era_master_codes.fert</text> <polygon fill="#ffffff" stroke="transparent" points="1303,-1037.909 1303,-1057.909 1430,-1057.909 1430,-1037.909 1303,-1037.909"></polygon> <text text-anchor="start" x="1305" y="-1044.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">F.Type</text> <polygon fill="none" stroke="#555555" points="1301.5,-1036.909 1301.5,-1078.909 1430.5,-1078.909 1430.5,-1036.909 1301.5,-1036.909"></polygon> </g> <!-- era_master_codes.out --> <g id="era_master_codes.out" class="node">
<title>
era_master_codes.out
</title>
<polygon fill="#efebdd" stroke="transparent" points="748,-1227.909 748,-1247.909 873,-1247.909 873,-1227.909 748,-1227.909"></polygon> <text text-anchor="start" x="749.6651" y="-1233.309" font-family="Times,serif" font-size="14.00" fill="#000000">era_master_codes.out</text> <polygon fill="#ffffff" stroke="transparent" points="748,-1207.909 748,-1227.909 873,-1227.909 873,-1207.909 748,-1207.909"></polygon> <text text-anchor="start" x="750" y="-1214.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">Subindicator</text> <polygon fill="none" stroke="#555555" points="746.5,-1206.909 746.5,-1248.909 873.5,-1248.909 873.5,-1206.909 746.5,-1206.909"></polygon> </g> <!-- era_master_codes.prac --> <g id="era_master_codes.prac" class="node">
<title>
era_master_codes.prac
</title>
<polygon fill="#efebdd" stroke="transparent" points="323.5,-720.909 323.5,-740.909 454.5,-740.909 454.5,-720.909 323.5,-720.909"></polygon> <text text-anchor="start" x="325.0655" y="-726.309" font-family="Times,serif" font-size="14.00" fill="#000000">era_master_codes.prac</text> <polygon fill="#ffffff" stroke="transparent" points="323.5,-700.909 323.5,-720.909 454.5,-720.909 454.5,-700.909 323.5,-700.909"></polygon> <text text-anchor="start" x="325.5" y="-707.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">Subpractice</text> <polygon fill="none" stroke="#555555" points="322,-699.909 322,-741.909 455,-741.909 455,-699.909 322,-699.909"></polygon> </g> <!-- era_master_codes.prod --> <g id="era_master_codes.prod" class="node">
<title>
era_master_codes.prod
</title>
<polygon fill="#efebdd" stroke="transparent" points="1524,-1832.909 1524,-1852.909 1714,-1852.909 1714,-1832.909 1524,-1832.909"></polygon> <text text-anchor="start" x="1554.2801" y="-1838.309" font-family="Times,serif" font-size="14.00" fill="#000000">era_master_codes.prod</text> <polygon fill="#ffffff" stroke="transparent" points="1524,-1812.909 1524,-1832.909 1714,-1832.909 1714,-1812.909 1524,-1812.909"></polygon> <text text-anchor="start" x="1525.6732" y="-1819.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">Product.Subtype, Product.Simple</text> <polygon fill="none" stroke="#555555" points="1523,-1811.909 1523,-1853.909 1715,-1853.909 1715,-1811.909 1523,-1811.909"></polygon> </g> <!-- era_master_codes.residues --> <g id="era_master_codes.residues" class="node">
<title>
era_master_codes.residues
</title>
<polygon fill="#efebdd" stroke="transparent" points="1290,-308.909 1290,-328.909 1443,-328.909 1443,-308.909 1290,-308.909"></polygon> <text text-anchor="start" x="1291.6756" y="-314.309" font-family="Times,serif" font-size="14.00" fill="#000000">era_master_codes.residues</text> <polygon fill="#ffffff" stroke="transparent" points="1290,-288.909 1290,-308.909 1443,-308.909 1443,-288.909 1290,-288.909"></polygon> <text text-anchor="start" x="1292" y="-295.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">M.Material</text> <polygon fill="none" stroke="#555555" points="1288.5,-287.909 1288.5,-329.909 1443.5,-329.909 1443.5,-287.909 1288.5,-287.909"></polygon> </g> <!-- era_master_codes.vars --> <g id="era_master_codes.vars" class="node">
<title>
era_master_codes.vars
</title>
<polygon fill="#efebdd" stroke="transparent" points="1300,-1734.909 1300,-1754.909 1432,-1754.909 1432,-1734.909 1300,-1734.909"></polygon> <text text-anchor="start" x="1302.4505" y="-1740.309" font-family="Times,serif" font-size="14.00" fill="#000000">era_master_codes.vars</text> <polygon fill="#ffffff" stroke="transparent" points="1300,-1714.909 1300,-1734.909 1432,-1734.909 1432,-1714.909 1300,-1714.909"></polygon> <text text-anchor="start" x="1301.8471" y="-1721.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">Product.Simple, V.Var</text> <polygon fill="none" stroke="#555555" points="1299,-1713.909 1299,-1755.909 1433,-1755.909 1433,-1713.909 1299,-1713.909"></polygon> </g> <!-- ExpD.Out --> <g id="ExpD.Out" class="node">
<title>
ExpD.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1336,-799.909 1336,-819.909 1397,-819.909 1397,-799.909 1336,-799.909"></polygon> <text text-anchor="start" x="1337.9218" y="-805.309" font-family="Times,serif" font-size="14.00" fill="#000000">ExpD.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1336,-779.909 1336,-799.909 1397,-799.909 1397,-779.909 1336,-779.909"></polygon> <text text-anchor="start" x="1338" y="-786.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="none" stroke="#555555" points="1334.5,-778.909 1334.5,-820.909 1397.5,-820.909 1397.5,-778.909 1334.5,-778.909"></polygon> </g> <!-- ExpD.Out&#45;&gt;Pub.Out --> <g id="ExpD.Out_1" class="edge">
<title>
ExpD.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1397,-789.909C1484.9169,-789.909 1501.4081,-844.5004 1583.8845,-848.6587"></path> <polygon fill="#555555" stroke="#555555" points="1583.9165,-852.1605 1594,-848.909 1584.0896,-845.1627 1583.9165,-852.1605"></polygon> </g> <!-- Fert.Method --> <g id="Fert.Method" class="node">
<title>
Fert.Method
</title>
<polygon fill="#efebdd" stroke="transparent" points="998,-971.909 998,-991.909 1178,-991.909 1178,-971.909 998,-971.909"></polygon> <text text-anchor="start" x="1053.2009" y="-977.309" font-family="Times,serif" font-size="14.00" fill="#000000">Fert.Method</text> <polygon fill="#ffffff" stroke="transparent" points="998,-951.909 998,-971.909 1178,-971.909 1178,-951.909 998,-951.909"></polygon> <text text-anchor="start" x="1000" y="-957.309" font-family="Times,serif" font-size="14.00" fill="#444444">F.Type</text> <polygon fill="#ffffff" stroke="transparent" points="998,-931.909 998,-951.909 1178,-951.909 1178,-931.909 998,-931.909"></polygon> <text text-anchor="start" x="999.7405" y="-938.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, F.Level.Name, F.Type</text> <polygon fill="#ffffff" stroke="transparent" points="998,-911.909 998,-931.909 1178,-931.909 1178,-911.909 998,-911.909"></polygon> <text text-anchor="start" x="1000" y="-917.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="#ffffff" stroke="transparent" points="998,-891.909 998,-911.909 1178,-911.909 1178,-891.909 998,-891.909"></polygon> <text text-anchor="start" x="1000" y="-897.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="#ffffff" stroke="transparent" points="998,-871.909 998,-891.909 1178,-891.909 1178,-871.909 998,-871.909"></polygon> <text text-anchor="start" x="1000" y="-877.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, F.Level.Name</text> <polygon fill="none" stroke="#555555" points="997,-870.909 997,-992.909 1179,-992.909 1179,-870.909 997,-870.909"></polygon> </g> <!-- Fert.Method&#45;&gt;era_master_codes.fert --> <g id="Fert.Method_4" class="edge">
<title>
Fert.Method:F.Type-&gt;era_master_codes.fert:F.Type
</title>
<path fill="none" stroke="#555555" d="M1178,-961.909C1219.799,-961.909 1209.4743,-1005.8843 1245,-1027.909 1265.0065,-1040.3123 1273.3742,-1046.2056 1292.8311,-1047.5852"></path> <polygon fill="#555555" stroke="#555555" points="1292.8937,-1051.0889 1303,-1047.909 1293.1165,-1044.0924 1292.8937,-1051.0889"></polygon> </g> <!-- Fert.Out --> <g id="Fert.Out" class="node">
<title>
Fert.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1300,-739.909 1300,-759.909 1433,-759.909 1433,-739.909 1300,-739.909"></polygon> <text text-anchor="start" x="1342.9772" y="-745.309" font-family="Times,serif" font-size="14.00" fill="#000000">Fert.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1300,-719.909 1300,-739.909 1433,-739.909 1433,-719.909 1300,-719.909"></polygon> <text text-anchor="start" x="1302" y="-725.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1300,-699.909 1300,-719.909 1433,-719.909 1433,-699.909 1300,-699.909"></polygon> <text text-anchor="start" x="1301.7654" y="-706.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, F.Level.Name</text> <polygon fill="none" stroke="#555555" points="1298.5,-698.909 1298.5,-760.909 1433.5,-760.909 1433.5,-698.909 1298.5,-698.909"></polygon> </g> <!-- Fert.Method&#45;&gt;Fert.Out --> <g id="Fert.Method_3" class="edge">
<title>
Fert.Method:B.Code, F.Level.Name-&gt;Fert.Out:B.Code, F.Level.Name
</title>
<path fill="none" stroke="#555555" d="M1178,-881.909C1268.0609,-881.909 1211.148,-723.084 1289.7266,-710.6758"></path> <polygon fill="#555555" stroke="#555555" points="1290.2883,-714.1437 1300,-709.909 1289.7672,-707.1631 1290.2883,-714.1437"></polygon> </g> <!-- Fert.Method&#45;&gt;Site.Out --> <g id="Fert.Method_1" class="edge">
<title>
Fert.Method:B.Code, Site.ID-&gt;Site.Out:B.Code, Site.ID
</title>
<path fill="none" stroke="#555555" d="M1178,-921.909C1296.9003,-921.909 1163.5768,-1094.2628 1245,-1180.909 1266.1328,-1203.3973 1281.8667,-1201.6563 1309.644,-1201.0389"></path> <polygon fill="#555555" stroke="#555555" points="1310.0447,-1204.5343 1320,-1200.909 1309.9568,-1197.5348 1310.0447,-1204.5343"></polygon> </g> <!-- Fert.Method&#45;&gt;Times.Out --> <g id="Fert.Method_2" class="edge">
<title>
Fert.Method:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M1178,-901.909C1265.8663,-901.909 1184.2982,-1024.3811 1245,-1087.909 1269.08,-1113.11 1283.6299,-1119.7367 1314.7732,-1120.7577"></path> <polygon fill="#555555" stroke="#555555" points="1314.9493,-1124.2606 1325,-1120.909 1315.0529,-1117.2614 1314.9493,-1124.2606"></polygon> </g> <!-- Fert.Out&#45;&gt;Pub.Out --> <g id="Fert.Out_1" class="edge">
<title>
Fert.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1433,-729.909C1518.3304,-729.909 1506.2331,-839.3474 1583.5713,-848.3248"></path> <polygon fill="#555555" stroke="#555555" points="1583.8199,-851.8441 1594,-848.909 1584.2114,-844.8551 1583.8199,-851.8441"></polygon> </g> <!-- Har.Out --> <g id="Har.Out" class="node">
<title>
Har.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1021,-675.909 1021,-695.909 1156,-695.909 1156,-675.909 1021,-675.909"></polygon> <text text-anchor="start" x="1065.7605" y="-681.309" font-family="Times,serif" font-size="14.00" fill="#000000">Har.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1021,-655.909 1021,-675.909 1156,-675.909 1156,-655.909 1021,-655.909"></polygon> <text text-anchor="start" x="1022.6034" y="-662.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, H.Level.Name</text> <polygon fill="none" stroke="#555555" points="1019.5,-654.909 1019.5,-696.909 1156.5,-696.909 1156.5,-654.909 1019.5,-654.909"></polygon> </g> <!-- Int.Out&#45;&gt;MT.Out --> <g id="Int.Out_1" class="edge">
<title>
Int.Out:B.Code, T.Name-&gt;MT.Out:T.Name, B.Code
</title>
<path fill="none" stroke="#555555" d="M648.5,-1003.909C700.5744,-1003.909 643.2793,-901.055 679.9736,-886.5912"></path> <polygon fill="#555555" stroke="#555555" points="680.717,-890.0155 690,-884.909 679.5587,-883.112 680.717,-890.0155"></polygon> </g> <!-- Irrig.Codes --> <g id="Irrig.Codes" class="node">
<title>
Irrig.Codes
</title>
<polygon fill="#efebdd" stroke="transparent" points="1301,-917.909 1301,-937.909 1431,-937.909 1431,-917.909 1301,-917.909"></polygon> <text text-anchor="start" x="1334.3159" y="-923.309" font-family="Times,serif" font-size="14.00" fill="#000000">Irrig.Codes</text> <polygon fill="#ffffff" stroke="transparent" points="1301,-897.909 1301,-917.909 1431,-917.909 1431,-897.909 1301,-897.909"></polygon> <text text-anchor="start" x="1303" y="-903.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1301,-877.909 1301,-897.909 1431,-897.909 1431,-877.909 1301,-877.909"></polygon> <text text-anchor="start" x="1302.8264" y="-884.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, I.Level.Name</text> <polygon fill="none" stroke="#555555" points="1300,-876.909 1300,-938.909 1432,-938.909 1432,-876.909 1300,-876.909"></polygon> </g> <!-- Irrig.Codes&#45;&gt;Pub.Out --> <g id="Irrig.Codes_1" class="edge">
<title>
Irrig.Codes:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1431,-907.909C1504.4327,-907.909 1515.9707,-854.3106 1583.6007,-849.2857"></path> <polygon fill="#555555" stroke="#555555" points="1584.1333,-852.7688 1594,-848.909 1583.8798,-845.7734 1584.1333,-852.7688"></polygon> </g> <!-- Irrig.Method --> <g id="Irrig.Method" class="node">
<title>
Irrig.Method
</title>
<polygon fill="#efebdd" stroke="transparent" points="1023,-1071.909 1023,-1091.909 1153,-1091.909 1153,-1071.909 1023,-1071.909"></polygon> <text text-anchor="start" x="1052.0389" y="-1077.309" font-family="Times,serif" font-size="14.00" fill="#000000">Irrig.Method</text> <polygon fill="#ffffff" stroke="transparent" points="1023,-1051.909 1023,-1071.909 1153,-1071.909 1153,-1051.909 1023,-1051.909"></polygon> <text text-anchor="start" x="1024.8264" y="-1058.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, I.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="1023,-1031.909 1023,-1051.909 1153,-1051.909 1153,-1031.909 1023,-1031.909"></polygon> <text text-anchor="start" x="1025" y="-1037.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="#ffffff" stroke="transparent" points="1023,-1011.909 1023,-1031.909 1153,-1031.909 1153,-1011.909 1023,-1011.909"></polygon> <text text-anchor="start" x="1025" y="-1017.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="none" stroke="#555555" points="1022,-1010.909 1022,-1092.909 1154,-1092.909 1154,-1010.909 1022,-1010.909"></polygon> </g> <!-- Irrig.Method&#45;&gt;Irrig.Codes --> <g id="Irrig.Method_3" class="edge">
<title>
Irrig.Method:B.Code, I.Level.Name-&gt;Irrig.Codes:B.Code, I.Level.Name
</title>
<path fill="none" stroke="#555555" d="M1153,-1061.909C1250.955,-1061.909 1203.1529,-899.9283 1290.8593,-888.539"></path> <polygon fill="#555555" stroke="#555555" points="1291.2363,-892.0224 1301,-887.909 1290.8022,-885.0359 1291.2363,-892.0224"></polygon> </g> <!-- Irrig.Method&#45;&gt;Site.Out --> <g id="Irrig.Method_1" class="edge">
<title>
Irrig.Method:B.Code, Site.ID-&gt;Site.Out:B.Code, Site.ID
</title>
<path fill="none" stroke="#555555" d="M1153,-1041.909C1227.0837,-1041.909 1184.8499,-1137.6613 1245,-1180.909 1270.0556,-1198.9239 1282.6942,-1200.7127 1309.7749,-1200.8897"></path> <polygon fill="#555555" stroke="#555555" points="1309.9934,-1204.39 1320,-1200.909 1310.0067,-1197.39 1309.9934,-1204.39"></polygon> </g> <!-- Irrig.Method&#45;&gt;Times.Out --> <g id="Irrig.Method_2" class="edge">
<title>
Irrig.Method:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M1153,-1021.909C1203.3224,-1021.909 1201.0022,-1063.4847 1245,-1087.909 1275.4752,-1104.8265 1284.829,-1118.1835 1314.9418,-1120.5393"></path> <polygon fill="#555555" stroke="#555555" points="1314.8782,-1124.0392 1325,-1120.909 1315.1353,-1117.044 1314.8782,-1124.0392"></polygon> </g> <!-- MT.Out&#45;&gt;AF.Out --> <g id="MT.Out_12" class="edge">
<title>
MT.Out:B.Code, AF.Level.Name-&gt;AF.Out:B.Code, AF.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-644.909C989.5864,-644.909 923.4368,-150.5635 967,-109.909 1045.6331,-36.5262 1102.1456,-97.6476 1209,-109.909 1244.3314,-113.9632 1254.0263,-127.0949 1284.7413,-129.5215"></path> <polygon fill="#555555" stroke="#555555" points="1284.875,-133.0289 1295,-129.909 1285.1393,-126.0339 1284.875,-133.0289"></polygon> </g> <!-- MT.Out&#45;&gt;Chems.Code --> <g id="MT.Out_6" class="edge">
<title>
MT.Out:B.Code, C.Level.Name-&gt;Chems.Code:B.Code, C.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-764.909C981.7631,-764.909 929.6783,-1660.0411 967,-1695.909 1005.7743,-1733.1729 1158.7327,-1715.0205 1209,-1695.909 1255.605,-1678.1898 1247.0363,-1624.0501 1288.923,-1616.731"></path> <polygon fill="#555555" stroke="#555555" points="1289.3177,-1620.2105 1299,-1615.909 1288.7485,-1613.2337 1289.3177,-1620.2105"></polygon> </g> <!-- MT.Out&#45;&gt;Fert.Out --> <g id="MT.Out_8" class="edge">
<title>
MT.Out:B.Code, F.Level.Name-&gt;Fert.Out:B.Code, F.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-724.909C1091.0436,-724.909 1133.6085,-710.5466 1289.5612,-709.9294"></path> <polygon fill="#555555" stroke="#555555" points="1290.0069,-713.4287 1300,-709.909 1289.9931,-706.4287 1290.0069,-713.4287"></polygon> </g> <!-- MT.Out&#45;&gt;Har.Out --> <g id="MT.Out_9" class="edge">
<title>
MT.Out:B.Code, H.Level.Name-&gt;Har.Out:B.Code, H.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-704.909C970.3927,-704.909 976.2304,-672.045 1010.9539,-666.6532"></path> <polygon fill="#555555" stroke="#555555" points="1011.2859,-670.1383 1021,-665.909 1010.7687,-663.1574 1011.2859,-670.1383"></polygon> </g> <!-- MT.Out&#45;&gt;Irrig.Codes --> <g id="MT.Out_15" class="edge">
<title>
MT.Out:B.Code, I.Level.Name-&gt;Irrig.Codes:B.Code, I.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-584.909C1011.2373,-584.909 904.0103,-457.2101 967,-405.909 1008.6982,-371.9485 1169.3975,-369.5264 1209,-405.909 1278.6359,-469.8829 1205.9003,-743.81 1245,-829.909 1258.3114,-859.2211 1263.9831,-882.68 1290.9837,-887.1428"></path> <polygon fill="#555555" stroke="#555555" points="1290.7621,-890.6359 1301,-887.909 1291.2961,-883.6563 1290.7621,-890.6359"></polygon> </g> <!-- Other.Out --> <g id="Other.Out" class="node">
<title>
Other.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1021,-455.909 1021,-475.909 1156,-475.909 1156,-455.909 1021,-455.909"></polygon> <text text-anchor="start" x="1060.3152" y="-461.309" font-family="Times,serif" font-size="14.00" fill="#000000">Other.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1021,-435.909 1021,-455.909 1156,-455.909 1156,-435.909 1021,-435.909"></polygon> <text text-anchor="start" x="1023" y="-441.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1021,-415.909 1021,-435.909 1156,-435.909 1156,-415.909 1021,-415.909"></polygon> <text text-anchor="start" x="1022.6034" y="-422.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, O.Level.Name</text> <polygon fill="none" stroke="#555555" points="1019.5,-414.909 1019.5,-476.909 1156.5,-476.909 1156.5,-414.909 1019.5,-414.909"></polygon> </g> <!-- MT.Out&#45;&gt;Other.Out --> <g id="MT.Out_14" class="edge">
<title>
MT.Out:B.Code, O.Level.Name-&gt;Other.Out:B.Code, O.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-604.909C985.3864,-604.909 939.6176,-534.0531 967,-485.909 982.8662,-458.0129 984.8491,-432.0135 1010.7708,-426.8395"></path> <polygon fill="#555555" stroke="#555555" points="1011.3582,-430.3006 1021,-425.909 1010.724,-423.3294 1011.3582,-430.3006"></polygon> </g> <!-- PD.Codes --> <g id="PD.Codes" class="node">
<title>
PD.Codes
</title>
<polygon fill="#efebdd" stroke="transparent" points="1295,-997.909 1295,-1017.909 1438,-1017.909 1438,-997.909 1295,-997.909"></polygon> <text text-anchor="start" x="1338.3075" y="-1003.309" font-family="Times,serif" font-size="14.00" fill="#000000">PD.Codes</text> <polygon fill="#ffffff" stroke="transparent" points="1295,-977.909 1295,-997.909 1438,-997.909 1438,-977.909 1295,-977.909"></polygon> <text text-anchor="start" x="1297" y="-983.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1295,-957.909 1295,-977.909 1438,-977.909 1438,-957.909 1295,-957.909"></polygon> <text text-anchor="start" x="1296.7121" y="-964.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, PD.Level.Name</text> <polygon fill="none" stroke="#555555" points="1293.5,-956.909 1293.5,-1018.909 1438.5,-1018.909 1438.5,-956.909 1293.5,-956.909"></polygon> </g> <!-- MT.Out&#45;&gt;PD.Codes --> <g id="MT.Out_5" class="edge">
<title>
MT.Out:B.Code, PD.Level.Name-&gt;PD.Codes:B.Code, PD.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-784.909C953.8928,-784.909 945.8485,-812.7968 967,-823.909 1063.382,-874.5444 1123.3293,-794.723 1209,-861.909 1241.6053,-887.4792 1215.4678,-918.8437 1245,-947.909 1259.3929,-962.0743 1268.0545,-966.5739 1284.7865,-967.6342"></path> <polygon fill="#555555" stroke="#555555" points="1284.9095,-971.1387 1295,-967.909 1285.0978,-964.1412 1284.9095,-971.1387"></polygon> </g> <!-- pH.Out --> <g id="pH.Out" class="node">
<title>
pH.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1017,-793.909 1017,-813.909 1159,-813.909 1159,-793.909 1017,-793.909"></polygon> <text text-anchor="start" x="1067.1981" y="-799.309" font-family="Times,serif" font-size="14.00" fill="#000000">pH.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1017,-773.909 1017,-793.909 1159,-793.909 1159,-773.909 1017,-773.909"></polygon> <text text-anchor="start" x="1019" y="-779.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1017,-753.909 1017,-773.909 1159,-773.909 1159,-753.909 1017,-753.909"></polygon> <text text-anchor="start" x="1018.6034" y="-760.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, pH.Level.Name</text> <polygon fill="none" stroke="#555555" points="1016,-752.909 1016,-814.909 1160,-814.909 1160,-752.909 1016,-752.909"></polygon> </g> <!-- MT.Out&#45;&gt;pH.Out --> <g id="MT.Out_10" class="edge">
<title>
MT.Out:B.Code, pH.Level.Name-&gt;pH.Out:B.Code, pH.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-684.909C959.0933,-684.909 945.0675,-719.794 967,-738.909 982.8035,-752.6823 989.8466,-761.011 1006.5858,-763.2774"></path> <polygon fill="#555555" stroke="#555555" points="1006.8064,-766.7972 1017,-763.909 1007.2302,-759.81 1006.8064,-766.7972"></polygon> </g> <!-- Plant.Out --> <g id="Plant.Out" class="node">
<title>
Plant.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1022,-41.909 1022,-61.909 1155,-61.909 1155,-41.909 1022,-41.909"></polygon> <text text-anchor="start" x="1061.8622" y="-47.309" font-family="Times,serif" font-size="14.00" fill="#000000">Plant.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1022,-21.909 1022,-41.909 1155,-41.909 1155,-21.909 1022,-21.909"></polygon> <text text-anchor="start" x="1024" y="-27.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1022,-1.909 1022,-21.909 1155,-21.909 1155,-1.909 1022,-1.909"></polygon> <text text-anchor="start" x="1023.7654" y="-8.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, P.Level.Name</text> <polygon fill="none" stroke="#555555" points="1020.5,-.909 1020.5,-62.909 1155.5,-62.909 1155.5,-.909 1020.5,-.909"></polygon> </g> <!-- MT.Out&#45;&gt;Plant.Out --> <g id="MT.Out_4" class="edge">
<title>
MT.Out:B.Code, P.Level.Name-&gt;Plant.Out:B.Code, P.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-804.909C970.4966,-804.909 952.11,-114.5688 967,-76.909 979.5555,-45.1535 983.4218,-17.7822 1011.8609,-12.739"></path> <polygon fill="#555555" stroke="#555555" points="1012.319,-16.2133 1022,-11.909 1011.7477,-9.2367 1012.319,-16.2133"></polygon> </g> <!-- Prod.Out --> <g id="Prod.Out" class="node">
<title>
Prod.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1246,-1872.909 1246,-1892.909 1486,-1892.909 1486,-1872.909 1246,-1872.909"></polygon> <text text-anchor="start" x="1340.5298" y="-1878.309" font-family="Times,serif" font-size="14.00" fill="#000000">Prod.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1246,-1852.909 1246,-1872.909 1486,-1872.909 1486,-1852.909 1246,-1852.909"></polygon> <text text-anchor="start" x="1248" y="-1858.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1246,-1832.909 1246,-1852.909 1486,-1852.909 1486,-1832.909 1246,-1832.909"></polygon> <text text-anchor="start" x="1247.9793" y="-1839.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, Product.Subtype, Product.Simple</text> <polygon fill="#ffffff" stroke="transparent" points="1246,-1812.909 1246,-1832.909 1486,-1832.909 1486,-1812.909 1246,-1812.909"></polygon> <text text-anchor="start" x="1248" y="-1818.309" font-family="Times,serif" font-size="14.00" fill="#444444">Product.Subtype, Product.Simple</text> <polygon fill="none" stroke="#555555" points="1245,-1811.909 1245,-1893.909 1487,-1893.909 1487,-1811.909 1245,-1811.909"></polygon> </g> <!-- MT.Out&#45;&gt;Prod.Out --> <g id="MT.Out_1" class="edge">
<title>
MT.Out:B.Code, Product.Subtype, Product.Simple-&gt;Prod.Out:B.Code, Product.Subtype, Product.Simple
</title>
<path fill="none" stroke="#555555" d="M930,-864.909C984.9829,-864.909 927.4012,-1815.7639 967,-1853.909 1044.4619,-1928.5271 1102.5652,-1869.3954 1209,-1853.909 1221.998,-1852.0177 1226.7251,-1846.5745 1235.9264,-1844.1268"></path> <polygon fill="#555555" stroke="#555555" points="1236.4924,-1847.584 1246,-1842.909 1235.6522,-1840.6346 1236.4924,-1847.584"></polygon> </g> <!-- Res.Out --> <g id="Res.Out" class="node">
<title>
Res.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1297,-248.909 1297,-268.909 1435,-268.909 1435,-248.909 1297,-248.909"></polygon> <text text-anchor="start" x="1343.2535" y="-254.309" font-family="Times,serif" font-size="14.00" fill="#000000">Res.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1297,-228.909 1297,-248.909 1435,-248.909 1435,-228.909 1297,-228.909"></polygon> <text text-anchor="start" x="1299" y="-234.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1297,-208.909 1297,-228.909 1435,-228.909 1435,-208.909 1297,-208.909"></polygon> <text text-anchor="start" x="1298.9344" y="-215.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, M.Level.Name</text> <polygon fill="none" stroke="#555555" points="1296,-207.909 1296,-269.909 1436,-269.909 1436,-207.909 1296,-207.909"></polygon> </g> <!-- MT.Out&#45;&gt;Res.Out --> <g id="MT.Out_7" class="edge">
<title>
MT.Out:B.Code, M.Level.Name-&gt;Res.Out:B.Code, M.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-744.909C987.5914,-744.909 925.3872,-267.7228 967,-227.909 1017.7293,-179.3728 1206.4178,-215.4947 1286.8441,-218.6886"></path> <polygon fill="#555555" stroke="#555555" points="1286.9264,-222.1911 1297,-218.909 1287.0783,-215.1927 1286.9264,-222.1911"></polygon> </g> <!-- Till.Out --> <g id="Till.Out" class="node">
<title>
Till.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1016,-1487.909 1016,-1507.909 1161,-1507.909 1161,-1487.909 1016,-1487.909"></polygon> <text text-anchor="start" x="1066.1392" y="-1493.309" font-family="Times,serif" font-size="14.00" fill="#000000">Till.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1016,-1467.909 1016,-1487.909 1161,-1487.909 1161,-1467.909 1016,-1467.909"></polygon> <text text-anchor="start" x="1018" y="-1473.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1016,-1447.909 1016,-1467.909 1161,-1467.909 1161,-1447.909 1016,-1447.909"></polygon> <text text-anchor="start" x="1017.5445" y="-1454.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, Till.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="1016,-1427.909 1016,-1447.909 1161,-1447.909 1161,-1427.909 1016,-1427.909"></polygon> <text text-anchor="start" x="1018" y="-1433.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="#ffffff" stroke="transparent" points="1016,-1407.909 1016,-1427.909 1161,-1427.909 1161,-1407.909 1016,-1407.909"></polygon> <text text-anchor="start" x="1018" y="-1413.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="none" stroke="#555555" points="1014.5,-1406.909 1014.5,-1508.909 1161.5,-1508.909 1161.5,-1406.909 1014.5,-1406.909"></polygon> </g> <!-- MT.Out&#45;&gt;Till.Out --> <g id="MT.Out_3" class="edge">
<title>
MT.Out:B.Code, Till.Level.Name-&gt;Till.Out:B.Code, Till.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-824.909C993.7993,-824.909 943.6527,-1338.5351 967,-1397.909 978.2213,-1426.4457 981.0123,-1451.7441 1005.8114,-1456.9368"></path> <polygon fill="#555555" stroke="#555555" points="1005.7127,-1460.4432 1016,-1457.909 1006.3777,-1453.4749 1005.7127,-1460.4432"></polygon> </g> <!-- Var.Out --> <g id="Var.Out" class="node">
<title>
Var.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="968,-1823.909 968,-1843.909 1208,-1843.909 1208,-1823.909 968,-1823.909"></polygon> <text text-anchor="start" x="1065.2605" y="-1829.309" font-family="Times,serif" font-size="14.00" fill="#000000">Var.Out</text> <polygon fill="#ffffff" stroke="transparent" points="968,-1803.909 968,-1823.909 1208,-1823.909 1208,-1803.909 968,-1803.909"></polygon> <text text-anchor="start" x="970" y="-1809.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="968,-1783.909 968,-1803.909 1208,-1803.909 1208,-1783.909 968,-1783.909"></polygon> <text text-anchor="start" x="970" y="-1790.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, V.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="968,-1763.909 968,-1783.909 1208,-1783.909 1208,-1763.909 968,-1763.909"></polygon> <text text-anchor="start" x="969.9793" y="-1769.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Product.Subtype, Product.Simple</text> <polygon fill="#ffffff" stroke="transparent" points="968,-1743.909 968,-1763.909 1208,-1763.909 1208,-1743.909 968,-1743.909"></polygon> <text text-anchor="start" x="970" y="-1749.309" font-family="Times,serif" font-size="14.00" fill="#444444">Product.Simple, V.Var</text> <polygon fill="none" stroke="#555555" points="967,-1742.909 967,-1844.909 1209,-1844.909 1209,-1742.909 967,-1742.909"></polygon> </g> <!-- MT.Out&#45;&gt;Var.Out --> <g id="MT.Out_2" class="edge">
<title>
MT.Out:B.Code, V.Level.Name-&gt;Var.Out:B.Code, V.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-844.909C1032.0251,-844.909 873.6561,-1731.9357 958.3893,-1790.8398"></path> <polygon fill="#555555" stroke="#555555" points="957.4092,-1794.2009 968,-1793.909 959.5387,-1787.5326 957.4092,-1794.2009"></polygon> </g> <!-- Weed.Out --> <g id="Weed.Out" class="node">
<title>
Weed.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1019,-535.909 1019,-555.909 1157,-555.909 1157,-535.909 1019,-535.909"></polygon> <text text-anchor="start" x="1059.4295" y="-541.309" font-family="Times,serif" font-size="14.00" fill="#000000">Weed.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1019,-515.909 1019,-535.909 1157,-535.909 1157,-515.909 1019,-515.909"></polygon> <text text-anchor="start" x="1021" y="-521.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1019,-495.909 1019,-515.909 1157,-515.909 1157,-495.909 1019,-495.909"></polygon> <text text-anchor="start" x="1020.5494" y="-502.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, W.Level.Name</text> <polygon fill="none" stroke="#555555" points="1018,-494.909 1018,-556.909 1158,-556.909 1158,-494.909 1018,-494.909"></polygon> </g> <!-- MT.Out&#45;&gt;Weed.Out --> <g id="MT.Out_13" class="edge">
<title>
MT.Out:B.Code, W.Level.Name-&gt;Weed.Out:B.Code, W.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-624.909C960.952,-624.909 948.5875,-590.7888 967,-565.909 985.6958,-540.6463 984.346,-512.79 1008.7564,-506.9986"></path> <polygon fill="#555555" stroke="#555555" points="1009.4264,-510.4472 1019,-505.909 1008.6858,-503.4865 1009.4264,-510.4472"></polygon> </g> <!-- WH.Out --> <g id="WH.Out" class="node">
<title>
WH.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="1014,-615.909 1014,-635.909 1163,-635.909 1163,-615.909 1014,-615.909"></polygon> <text text-anchor="start" x="1064.5908" y="-621.309" font-family="Times,serif" font-size="14.00" fill="#000000">WH.Out</text> <polygon fill="#ffffff" stroke="transparent" points="1014,-595.909 1014,-615.909 1163,-615.909 1163,-595.909 1014,-595.909"></polygon> <text text-anchor="start" x="1016" y="-601.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="1014,-575.909 1014,-595.909 1163,-595.909 1163,-575.909 1014,-575.909"></polygon> <text text-anchor="start" x="1015.9961" y="-582.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, WH.Level.Name</text> <polygon fill="none" stroke="#555555" points="1012.5,-574.909 1012.5,-636.909 1163.5,-636.909 1163.5,-574.909 1012.5,-574.909"></polygon> </g> <!-- MT.Out&#45;&gt;WH.Out --> <g id="MT.Out_11" class="edge">
<title>
MT.Out:B.Code, WH.Level.Name-&gt;WH.Out:B.Code, WH.Level.Name
</title>
<path fill="none" stroke="#555555" d="M930,-664.909C977.4463,-664.909 965.1118,-597.2004 1003.6845,-587.1499"></path> <polygon fill="#555555" stroke="#555555" points="1004.4896,-590.5783 1014,-585.909 1003.6535,-583.6284 1004.4896,-590.5783"></polygon> </g> <!-- Other.Out&#45;&gt;Pub.Out --> <g id="Other.Out_1" class="edge">
<title>
Other.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1156,-445.909C1306.8403,-445.909 1375.522,-419.2947 1487,-520.909 1597.6682,-621.7851 1447.9957,-838.4427 1583.7267,-848.5431"></path> <polygon fill="#555555" stroke="#555555" points="1583.8817,-852.0508 1594,-848.909 1584.1309,-845.0552 1583.8817,-852.0508"></polygon> </g> <!-- Out.Out&#45;&gt;era_master_codes.out --> <g id="Out.Out_1" class="edge">
<title>
Out.Out:Subindicator-&gt;era_master_codes.out:Subindicator
</title>
<path fill="none" stroke="#555555" d="M652.5,-1217.909C691.2969,-1217.909 703.4967,-1217.909 737.7222,-1217.909"></path> <polygon fill="#555555" stroke="#555555" points="738,-1221.4091 748,-1217.909 738,-1214.4091 738,-1221.4091"></polygon> </g> <!-- PD.Codes&#45;&gt;Pub.Out --> <g id="PD.Codes_1" class="edge">
<title>
PD.Codes:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1438,-987.909C1527.2359,-987.909 1503.272,-859.5563 1583.6641,-849.5287"></path> <polygon fill="#555555" stroke="#555555" points="1584.2274,-853.0013 1594,-848.909 1583.8084,-846.0138 1584.2274,-853.0013"></polygon> </g> <!-- PD.Out --> <g id="PD.Out" class="node">
<title>
PD.Out
</title>
<polygon fill="#efebdd" stroke="transparent" points="975,-1229.909 975,-1249.909 1202,-1249.909 1202,-1229.909 975,-1229.909"></polygon> <text text-anchor="start" x="1067.3068" y="-1235.309" font-family="Times,serif" font-size="14.00" fill="#000000">PD.Out</text> <polygon fill="#ffffff" stroke="transparent" points="975,-1209.909 975,-1229.909 1202,-1229.909 1202,-1209.909 975,-1209.909"></polygon> <text text-anchor="start" x="976.9151" y="-1216.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, PD.Level.Name, Site.ID, Time</text> <polygon fill="#ffffff" stroke="transparent" points="975,-1189.909 975,-1209.909 1202,-1209.909 1202,-1189.909 975,-1189.909"></polygon> <text text-anchor="start" x="977" y="-1195.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="#ffffff" stroke="transparent" points="975,-1169.909 975,-1189.909 1202,-1189.909 1202,-1169.909 975,-1169.909"></polygon> <text text-anchor="start" x="977" y="-1175.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="#ffffff" stroke="transparent" points="975,-1149.909 975,-1169.909 1202,-1169.909 1202,-1149.909 975,-1149.909"></polygon> <text text-anchor="start" x="977" y="-1155.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, PD.Level.Name</text> <polygon fill="none" stroke="#555555" points="973.5,-1148.909 973.5,-1250.909 1202.5,-1250.909 1202.5,-1148.909 973.5,-1148.909"></polygon> </g> <!-- PD.Out&#45;&gt;PD.Codes --> <g id="PD.Out_3" class="edge">
<title>
PD.Out:B.Code, PD.Level.Name-&gt;PD.Codes:B.Code, PD.Level.Name
</title>
<path fill="none" stroke="#555555" d="M1202,-1159.909C1263.701,-1159.909 1215.1579,-1081.9133 1245,-1027.909 1259.9525,-1000.8499 1260.3973,-974.397 1284.8384,-968.9342"></path> <polygon fill="#555555" stroke="#555555" points="1285.4019,-972.3952 1295,-967.909 1284.6991,-965.4305 1285.4019,-972.3952"></polygon> </g> <!-- PD.Out&#45;&gt;Site.Out --> <g id="PD.Out_1" class="edge">
<title>
PD.Out:B.Code, Site.ID-&gt;Site.Out:B.Code, Site.ID
</title>
<path fill="none" stroke="#555555" d="M1202,-1199.909C1250.8611,-1199.909 1265.5778,-1200.7769 1309.7708,-1200.8956"></path> <polygon fill="#555555" stroke="#555555" points="1309.9954,-1204.3958 1320,-1200.909 1310.0046,-1197.3958 1309.9954,-1204.3958"></polygon> </g> <!-- PD.Out&#45;&gt;Times.Out --> <g id="PD.Out_2" class="edge">
<title>
PD.Out:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M1202,-1179.909C1259.0779,-1179.909 1263.9636,-1127.6205 1314.9252,-1121.4929"></path> <polygon fill="#555555" stroke="#555555" points="1315.2193,-1124.9818 1325,-1120.909 1314.8142,-1117.9936 1315.2193,-1124.9818"></polygon> </g> <!-- pH.Method --> <g id="pH.Method" class="node">
<title>
pH.Method
</title>
<polygon fill="#efebdd" stroke="transparent" points="739,-954.909 739,-974.909 881,-974.909 881,-954.909 739,-954.909"></polygon> <text text-anchor="start" x="777.9218" y="-960.309" font-family="Times,serif" font-size="14.00" fill="#000000">pH.Method</text> <polygon fill="#ffffff" stroke="transparent" points="739,-934.909 739,-954.909 881,-954.909 881,-934.909 739,-934.909"></polygon> <text text-anchor="start" x="740.6034" y="-941.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, pH.Level.Name</text> <polygon fill="none" stroke="#555555" points="738,-933.909 738,-975.909 882,-975.909 882,-933.909 738,-933.909"></polygon> </g> <!-- pH.Method&#45;&gt;pH.Out --> <g id="pH.Method_1" class="edge">
<title>
pH.Method:B.Code, pH.Level.Name-&gt;pH.Out:B.Code, pH.Level.Name
</title>
<path fill="none" stroke="#555555" d="M881,-944.909C904.9341,-944.909 913.1705,-940.8761 931,-924.909 988.718,-873.2197 940.6332,-773.405 1006.8718,-764.5415"></path> <polygon fill="#555555" stroke="#555555" points="1007.2377,-768.0256 1017,-763.909 1006.8012,-761.0392 1007.2377,-768.0256"></polygon> </g> <!-- pH.Out&#45;&gt;Pub.Out --> <g id="pH.Out_1" class="edge">
<title>
pH.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1159,-783.909C1202.3464,-783.909 1203.2562,-818.2312 1245,-829.909 1391.2373,-870.8186 1436.6266,-849.9028 1583.6987,-848.9426"></path> <polygon fill="#555555" stroke="#555555" points="1584.0115,-852.4417 1594,-848.909 1583.9886,-845.4417 1584.0115,-852.4417"></polygon> </g> <!-- Plant.Method --> <g id="Plant.Method" class="node">
<title>
Plant.Method
</title>
<polygon fill="#efebdd" stroke="transparent" points="744,-21.909 744,-41.909 877,-41.909 877,-21.909 744,-21.909"></polygon> <text text-anchor="start" x="772.5859" y="-27.309" font-family="Times,serif" font-size="14.00" fill="#000000">Plant.Method</text> <polygon fill="#ffffff" stroke="transparent" points="744,-1.909 744,-21.909 877,-21.909 877,-1.909 744,-1.909"></polygon> <text text-anchor="start" x="745.7654" y="-8.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, P.Level.Name</text> <polygon fill="none" stroke="#555555" points="742.5,-.909 742.5,-42.909 877.5,-42.909 877.5,-.909 742.5,-.909"></polygon> </g> <!-- Plant.Method&#45;&gt;Plant.Out --> <g id="Plant.Method_1" class="edge">
<title>
Plant.Method:B.Code, P.Level.Name-&gt;Plant.Out:B.Code, P.Level.Name
</title>
<path fill="none" stroke="#555555" d="M877,-11.909C937.9201,-11.909 955.6489,-11.909 1011.8449,-11.909"></path> <polygon fill="#555555" stroke="#555555" points="1012,-15.4091 1022,-11.909 1012,-8.4091 1012,-15.4091"></polygon> </g> <!-- Plant.Out&#45;&gt;Pub.Out --> <g id="Plant.Out_1" class="edge">
<title>
Plant.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1155,-31.909C1306.5731,-31.909 1382.6236,0 1487,-109.909 1598.101,-226.8989 1618.2161,-656.5884 1618.977,-828.6891"></path> <polygon fill="#555555" stroke="#555555" points="1615.4774,-828.9169 1619,-838.909 1622.4774,-828.9011 1615.4774,-828.9169"></polygon> </g> <!-- Prod.Out&#45;&gt;era_master_codes.prod --> <g id="Prod.Out_2" class="edge">
<title>
Prod.Out:Product.Subtype, Product.Simple-&gt;era_master_codes.prod:Product.Subtype, Product.Simple
</title>
<path fill="none" stroke="#555555" d="M1486,-1822.909C1498.9306,-1822.909 1504.4361,-1822.909 1513.8862,-1822.909"></path> <polygon fill="#555555" stroke="#555555" points="1514,-1826.4091 1524,-1822.909 1514,-1819.4091 1514,-1826.4091"></polygon> </g> <!-- Prod.Out&#45;&gt;Pub.Out --> <g id="Prod.Out_1" class="edge">
<title>
Prod.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1486,-1862.909C1595.8738,-1862.909 1487.6649,-909.3742 1584.3345,-851.6406"></path> <polygon fill="#555555" stroke="#555555" points="1585.3288,-854.9968 1594,-848.909 1583.425,-848.2606 1585.3288,-854.9968"></polygon> </g> <!-- Res.Method --> <g id="Res.Method" class="node">
<title>
Res.Method
</title>
<polygon fill="#efebdd" stroke="transparent" points="1019,-337.909 1019,-357.909 1157,-357.909 1157,-337.909 1019,-337.909"></polygon> <text text-anchor="start" x="1053.9772" y="-343.309" font-family="Times,serif" font-size="14.00" fill="#000000">Res.Method</text> <polygon fill="#ffffff" stroke="transparent" points="1019,-317.909 1019,-337.909 1157,-337.909 1157,-317.909 1019,-317.909"></polygon> <text text-anchor="start" x="1021" y="-323.309" font-family="Times,serif" font-size="14.00" fill="#444444">Tree.Latin.Name</text> <polygon fill="#ffffff" stroke="transparent" points="1019,-297.909 1019,-317.909 1157,-317.909 1157,-297.909 1019,-297.909"></polygon> <text text-anchor="start" x="1021" y="-303.309" font-family="Times,serif" font-size="14.00" fill="#444444">M.Material</text> <polygon fill="#ffffff" stroke="transparent" points="1019,-277.909 1019,-297.909 1157,-297.909 1157,-277.909 1019,-277.909"></polygon> <text text-anchor="start" x="1020.9344" y="-284.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, M.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="1019,-257.909 1019,-277.909 1157,-277.909 1157,-257.909 1019,-257.909"></polygon> <text text-anchor="start" x="1021" y="-263.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="#ffffff" stroke="transparent" points="1019,-237.909 1019,-257.909 1157,-257.909 1157,-237.909 1019,-237.909"></polygon> <text text-anchor="start" x="1021" y="-243.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="none" stroke="#555555" points="1018,-236.909 1018,-358.909 1158,-358.909 1158,-236.909 1018,-236.909"></polygon> </g> <!-- Res.Method&#45;&gt;era_master_codes.residues --> <g id="Res.Method_4" class="edge">
<title>
Res.Method:M.Material-&gt;era_master_codes.residues:M.Material
</title>
<path fill="none" stroke="#555555" d="M1157,-307.909C1212.6591,-307.909 1228.8329,-299.9658 1279.7106,-299.004"></path> <polygon fill="#555555" stroke="#555555" points="1280.0328,-302.5012 1290,-298.909 1279.9681,-295.5015 1280.0328,-302.5012"></polygon> </g> <!-- Res.Method&#45;&gt;era_master_codes.trees --> <g id="Res.Method_5" class="edge">
<title>
Res.Method:Tree.Latin.Name-&gt;era_master_codes.trees:Tree.Latin.Name
</title>
<path fill="none" stroke="#555555" d="M1157,-327.909C1218.0648,-327.909 1232.847,-355.6111 1288.8497,-358.641"></path> <polygon fill="#555555" stroke="#555555" points="1288.9111,-362.1437 1299,-358.909 1289.0959,-355.1462 1288.9111,-362.1437"></polygon> </g> <!-- Res.Method&#45;&gt;Res.Out --> <g id="Res.Method_3" class="edge">
<title>
Res.Method:B.Code, M.Level.Name-&gt;Res.Out:B.Code, M.Level.Name
</title>
<path fill="none" stroke="#555555" d="M1157,-287.909C1222.8463,-287.909 1227.3272,-225.7389 1286.9411,-219.4247"></path> <polygon fill="#555555" stroke="#555555" points="1287.1924,-222.9165 1297,-218.909 1286.8339,-215.9257 1287.1924,-222.9165"></polygon> </g> <!-- Res.Method&#45;&gt;Site.Out --> <g id="Res.Method_1" class="edge">
<title>
Res.Method:B.Code, Site.ID-&gt;Site.Out:B.Code, Site.ID
</title>
<path fill="none" stroke="#555555" d="M1157,-267.909C1222.5431,-267.909 1195.761,-341.7168 1209,-405.909 1226.4122,-490.3361 1190.9092,-1113.7874 1245,-1180.909 1264.4482,-1205.0424 1281.6431,-1201.9549 1309.9536,-1201.0788"></path> <polygon fill="#555555" stroke="#555555" points="1310.0606,-1204.5776 1320,-1200.909 1309.9422,-1197.5786 1310.0606,-1204.5776"></polygon> </g> <!-- Res.Method&#45;&gt;Times.Out --> <g id="Res.Method_2" class="edge">
<title>
Res.Method:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M1157,-247.909C1230.9276,-247.909 1195.3764,-333.2476 1209,-405.909 1222.984,-480.4926 1201.1473,-1025.9799 1245,-1087.909 1265.1432,-1116.3553 1282.8917,-1120.3452 1314.6694,-1120.8433"></path> <polygon fill="#555555" stroke="#555555" points="1314.9779,-1124.3452 1325,-1120.909 1315.0225,-1117.3454 1314.9779,-1124.3452"></polygon> </g> <!-- Res.Out&#45;&gt;Pub.Out --> <g id="Res.Out_1" class="edge">
<title>
Res.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1435,-238.909C1559.7945,-238.909 1618.2558,-308.0315 1618.9929,-828.8719"></path> <polygon fill="#555555" stroke="#555555" points="1615.4929,-828.9115 1619,-838.909 1622.4929,-828.9065 1615.4929,-828.9115"></polygon> </g> <!-- Rot.Seq --> <g id="Rot.Seq" class="node">
<title>
Rot.Seq
</title>
<polygon fill="#efebdd" stroke="transparent" points="94,-1122.909 94,-1142.909 375,-1142.909 375,-1122.909 94,-1122.909"></polygon> <text text-anchor="start" x="212.1378" y="-1128.309" font-family="Times,serif" font-size="14.00" fill="#000000">Rot.Seq</text> <polygon fill="#ffffff" stroke="transparent" points="94,-1102.909 94,-1122.909 375,-1122.909 375,-1102.909 94,-1102.909"></polygon> <text text-anchor="start" x="95.7159" y="-1109.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">R.Level.Name, T.Name, IN.Level.Name, B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="94,-1082.909 94,-1102.909 375,-1102.909 375,-1082.909 94,-1082.909"></polygon> <text text-anchor="start" x="96" y="-1088.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="#ffffff" stroke="transparent" points="94,-1062.909 94,-1082.909 375,-1082.909 375,-1062.909 94,-1062.909"></polygon> <text text-anchor="start" x="96" y="-1068.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, T.Name</text> <polygon fill="#ffffff" stroke="transparent" points="94,-1042.909 94,-1062.909 375,-1062.909 375,-1042.909 94,-1042.909"></polygon> <text text-anchor="start" x="96" y="-1048.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, IN.Level.Name</text> <polygon fill="#ffffff" stroke="transparent" points="94,-1022.909 94,-1042.909 375,-1042.909 375,-1022.909 94,-1022.909"></polygon> <text text-anchor="start" x="96" y="-1028.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, R.Level.Name</text> <polygon fill="none" stroke="#555555" points="92.5,-1021.909 92.5,-1143.909 375.5,-1143.909 375.5,-1021.909 92.5,-1021.909"></polygon> </g> <!-- Rot.Seq&#45;&gt;Int.Out --> <g id="Rot.Seq_3" class="edge">
<title>
Rot.Seq:B.Code, IN.Level.Name-&gt;Int.Out:IN.Level.Name, B.Code
</title>
<path fill="none" stroke="#555555" d="M375,-1052.909C432.1595,-1052.909 446.2019,-1027.2078 498.3086,-1024.196"></path> <polygon fill="#555555" stroke="#555555" points="498.6025,-1027.6892 508.5,-1023.909 498.4054,-1020.692 498.6025,-1027.6892"></polygon> </g> <!-- Rot.Seq&#45;&gt;MT.Out --> <g id="Rot.Seq_2" class="edge">
<title>
Rot.Seq:B.Code, T.Name-&gt;MT.Out:T.Name, B.Code
</title>
<path fill="none" stroke="#555555" d="M375,-1072.909C498.6203,-1072.909 558.4232,-1143.5155 653,-1063.909 712.238,-1014.0476 618.3663,-896.6224 679.7761,-885.7234"></path> <polygon fill="#555555" stroke="#555555" points="680.3095,-889.192 690,-884.909 679.7536,-882.2141 680.3095,-889.192"></polygon> </g> <!-- Rot.Seq&#45;&gt;Rot.Out --> <g id="Rot.Seq_4" class="edge">
<title>
Rot.Seq:B.Code, R.Level.Name-&gt;Rot.Out:R.Level.Name, B.Code
</title>
<path fill="none" stroke="#555555" d="M375,-1032.909C418.2963,-1032.909 432.8347,-1029.167 468,-1003.909 491.5125,-987.0207 481.8536,-953.4703 501.532,-945.5924"></path> <polygon fill="#555555" stroke="#555555" points="502.2225,-949.0255 511.5,-943.909 501.0568,-942.1232 502.2225,-949.0255"></polygon> </g> <!-- Rot.Seq&#45;&gt;Times.Out --> <g id="Rot.Seq_1" class="edge">
<title>
Rot.Seq:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M375,-1092.909C425.6866,-1092.909 1205.8505,-1118.7117 1314.9523,-1120.7779"></path> <polygon fill="#555555" stroke="#555555" points="1314.9552,-1124.2781 1325,-1120.909 1315.0465,-1117.2787 1314.9552,-1124.2781"></polygon> </g> <!-- Rot.Seq.Summ --> <g id="Rot.Seq.Summ" class="node">
<title>
Rot.Seq.Summ
</title>
<polygon fill="#efebdd" stroke="transparent" points="167,-973.909 167,-993.909 302,-993.909 302,-973.909 167,-973.909"></polygon> <text text-anchor="start" x="192.1059" y="-979.309" font-family="Times,serif" font-size="14.00" fill="#000000">Rot.Seq.Summ</text> <polygon fill="#ffffff" stroke="transparent" points="167,-953.909 167,-973.909 302,-973.909 302,-953.909 167,-953.909"></polygon> <text text-anchor="start" x="168.9884" y="-960.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">R.Level.Name, B.Code</text> <polygon fill="#ffffff" stroke="transparent" points="167,-933.909 167,-953.909 302,-953.909 302,-933.909 167,-933.909"></polygon> <text text-anchor="start" x="168.9884" y="-939.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, R.Level.Name</text> <polygon fill="none" stroke="#555555" points="165.5,-932.909 165.5,-994.909 302.5,-994.909 302.5,-932.909 165.5,-932.909"></polygon> </g> <!-- Rot.Seq.Summ&#45;&gt;Rot.Out --> <g id="Rot.Seq.Summ_1" class="edge">
<title>
Rot.Seq.Summ:B.Code, R.Level.Name-&gt;Rot.Out:R.Level.Name, B.Code
</title>
<path fill="none" stroke="#555555" d="M302,-943.909C391.6558,-943.909 416.5651,-943.909 501.4155,-943.909"></path> <polygon fill="#555555" stroke="#555555" points="501.5,-947.4091 511.5,-943.909 501.5,-940.4091 501.5,-947.4091"></polygon> </g> <!-- Site.Out&#45;&gt;Pub.Out --> <g id="Site.Out_1" class="edge">
<title>
Site.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1413,-1220.909C1450.3862,-1220.909 1463.1012,-1209.6592 1487,-1180.909 1583.8754,-1064.368 1445.4556,-858.4203 1584.0048,-849.2275"></path> <polygon fill="#555555" stroke="#555555" points="1584.1166,-852.7259 1594,-848.909 1583.8935,-845.7294 1584.1166,-852.7259"></polygon> </g> <!-- Till.Out&#45;&gt;Pub.Out --> <g id="Till.Out_1" class="edge">
<title>
Till.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1161,-1477.909C1335.0526,-1477.909 1386.0396,-1402.6881 1487,-1260.909 1594.7023,-1109.6623 1411.8327,-858.4435 1583.8584,-849.173"></path> <polygon fill="#555555" stroke="#555555" points="1584.0945,-852.6682 1594,-848.909 1583.9123,-845.6705 1584.0945,-852.6682"></polygon> </g> <!-- Till.Out&#45;&gt;Site.Out --> <g id="Till.Out_2" class="edge">
<title>
Till.Out:B.Code, Site.ID-&gt;Site.Out:B.Code, Site.ID
</title>
<path fill="none" stroke="#555555" d="M1161,-1437.909C1284.2498,-1437.909 1198.3433,-1214.1427 1309.7463,-1201.4685"></path> <polygon fill="#555555" stroke="#555555" points="1310.2056,-1204.9487 1320,-1200.909 1309.8241,-1197.9591 1310.2056,-1204.9487"></polygon> </g> <!-- Till.Out&#45;&gt;Times.Out --> <g id="Till.Out_3" class="edge">
<title>
Till.Out:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M1161,-1417.909C1272.7537,-1417.909 1186.9838,-1276.4234 1245,-1180.909 1266.1803,-1146.0389 1278.4364,-1124.6281 1314.6842,-1121.35"></path> <polygon fill="#555555" stroke="#555555" points="1315.1587,-1124.833 1325,-1120.909 1314.8596,-1117.8394 1315.1587,-1124.833"></polygon> </g> <!-- Times.Clim --> <g id="Times.Clim" class="node">
<title>
Times.Clim
</title>
<polygon fill="#efebdd" stroke="transparent" points="1024,-1367.909 1024,-1387.909 1153,-1387.909 1153,-1367.909 1024,-1367.909"></polygon> <text text-anchor="start" x="1055.2493" y="-1373.309" font-family="Times,serif" font-size="14.00" fill="#000000">Times.Clim</text> <polygon fill="#ffffff" stroke="transparent" points="1024,-1347.909 1024,-1367.909 1153,-1367.909 1153,-1347.909 1024,-1347.909"></polygon> <text text-anchor="start" x="1025.5091" y="-1354.309" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">B.Code, Site.ID, Time</text> <polygon fill="#ffffff" stroke="transparent" points="1024,-1327.909 1024,-1347.909 1153,-1347.909 1153,-1327.909 1024,-1327.909"></polygon> <text text-anchor="start" x="1026" y="-1333.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Site.ID</text> <polygon fill="#ffffff" stroke="transparent" points="1024,-1307.909 1024,-1327.909 1153,-1327.909 1153,-1307.909 1024,-1307.909"></polygon> <text text-anchor="start" x="1026" y="-1313.309" font-family="Times,serif" font-size="14.00" fill="#444444">B.Code, Time</text> <polygon fill="none" stroke="#555555" points="1022.5,-1306.909 1022.5,-1388.909 1153.5,-1388.909 1153.5,-1306.909 1022.5,-1306.909"></polygon> </g> <!-- Times.Clim&#45;&gt;Site.Out --> <g id="Times.Clim_1" class="edge">
<title>
Times.Clim:B.Code, Site.ID-&gt;Site.Out:B.Code, Site.ID
</title>
<path fill="none" stroke="#555555" d="M1153,-1337.909C1245.4395,-1337.909 1225.6871,-1210.8883 1309.7998,-1201.461"></path> <polygon fill="#555555" stroke="#555555" points="1310.2038,-1204.9443 1320,-1200.909 1309.8255,-1197.9545 1310.2038,-1204.9443"></polygon> </g> <!-- Times.Clim&#45;&gt;Times.Out --> <g id="Times.Clim_2" class="edge">
<title>
Times.Clim:B.Code, Time-&gt;Times.Out:B.Code, Time
</title>
<path fill="none" stroke="#555555" d="M1153,-1317.909C1180.2564,-1317.909 1190.8041,-1313.2024 1209,-1292.909 1243.9052,-1253.9802 1214.6563,-1223.4893 1245,-1180.909 1268.6771,-1147.6836 1278.846,-1124.8979 1314.7346,-1121.3832"></path> <polygon fill="#555555" stroke="#555555" points="1315.1722,-1124.8669 1325,-1120.909 1314.8491,-1117.8743 1315.1722,-1124.8669"></polygon> </g> <!-- Times.Out&#45;&gt;Pub.Out --> <g id="Times.Out_1" class="edge">
<title>
Times.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1407,-1140.909C1449.6505,-1140.909 1459.416,-1120.4387 1487,-1087.909 1559.9908,-1001.8313 1482.5971,-857.9489 1583.9729,-849.3162"></path> <polygon fill="#555555" stroke="#555555" points="1584.1503,-852.8119 1594,-848.909 1583.8662,-845.8177 1584.1503,-852.8119"></polygon> </g> <!-- Var.Out&#45;&gt;era_master_codes.vars --> <g id="Var.Out_3" class="edge">
<title>
Var.Out:Product.Simple, V.Var-&gt;era_master_codes.vars:Product.Simple, V.Var
</title>
<path fill="none" stroke="#555555" d="M1208,-1753.909C1247.1879,-1753.909 1255.7822,-1729.6792 1289.7118,-1725.5147"></path> <polygon fill="#555555" stroke="#555555" points="1290.223,-1728.9907 1300,-1724.909 1289.8116,-1722.0028 1290.223,-1728.9907"></polygon> </g> <!-- Var.Out&#45;&gt;Prod.Out --> <g id="Var.Out_2" class="edge">
<title>
Var.Out:B.Code, Product.Subtype, Product.Simple-&gt;Prod.Out:B.Code, Product.Subtype, Product.Simple
</title>
<path fill="none" stroke="#555555" d="M1208,-1773.909C1238.907,-1773.909 1217.5743,-1827.6847 1236.2377,-1840.2883"></path> <polygon fill="#555555" stroke="#555555" points="1235.4345,-1843.6966 1246,-1842.909 1237.2494,-1836.9359 1235.4345,-1843.6966"></polygon> </g> <!-- Var.Out&#45;&gt;Pub.Out --> <g id="Var.Out_1" class="edge">
<title>
Var.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1208,-1813.909C1225.1558,-1813.909 1228.2666,-1806.6924 1245,-1802.909 1298.0964,-1790.9037 1449.2745,-1804.1536 1487,-1764.909 1626.5992,-1619.6884 1397.1508,-874.9864 1583.8785,-849.5752"></path> <polygon fill="#555555" stroke="#555555" points="1584.2515,-853.0583 1594,-848.909 1583.7917,-846.0734 1584.2515,-853.0583"></polygon> </g> <!-- Weed.Out&#45;&gt;Pub.Out --> <g id="Weed.Out_1" class="edge">
<title>
Weed.Out:B.Code-&gt;Pub.Out:B.Code
</title>
<path fill="none" stroke="#555555" d="M1157,-525.909C1307.6063,-525.909 1371.3143,-506.4772 1487,-602.909 1575.8104,-676.9384 1480.8784,-838.7221 1583.7733,-848.4498"></path> <polygon fill="#555555" stroke="#555555" points="1583.853,-851.9568 1594,-848.909 1584.1671,-844.9639 1583.853,-851.9568"></polygon> </g> <!-- WH.Out&#45;&gt;Pub.Out --> <g id="WH.Out_1" class="edge">
<title>
WH.Out:B.Code-&gt;Pub.Out:B.Code
</title>
</g></g></svg><p><path fill="none" stroke="#555555" d="M1163,-605.909C1311.7608,-605.909 1365.5874,-603.951 1487,-689.909 1553.5318,-737.0123 1512.7044,-839.5864 1583.7362,-848.3144"> <polygon fill="#555555" stroke="#555555" points="1583.8143,-851.8247 1594,-848.909 1584.2192,-844.8364 1583.8143,-851.8247">   </polygon></path></p>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb10" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Creating the ERA Data Model"</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Alliance of Bioversity International &amp; CIAT"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r Sys.Date()`"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 4</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-expand: 2     </span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true </span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">    include-in-header: hypothesis.html</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>::: {style="display: flex; align-items: center; gap: 20px;"}</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>&lt;img src="images/Era_Logo_FINAL_Colour.png" width="100" style="margin-top: 10px;"/&gt;</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="fu"># Overview ####</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>This guide describes how to build a structured data model for the agronomic component of the Evidence for Resilient Agriculture (ERA) dataset using <span class="in">`dm`</span>. It includes steps for downloading, cleaning, and linking the data tables into a coherent data model object.</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="fu"># Packages and Setup ####</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"pacman"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dm, data.table, DiagrammeR, miceadds, readxl, s3fs,htmlwidgets,DiagrammeR,DiagrammeRsvg,rsvg,htmltools)</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>dl_dir <span class="ot">&lt;-</span> <span class="st">"downloaded_data"</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(dl_dir)) <span class="fu">dir.create</span>(dl_dir, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="fu"># Download Agronomic Dataset ####</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">&lt;-</span> s3fs<span class="sc">::</span>S3FileSystem<span class="sc">$</span><span class="fu">new</span>(<span class="at">anonymous =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>era_s3 <span class="ot">&lt;-</span> <span class="st">"s3://digital-atlas/era"</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>all_files <span class="ot">&lt;-</span> s3<span class="sc">$</span><span class="fu">dir_ls</span>(<span class="fu">file.path</span>(era_s3, <span class="st">"data"</span>))</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>target_file <span class="ot">&lt;-</span> <span class="fu">tail</span>(</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grep</span>(<span class="st">".RData"</span>, <span class="fu">grep</span>(<span class="st">"agronomic"</span>, all_files, <span class="at">value =</span> <span class="cn">TRUE</span>), <span class="at">value =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>save_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">getwd</span>(), dl_dir, <span class="fu">basename</span>(target_file))</span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(save_path)) {</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>  s3<span class="sc">$</span><span class="fu">file_download</span>(target_file, save_path, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>agronomic_data <span class="ot">&lt;-</span> miceadds<span class="sc">::</span><span class="fu">load.Rdata2</span>(</span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">basename</span>(save_path),</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="fu">dirname</span>(save_path)</span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a><span class="fu"># Download and Import Master Vocabulary ####</span></span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a>era_vocab_url <span class="ot">&lt;-</span> <span class="st">"https://github.com/peetmate/era_codes/raw/main/era_master_sheet.xlsx"</span></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a>era_vocab_local <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dl_dir, <span class="fu">basename</span>(era_vocab_url))</span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(era_vocab_local)){</span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(era_vocab_url, era_vocab_local, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a>sheet_names <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">excel_sheets</span>(era_vocab_local)</span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a>sheet_names <span class="ot">&lt;-</span> sheet_names[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"sheet|Sheet"</span>, sheet_names)]</span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a>era_master_codes <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a>  sheet_names,</span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> <span class="cf">function</span>(x) data.table<span class="sc">::</span><span class="fu">data.table</span>(readxl<span class="sc">::</span><span class="fu">read_excel</span>(era_vocab_local, <span class="at">sheet =</span> x)),</span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a>  <span class="at">USE.NAMES =</span> <span class="cn">TRUE</span></span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a><span class="fu"># Clean and Harmonize Tables ####</span></span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a><span class="in">```{r clean &amp; harmonize}</span></span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"Prod.Out"</span></span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]  </span></span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(data,c("P.Product.Subtype","P.Product"),c("Product.Subtype","Product.Simple"),skip_absent = T)</span></span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"MT.Out"</span></span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]  </span></span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(data,c("P.Product"),c("Product.Simple"),skip_absent = T)</span></span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-merge(data,agronomic_data$Prod.Out[,.(B.Code,Product.Simple,Product.Subtype)],by=c("B.Code","Product.Simple"))</span></span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"Var.Out"</span></span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]  </span></span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(data,c("V.Product"),c("Product.Simple"),skip_absent = T)</span></span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-merge(data,agronomic_data$Prod.Out[,.(B.Code,Product.Simple,Product.Subtype)],by=c("B.Code","Product.Simple"))</span></span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"Chems.Out"</span></span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]  </span></span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(data,c("Times"),c("Time"),skip_absent = T)</span></span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-121"><a href="#cb10-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-122"><a href="#cb10-122" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-era_master_codes$vars</span></span>
<span id="cb10-123"><a href="#cb10-123" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(data,c("V.Product"),c("Product.Simple"),skip_absent = T)</span></span>
<span id="cb10-124"><a href="#cb10-124" aria-hidden="true" tabindex="-1"></a><span class="in">data[,V.Var:=V.Var1][,V.Species:=V.Species1][,c("V.Var1","V.Species1","V.Subspecies1"):=NULL]</span></span>
<span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a><span class="in">era_master_codes$vars&lt;-data</span></span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-era_master_codes$chem</span></span>
<span id="cb10-128"><a href="#cb10-128" aria-hidden="true" tabindex="-1"></a><span class="in">chem&lt;-data[,.(AOM,C.Type...3,C.Type.AI,C.Name,C.Is.Name.Commercial,C.AI)]</span></span>
<span id="cb10-129"><a href="#cb10-129" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(chem,"C.Type...3","C.Type",skip_absent = T)</span></span>
<span id="cb10-130"><a href="#cb10-130" aria-hidden="true" tabindex="-1"></a><span class="in">chem&lt;-chem[!is.na(C.Type)]</span></span>
<span id="cb10-131"><a href="#cb10-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-132"><a href="#cb10-132" aria-hidden="true" tabindex="-1"></a><span class="in">chem.comm&lt;-data[,.(C.Name.Commercial,C.Name.AI...10,C.Animal,C.Crop,C.Is.Chem,C.Type...14)]</span></span>
<span id="cb10-133"><a href="#cb10-133" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(chem.comm,c("C.Name.AI...10","C.Type...14"),c("C.Name.AI","C.Type"),skip_absent = T)</span></span>
<span id="cb10-134"><a href="#cb10-134" aria-hidden="true" tabindex="-1"></a><span class="in">chem.comm&lt;-chem.comm[!is.na(C.Name.Commercial)]</span></span>
<span id="cb10-135"><a href="#cb10-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-136"><a href="#cb10-136" aria-hidden="true" tabindex="-1"></a><span class="in">chem.ai&lt;-data[,.(C.Name.AI...16,C.Name.AI.CHEBI,C.Tname.AI.Type_gpt)]</span></span>
<span id="cb10-137"><a href="#cb10-137" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(chem.ai,c("C.Name.AI...16"),c("C.Name.AI"))</span></span>
<span id="cb10-138"><a href="#cb10-138" aria-hidden="true" tabindex="-1"></a><span class="in">chem.ai&lt;-chem.ai[!is.na(C.Name.AI)]</span></span>
<span id="cb10-139"><a href="#cb10-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-140"><a href="#cb10-140" aria-hidden="true" tabindex="-1"></a><span class="in">era_master_codes$chem&lt;-chem</span></span>
<span id="cb10-141"><a href="#cb10-141" aria-hidden="true" tabindex="-1"></a><span class="in">era_master_codes$chem.ai&lt;-chem.ai</span></span>
<span id="cb10-142"><a href="#cb10-142" aria-hidden="true" tabindex="-1"></a><span class="in">era_master_codes$chem.comm&lt;-chem.comm</span></span>
<span id="cb10-143"><a href="#cb10-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-144"><a href="#cb10-144" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"Out.Out"</span></span>
<span id="cb10-145"><a href="#cb10-145" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]</span></span>
<span id="cb10-146"><a href="#cb10-146" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(data,"Out.Subind","Subindicator",skip_absent = T)</span></span>
<span id="cb10-147"><a href="#cb10-147" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-148"><a href="#cb10-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-149"><a href="#cb10-149" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"Res.Method"</span></span>
<span id="cb10-150"><a href="#cb10-150" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]</span></span>
<span id="cb10-151"><a href="#cb10-151" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(data,"M.Tree","Tree.Latin.Name",skip_absent = T)</span></span>
<span id="cb10-152"><a href="#cb10-152" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-153"><a href="#cb10-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-154"><a href="#cb10-154" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"AF.Trees"</span></span>
<span id="cb10-155"><a href="#cb10-155" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]</span></span>
<span id="cb10-156"><a href="#cb10-156" aria-hidden="true" tabindex="-1"></a><span class="in">setnames(data,"AF.Tree","Tree.Latin.Name",skip_absent = T)</span></span>
<span id="cb10-157"><a href="#cb10-157" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-158"><a href="#cb10-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-159"><a href="#cb10-159" aria-hidden="true" tabindex="-1"></a><span class="in"># Dev.Note: Probably needs converting from wide to long format</span></span>
<span id="cb10-160"><a href="#cb10-160" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"Int.Out"</span></span>
<span id="cb10-161"><a href="#cb10-161" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]</span></span>
<span id="cb10-162"><a href="#cb10-162" aria-hidden="true" tabindex="-1"></a><span class="in">data[,T.Name:=IN.Level.Name] # Note this multiple T.Names is concatenated with a "..."</span></span>
<span id="cb10-163"><a href="#cb10-163" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-164"><a href="#cb10-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-165"><a href="#cb10-165" aria-hidden="true" tabindex="-1"></a><span class="in">tab&lt;-"Rot.Seq"</span></span>
<span id="cb10-166"><a href="#cb10-166" aria-hidden="true" tabindex="-1"></a><span class="in">data&lt;-agronomic_data[[tab]]</span></span>
<span id="cb10-167"><a href="#cb10-167" aria-hidden="true" tabindex="-1"></a><span class="in">data[!is.na(R.Prod2)|!is.na(IN.Code),IN.Level.Name:=R.Treatment]</span></span>
<span id="cb10-168"><a href="#cb10-168" aria-hidden="true" tabindex="-1"></a><span class="in">data[is.na(R.Prod2) &amp; is.na(IN.Code),T.Name:=R.Treatment]</span></span>
<span id="cb10-169"><a href="#cb10-169" aria-hidden="true" tabindex="-1"></a><span class="in">agronomic_data[[tab]] &lt;-data</span></span>
<span id="cb10-170"><a href="#cb10-170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-171"><a href="#cb10-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-172"><a href="#cb10-172" aria-hidden="true" tabindex="-1"></a><span class="fu"># Create Data Model ####</span></span>
<span id="cb10-173"><a href="#cb10-173" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ensure consistent key naming and uniqueness before setting PKs/FKs.</span>
<span id="cb10-174"><a href="#cb10-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-177"><a href="#cb10-177" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-178"><a href="#cb10-178" aria-hidden="true" tabindex="-1"></a>era_agronomy.model <span class="ot">&lt;-</span> <span class="fu">dm</span>(</span>
<span id="cb10-179"><a href="#cb10-179" aria-hidden="true" tabindex="-1"></a>  <span class="at">Pub.Out =</span> agronomic_data<span class="sc">$</span>Pub.Out,</span>
<span id="cb10-180"><a href="#cb10-180" aria-hidden="true" tabindex="-1"></a>  <span class="at">Site.Out =</span> agronomic_data<span class="sc">$</span>Site.Out,</span>
<span id="cb10-181"><a href="#cb10-181" aria-hidden="true" tabindex="-1"></a>  <span class="at">Times.Out =</span> agronomic_data<span class="sc">$</span>Times.Out,</span>
<span id="cb10-182"><a href="#cb10-182" aria-hidden="true" tabindex="-1"></a>  <span class="at">Times.Clim =</span> agronomic_data<span class="sc">$</span>Times.Clim,</span>
<span id="cb10-183"><a href="#cb10-183" aria-hidden="true" tabindex="-1"></a>  <span class="at">Prod.Out =</span> agronomic_data<span class="sc">$</span>Prod.Out,</span>
<span id="cb10-184"><a href="#cb10-184" aria-hidden="true" tabindex="-1"></a>  <span class="at">ExpD.Out =</span> agronomic_data<span class="sc">$</span>ExpD.Out,</span>
<span id="cb10-185"><a href="#cb10-185" aria-hidden="true" tabindex="-1"></a>  <span class="at">Var.Out =</span> agronomic_data<span class="sc">$</span>Var.Out,</span>
<span id="cb10-186"><a href="#cb10-186" aria-hidden="true" tabindex="-1"></a>  <span class="at">Till.Out =</span> agronomic_data<span class="sc">$</span>Till.Out,</span>
<span id="cb10-187"><a href="#cb10-187" aria-hidden="true" tabindex="-1"></a>  <span class="at">Plant.Out =</span> agronomic_data<span class="sc">$</span>Plant.Out,</span>
<span id="cb10-188"><a href="#cb10-188" aria-hidden="true" tabindex="-1"></a>  <span class="at">Plant.Method =</span> agronomic_data<span class="sc">$</span>Plant.Method,</span>
<span id="cb10-189"><a href="#cb10-189" aria-hidden="true" tabindex="-1"></a>  <span class="at">PD.Codes =</span> agronomic_data<span class="sc">$</span>PD.Codes,</span>
<span id="cb10-190"><a href="#cb10-190" aria-hidden="true" tabindex="-1"></a>  <span class="at">PD.Out =</span> agronomic_data<span class="sc">$</span>PD.Out,</span>
<span id="cb10-191"><a href="#cb10-191" aria-hidden="true" tabindex="-1"></a>  <span class="at">Chems.Code =</span> agronomic_data<span class="sc">$</span>Chems.Code,</span>
<span id="cb10-192"><a href="#cb10-192" aria-hidden="true" tabindex="-1"></a>  <span class="at">Chems.Out =</span> agronomic_data<span class="sc">$</span>Chems.Out,</span>
<span id="cb10-193"><a href="#cb10-193" aria-hidden="true" tabindex="-1"></a> <span class="co"># Chems.AI = agronomic_data$Chems.AI,</span></span>
<span id="cb10-194"><a href="#cb10-194" aria-hidden="true" tabindex="-1"></a>  <span class="at">Res.Out =</span> agronomic_data<span class="sc">$</span>Res.Out,</span>
<span id="cb10-195"><a href="#cb10-195" aria-hidden="true" tabindex="-1"></a>  <span class="at">Res.Method =</span> agronomic_data<span class="sc">$</span>Res.Method,</span>
<span id="cb10-196"><a href="#cb10-196" aria-hidden="true" tabindex="-1"></a> <span class="co"># Res.Comp = agronomic_data$Res.Comp,</span></span>
<span id="cb10-197"><a href="#cb10-197" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fert.Out =</span> agronomic_data<span class="sc">$</span>Fert.Out,</span>
<span id="cb10-198"><a href="#cb10-198" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fert.Method =</span> agronomic_data<span class="sc">$</span>Fert.Method,</span>
<span id="cb10-199"><a href="#cb10-199" aria-hidden="true" tabindex="-1"></a> <span class="co"># Fert.Comp =  agronomic_data$Fert.Comp,</span></span>
<span id="cb10-200"><a href="#cb10-200" aria-hidden="true" tabindex="-1"></a>  <span class="at">Har.Out =</span> agronomic_data<span class="sc">$</span>Har.Out,</span>
<span id="cb10-201"><a href="#cb10-201" aria-hidden="true" tabindex="-1"></a>  <span class="at">pH.Out =</span> agronomic_data<span class="sc">$</span>pH.Out,</span>
<span id="cb10-202"><a href="#cb10-202" aria-hidden="true" tabindex="-1"></a>  <span class="at">pH.Method =</span> agronomic_data<span class="sc">$</span>pH.Method,</span>
<span id="cb10-203"><a href="#cb10-203" aria-hidden="true" tabindex="-1"></a>  <span class="at">WH.Out =</span> agronomic_data<span class="sc">$</span>WH.Out,</span>
<span id="cb10-204"><a href="#cb10-204" aria-hidden="true" tabindex="-1"></a>  <span class="at">AF.Out =</span> agronomic_data<span class="sc">$</span>AF.Out,</span>
<span id="cb10-205"><a href="#cb10-205" aria-hidden="true" tabindex="-1"></a>  <span class="at">AF.Trees=</span>agronomic_data<span class="sc">$</span>AF.Trees,</span>
<span id="cb10-206"><a href="#cb10-206" aria-hidden="true" tabindex="-1"></a>  <span class="at">Weed.Out=</span>agronomic_data<span class="sc">$</span>Weed.Out,</span>
<span id="cb10-207"><a href="#cb10-207" aria-hidden="true" tabindex="-1"></a>  <span class="at">Other.Out=</span>agronomic_data<span class="sc">$</span>Other.Out,</span>
<span id="cb10-208"><a href="#cb10-208" aria-hidden="true" tabindex="-1"></a>  <span class="at">Irrig.Codes=</span>agronomic_data<span class="sc">$</span>Irrig.Codes,</span>
<span id="cb10-209"><a href="#cb10-209" aria-hidden="true" tabindex="-1"></a>  <span class="at">Irrig.Method=</span>agronomic_data<span class="sc">$</span>Irrig.Method,</span>
<span id="cb10-210"><a href="#cb10-210" aria-hidden="true" tabindex="-1"></a>  <span class="at">MT.Out =</span> agronomic_data<span class="sc">$</span>MT.Out,</span>
<span id="cb10-211"><a href="#cb10-211" aria-hidden="true" tabindex="-1"></a>  <span class="at">Int.Out =</span> agronomic_data<span class="sc">$</span>Int.Out,</span>
<span id="cb10-212"><a href="#cb10-212" aria-hidden="true" tabindex="-1"></a>  <span class="at">Rot.Out =</span> agronomic_data<span class="sc">$</span>Rot.Out,</span>
<span id="cb10-213"><a href="#cb10-213" aria-hidden="true" tabindex="-1"></a>  <span class="at">Rot.Seq =</span> agronomic_data<span class="sc">$</span>Rot.Seq,</span>
<span id="cb10-214"><a href="#cb10-214" aria-hidden="true" tabindex="-1"></a>  <span class="at">Rot.Seq.Summ =</span> agronomic_data<span class="sc">$</span>Rot.Seq.Summ,</span>
<span id="cb10-215"><a href="#cb10-215" aria-hidden="true" tabindex="-1"></a>  <span class="at">Out.Out =</span> agronomic_data<span class="sc">$</span>Out.Out,</span>
<span id="cb10-216"><a href="#cb10-216" aria-hidden="true" tabindex="-1"></a>  <span class="at">Data.Out=</span>agronomic_data<span class="sc">$</span>Data.Out,</span>
<span id="cb10-217"><a href="#cb10-217" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.fert =</span> era_master_codes<span class="sc">$</span>fert,</span>
<span id="cb10-218"><a href="#cb10-218" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.prod  =</span> era_master_codes<span class="sc">$</span>prod,</span>
<span id="cb10-219"><a href="#cb10-219" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.vars =</span> era_master_codes<span class="sc">$</span>vars,</span>
<span id="cb10-220"><a href="#cb10-220" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.chem =</span> era_master_codes<span class="sc">$</span>chem,</span>
<span id="cb10-221"><a href="#cb10-221" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.residues =</span> era_master_codes<span class="sc">$</span>residues,</span>
<span id="cb10-222"><a href="#cb10-222" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.trees =</span> era_master_codes<span class="sc">$</span>trees,</span>
<span id="cb10-223"><a href="#cb10-223" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.out =</span> era_master_codes<span class="sc">$</span>out,</span>
<span id="cb10-224"><a href="#cb10-224" aria-hidden="true" tabindex="-1"></a>  <span class="at">era_master_codes.prac =</span> era_master_codes<span class="sc">$</span>prac) <span class="sc">|&gt;</span></span>
<span id="cb10-225"><a href="#cb10-225" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-226"><a href="#cb10-226" aria-hidden="true" tabindex="-1"></a>  <span class="co"># PRIMARY KEYS</span></span>
<span id="cb10-227"><a href="#cb10-227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Pub.Out, B.Code) <span class="sc">|&gt;</span></span>
<span id="cb10-228"><a href="#cb10-228" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Site.Out, <span class="fu">c</span>(B.Code,Site.ID))<span class="sc">|&gt;</span></span>
<span id="cb10-229"><a href="#cb10-229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Times.Out, <span class="fu">c</span>(B.Code,Time)) <span class="sc">|&gt;</span></span>
<span id="cb10-230"><a href="#cb10-230" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Times.Clim, <span class="fu">c</span>(B.Code,Site.ID,Time)) <span class="sc">|&gt;</span></span>
<span id="cb10-231"><a href="#cb10-231" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Prod.Out, <span class="fu">c</span>(B.Code,Product.Subtype,Product.Simple)) <span class="sc">|&gt;</span></span>
<span id="cb10-232"><a href="#cb10-232" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(ExpD.Out, B.Code) <span class="sc">|&gt;</span></span>
<span id="cb10-233"><a href="#cb10-233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Var.Out, <span class="fu">c</span>(B.Code,V.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-234"><a href="#cb10-234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Till.Out, <span class="fu">c</span>(B.Code,Till.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-235"><a href="#cb10-235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Plant.Out, <span class="fu">c</span>(B.Code,P.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-236"><a href="#cb10-236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Plant.Method, <span class="fu">c</span>(B.Code,P.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-237"><a href="#cb10-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(PD.Codes, <span class="fu">c</span>(B.Code,PD.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-238"><a href="#cb10-238" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(PD.Out, <span class="fu">c</span>(B.Code,PD.Level.Name,Site.ID ,Time)) <span class="sc">|&gt;</span></span>
<span id="cb10-239"><a href="#cb10-239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Chems.Code, <span class="fu">c</span>(B.Code,C.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-240"><a href="#cb10-240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Chems.Out, <span class="fu">c</span>(B.Code,C.Level.Name,C.Type,C.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-241"><a href="#cb10-241" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dm_add_pk(Chems.AI, c(B.Code,C.Name)) |&gt;</span></span>
<span id="cb10-242"><a href="#cb10-242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Fert.Out, <span class="fu">c</span>(B.Code,F.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-243"><a href="#cb10-243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Fert.Method, <span class="fu">c</span>(B.Code,F.Level.Name,F.Type)) <span class="sc">|&gt;</span></span>
<span id="cb10-244"><a href="#cb10-244" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dm_add_pk(Fert.Comp, c(B.Code,F.Type)) |&gt;</span></span>
<span id="cb10-245"><a href="#cb10-245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Res.Out, <span class="fu">c</span>(B.Code,M.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-246"><a href="#cb10-246" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Res.Method, <span class="fu">c</span>(B.Code,M.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-247"><a href="#cb10-247" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dm_add_pk(Res.Comp, c(B.Code,M.Tree,M.Material)) |&gt;</span></span>
<span id="cb10-248"><a href="#cb10-248" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Har.Out, <span class="fu">c</span>(B.Code,H.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-249"><a href="#cb10-249" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(pH.Out, <span class="fu">c</span>(B.Code,pH.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-250"><a href="#cb10-250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(pH.Method, <span class="fu">c</span>(B.Code,pH.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-251"><a href="#cb10-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(WH.Out, <span class="fu">c</span>(B.Code,WH.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-252"><a href="#cb10-252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(AF.Out, <span class="fu">c</span>(B.Code,AF.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-253"><a href="#cb10-253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(AF.Trees, <span class="fu">c</span>(B.Code,AF.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-254"><a href="#cb10-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Weed.Out, <span class="fu">c</span>(B.Code,W.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-255"><a href="#cb10-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Other.Out, <span class="fu">c</span>(B.Code,O.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-256"><a href="#cb10-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Irrig.Codes, <span class="fu">c</span>(B.Code,I.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-257"><a href="#cb10-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Irrig.Method, <span class="fu">c</span>(B.Code,I.Level.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-258"><a href="#cb10-258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(MT.Out, <span class="fu">c</span>(T.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb10-259"><a href="#cb10-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Int.Out, <span class="fu">c</span>(IN.Level.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb10-260"><a href="#cb10-260" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Rot.Out, <span class="fu">c</span>(R.Level.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb10-261"><a href="#cb10-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Rot.Seq, <span class="fu">c</span>(R.Level.Name,T.Name,IN.Level.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb10-262"><a href="#cb10-262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Rot.Seq.Summ, <span class="fu">c</span>(R.Level.Name,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb10-263"><a href="#cb10-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Out.Out, <span class="fu">c</span>(Out.Code.Joined,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb10-264"><a href="#cb10-264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(Data.Out, <span class="fu">c</span>(Site.ID,Time,T.Name,IN.Level.Name,R.Level.Name,Out.Code.Joined,B.Code)) <span class="sc">|&gt;</span></span>
<span id="cb10-265"><a href="#cb10-265" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.fert , F.Type) <span class="sc">|&gt;</span></span>
<span id="cb10-266"><a href="#cb10-266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.prod, <span class="fu">c</span>(Product.Subtype,Product.Simple)) <span class="sc">|&gt;</span></span>
<span id="cb10-267"><a href="#cb10-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.vars, <span class="fu">c</span>(Product.Simple,V.Var)) <span class="sc">|&gt;</span></span>
<span id="cb10-268"><a href="#cb10-268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.chem, <span class="fu">c</span>(C.Type,C.Name)) <span class="sc">|&gt;</span></span>
<span id="cb10-269"><a href="#cb10-269" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.residues, M.Material) <span class="sc">|&gt;</span></span>
<span id="cb10-270"><a href="#cb10-270" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.trees, Tree.Latin.Name) <span class="sc">|&gt;</span></span>
<span id="cb10-271"><a href="#cb10-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.out, Subindicator) <span class="sc">|&gt;</span></span>
<span id="cb10-272"><a href="#cb10-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_pk</span>(era_master_codes.prac, Subpractice) <span class="sc">|&gt;</span></span>
<span id="cb10-273"><a href="#cb10-273" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-274"><a href="#cb10-274" aria-hidden="true" tabindex="-1"></a>  <span class="co"># FOREIGN KEYS</span></span>
<span id="cb10-275"><a href="#cb10-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Site.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-276"><a href="#cb10-276" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Times.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-277"><a href="#cb10-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Times.Clim, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-278"><a href="#cb10-278" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Times.Clim, <span class="fu">c</span>(B.Code,Site.ID), Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-279"><a href="#cb10-279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Prod.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-280"><a href="#cb10-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Prod.Out, <span class="fu">c</span>(Product.Subtype,Product.Simple), era_master_codes.prod) <span class="sc">|&gt;</span></span>
<span id="cb10-281"><a href="#cb10-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(ExpD.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-282"><a href="#cb10-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Plant.Out, B.Code,Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-283"><a href="#cb10-283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Plant.Method, <span class="fu">c</span>(B.Code,P.Level.Name),Plant.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-284"><a href="#cb10-284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Var.Out, <span class="fu">c</span>(Product.Simple,V.Var),era_master_codes.vars) <span class="sc">|&gt;</span></span>
<span id="cb10-285"><a href="#cb10-285" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Var.Out, <span class="fu">c</span>(B.Code,Product.Subtype,Product.Simple), Prod.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-286"><a href="#cb10-286" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Var.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-287"><a href="#cb10-287" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Till.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-288"><a href="#cb10-288" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Till.Out, <span class="fu">c</span>(B.Code,Site.ID), Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-289"><a href="#cb10-289" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Till.Out, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-290"><a href="#cb10-290" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(PD.Codes, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-291"><a href="#cb10-291" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(PD.Out, <span class="fu">c</span>(B.Code,PD.Level.Name), PD.Codes) <span class="sc">|&gt;</span></span>
<span id="cb10-292"><a href="#cb10-292" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(PD.Out, <span class="fu">c</span>(B.Code,Site.ID), Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-293"><a href="#cb10-293" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(PD.Out, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-294"><a href="#cb10-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Code, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-295"><a href="#cb10-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Out, <span class="fu">c</span>(B.Code,C.Level.Name), Chems.Code) <span class="sc">|&gt;</span></span>
<span id="cb10-296"><a href="#cb10-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Out, <span class="fu">c</span>(B.Code,Site.ID), Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-297"><a href="#cb10-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Out, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-298"><a href="#cb10-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Chems.Out, <span class="fu">c</span>(C.Type,C.Name), era_master_codes.chem) <span class="sc">|&gt;</span></span>
<span id="cb10-299"><a href="#cb10-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-300"><a href="#cb10-300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Method, <span class="fu">c</span>(B.Code,F.Level.Name), Fert.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb10-301"><a href="#cb10-301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Method, F.Type, era_master_codes.fert ) <span class="sc">|&gt;</span></span>
<span id="cb10-302"><a href="#cb10-302" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Method, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb10-303"><a href="#cb10-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Fert.Method, <span class="fu">c</span>(B.Code,Site.ID), Site.Out ) <span class="sc">|&gt;</span></span>
<span id="cb10-304"><a href="#cb10-304" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-305"><a href="#cb10-305" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, <span class="fu">c</span>(B.Code,M.Level.Name), Res.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb10-306"><a href="#cb10-306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, M.Material, era_master_codes.residues) <span class="sc">|&gt;</span></span>
<span id="cb10-307"><a href="#cb10-307" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, Tree.Latin.Name, era_master_codes.trees) <span class="sc">|&gt;</span></span>
<span id="cb10-308"><a href="#cb10-308" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb10-309"><a href="#cb10-309" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Res.Method, <span class="fu">c</span>(B.Code,Site.ID), Site.Out ) <span class="sc">|&gt;</span></span>
<span id="cb10-310"><a href="#cb10-310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(pH.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-311"><a href="#cb10-311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(pH.Method, <span class="fu">c</span>(B.Code,pH.Level.Name), pH.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb10-312"><a href="#cb10-312" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(WH.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-313"><a href="#cb10-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(AF.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-314"><a href="#cb10-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(AF.Trees, <span class="fu">c</span>(B.Code,AF.Level.Name), AF.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb10-315"><a href="#cb10-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(AF.Trees, Tree.Latin.Name, era_master_codes.trees) <span class="sc">|&gt;</span></span>
<span id="cb10-316"><a href="#cb10-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Weed.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-317"><a href="#cb10-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Other.Out, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-318"><a href="#cb10-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Irrig.Codes, B.Code, Pub.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-319"><a href="#cb10-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Irrig.Method, <span class="fu">c</span>(B.Code,I.Level.Name), Irrig.Codes) <span class="sc">|&gt;</span>           </span>
<span id="cb10-320"><a href="#cb10-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Irrig.Method, <span class="fu">c</span>(B.Code,Time), Times.Out) <span class="sc">|&gt;</span>           </span>
<span id="cb10-321"><a href="#cb10-321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Irrig.Method, <span class="fu">c</span>(B.Code,Site.ID), Site.Out ) <span class="sc">|&gt;</span></span>
<span id="cb10-322"><a href="#cb10-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,Product.Subtype,Product.Simple), Prod.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-323"><a href="#cb10-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,F.Level.Name), Fert.Out) <span class="sc">|&gt;</span> </span>
<span id="cb10-324"><a href="#cb10-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,P.Level.Name), Plant.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-325"><a href="#cb10-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,V.Level.Name), Var.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-326"><a href="#cb10-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,Till.Level.Name), Till.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-327"><a href="#cb10-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,PD.Level.Name), PD.Codes) <span class="sc">|&gt;</span></span>
<span id="cb10-328"><a href="#cb10-328" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,C.Level.Name), Chems.Code) <span class="sc">|&gt;</span></span>
<span id="cb10-329"><a href="#cb10-329" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,M.Level.Name), Res.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-330"><a href="#cb10-330" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,H.Level.Name), Har.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-331"><a href="#cb10-331" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,pH.Level.Name), pH.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-332"><a href="#cb10-332" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,WH.Level.Name), WH.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-333"><a href="#cb10-333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,AF.Level.Name), AF.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-334"><a href="#cb10-334" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,W.Level.Name), Weed.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-335"><a href="#cb10-335" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,O.Level.Name), Other.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-336"><a href="#cb10-336" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(MT.Out, <span class="fu">c</span>(B.Code,I.Level.Name), Irrig.Codes) <span class="sc">|&gt;</span></span>
<span id="cb10-337"><a href="#cb10-337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Int.Out, <span class="fu">c</span>(B.Code,T.Name),MT.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-338"><a href="#cb10-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq, <span class="fu">c</span>(B.Code,T.Name),MT.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-339"><a href="#cb10-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq, <span class="fu">c</span>(B.Code,IN.Level.Name),Int.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-340"><a href="#cb10-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq, <span class="fu">c</span>(B.Code,R.Level.Name),Rot.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-341"><a href="#cb10-341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq, <span class="fu">c</span>(B.Code,Time),Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-342"><a href="#cb10-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Rot.Seq.Summ, <span class="fu">c</span>(B.Code,R.Level.Name),Rot.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-343"><a href="#cb10-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Out.Out, Subindicator,era_master_codes.out) <span class="sc">|&gt;</span></span>
<span id="cb10-344"><a href="#cb10-344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,Out.Code.Joined),Out.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-345"><a href="#cb10-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,Site.ID),Site.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-346"><a href="#cb10-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,Time),Times.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-347"><a href="#cb10-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,T.Name),MT.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-348"><a href="#cb10-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,IN.Level.Name),Int.Out) <span class="sc">|&gt;</span></span>
<span id="cb10-349"><a href="#cb10-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dm_add_fk</span>(Data.Out, <span class="fu">c</span>(B.Code,R.Level.Name),Rot.Out) </span>
<span id="cb10-350"><a href="#cb10-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-351"><a href="#cb10-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-352"><a href="#cb10-352" aria-hidden="true" tabindex="-1"></a><span class="fu"># Save Data Model ####</span></span>
<span id="cb10-353"><a href="#cb10-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-356"><a href="#cb10-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-357"><a href="#cb10-357" aria-hidden="true" tabindex="-1"></a>save_name <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".RData"</span>, <span class="st">"_model.rds"</span>, <span class="fu">basename</span>(target_file))</span>
<span id="cb10-358"><a href="#cb10-358" aria-hidden="true" tabindex="-1"></a>save_file <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dl_dir, save_name)</span>
<span id="cb10-359"><a href="#cb10-359" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(era_agronomy.model, <span class="at">file =</span> save_file)</span>
<span id="cb10-360"><a href="#cb10-360" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-361"><a href="#cb10-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-362"><a href="#cb10-362" aria-hidden="true" tabindex="-1"></a><span class="fu"># Show Data Model ####</span></span>
<span id="cb10-363"><a href="#cb10-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-364"><a href="#cb10-364" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The data model enables efficient checking of table linkages and enforcement of relational structure.</span>
<span id="cb10-365"><a href="#cb10-365" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>For a visualisation, you can use:</span>
<span id="cb10-366"><a href="#cb10-366" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-367"><a href="#cb10-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-368"><a href="#cb10-368" aria-hidden="true" tabindex="-1"></a><span class="in">```{r era-model-plot, echo=T,results='asis'}</span></span>
<span id="cb10-369"><a href="#cb10-369" aria-hidden="true" tabindex="-1"></a><span class="in">g &lt;- dm::dm_draw(era_agronomy.model)</span></span>
<span id="cb10-370"><a href="#cb10-370" aria-hidden="true" tabindex="-1"></a><span class="in">svg &lt;- export_svg(g)</span></span>
<span id="cb10-371"><a href="#cb10-371" aria-hidden="true" tabindex="-1"></a><span class="in">cat(svg)</span></span>
<span id="cb10-372"><a href="#cb10-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>